(this["webpackJsonpsuperon-web-commerce"]=this["webpackJsonpsuperon-web-commerce"]||[]).push([[11],{329:function(e,t,o){"use strict";o.d(t,"a",(function(){return _}));var s=o(1),r=o.n(s),i=o(34),a=o(21),n=o(38),c=o(267),d=o(10),l=o(396),p=o(2),h=o(29),u=o(280),g=o(273),m=o.n(g),f=o(57),b=o(821),j=o(820),v=o(56),x=o(353),O=o(3),y=o(5),C=o(6);const w=u(),S=r.a.lazy((()=>o.e(32).then(o.bind(null,487)))),P=r.a.lazy((()=>o.e(17).then(o.bind(null,494))));class T extends s.Component{constructor(e){super(e),this.renderModalAnalise=()=>{const{showAnaliseModal:e}=this.state,{t:t,fornecedorActive:o}=this.props,s=p.get(o,"config.instrucoes_cadastro_analise","Seu cadastro est\xe1 em an\xe1lise!")||"Seu cadastro est\xe1 em an\xe1lise!",r=s.includes("<html");return Object(C.jsxs)(b.a,{open:e,style:{marginTop:"50px",margin:"auto"},children:[Object(C.jsx)(b.a.Header,{children:t("modal.cadastro_analise.header")}),Object(C.jsx)(b.a.Content,{scrolling:!0,children:Object(C.jsx)(b.a.Description,{children:r?Object(C.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:s}):Object(C.jsx)(m.a,{escapeHtml:!1,source:s,astPlugins:[w]})})}),Object(C.jsx)(b.a.Actions,{children:Object(C.jsx)(j.a,{id:"recusar-termos",icon:"close",content:t("modal.cadastro_analise.btn.fechar"),onClick:()=>{this.setState({...this.state,showAnaliseModal:!1})}})})]})},this.state={showAnaliseModal:!1},this.handleClickQuantidade=this.handleClickQuantidade.bind(this),this.navigateToDetails=this.navigateToDetails.bind(this),this.getProduct=this.getProduct.bind(this),this.debouncedGetProduct=p.debounce(this.handleDebounce,300)}getItemCarrinho(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(this.props.carrinho&&this.props.produto?(this.props.carrinho.mapIdProdutosSelecionados||{})[e&&e.id?e.id:this.props.produto.id]:null)||{quantidade:0}}getQuantidade(e){return this.getItemCarrinho(e).quantidade||0}handleClickQuantidade(e,t,o){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const{restricaoCadastro:r,usuarioLogado:a,usuarioAprovado:n,history:c,fornecedorActive:d}=this.props,{idfornecedor:l,slug:p}=d;if(r){if(!a)return c.push("/".concat(p||l,"/login?after_login=").concat(window.location.pathname));if(!n)return this.setState({...this.state,showAnaliseModal:!0})}let h=this.getQuantidade(o);t===i.UPDATE_DIRECTION.SET&&(h=isNaN(s)?this.getQuantidade(o):s),0===this.getQuantidade()&&this.props.onAdd&&this.props.onAdd(o),this.props.alterarProdutoCarrinho({direction:t,produto:o,quantidadeBase:h,exibirMensagem:!1},(e=>{this.setState({...this.state,quantidade:e}),this.debouncedGetProduct(t,o)}),!1)}handleDebounce(e,t){if(e===i.UPDATE_DIRECTION.INC){const e={position:"top-right",toastContainerID:t.idcadastroextraproduto};l.a.success("Produto ".concat(t.nome||""," adicionado"),e)}this.getProduct()}getProduct(){const e=this.getQuantidade(),{fornecedorActive:{idfornecedor:t},usuario:o,produto:s,updateProduct:r}=this.props,i="".concat(o.token).concat(O.k).concat(o.idcliente),a=p.get(o,"formaPagamentoActive.idformapagto","");y.b.getDetalhesProduto(i,t,s.slug,a,!0,"",e).then((t=>{const o={...t.data,quantidade:e};r(o)}))}navigateToDetails(){let e=this.props.produto?this.props.produto.slug||this.props.produto.id:null;const t=p.get(this.props.produto,"recomendacao.sessao_id",null),o=p.get(this.props.produto,"visao","CART");if(e){const s=this.props.match.params.idfornecedor,r=t?"?recomendacao_id=".concat(t,"&recomendacao_visao=").concat(o):"";this.props.history.push("/".concat(s,"/produto/").concat(e,"/").concat(r)),t&&this.props.recomendacaoFeedback({sessao_id:t,item_id:p.get(this.props.produto,"idproduto",""),acao:"CLICK",visao:o})}}goLogin(){const{fornecedorActive:e,history:t}=this.props,{idfornecedor:o,slug:s}=e;t.push("/".concat(s||o,"/login?after_login=").concat(window.location.pathname))}render(){const{produto:e,imagensProduto:t,alterarImagem:o,imgSrc:r,fullWidth:i,fornecedorActive:a}=this.props,n=this.getQuantidade(),c=((e,t,o)=>{const s=o?o.tag.includes("disable-product-multiple"):null,r=p.get(e,"efeitospoliticas.descontoProgressivo"),i=Object(h.c)(r,t),a=Object(h.d)(e);let n=a?Object(h.b)(r,i):e.preconf;o&&!s&&(t*=e.multiploincremento);const c=t>=i?Object(h.a)(r,t):Object(h.b)(r,t);return t>=e.minvendaatacado&&n>e.preco_sem_politica_atacado&&e.preco_sem_politica_atacado>0&&(n=e.preco_sem_politica_atacado),{usaAtacado:a,precoDestaque:n,precoAuxiliar:c,msgDestaque:a?"A partir de ".concat(i," ").concat(e.labelunidade):"",msgMaxporpedido:e.maxporpedido?"M\xe1ximo de ".concat(e.maxporpedido," ").concat(e.labelunidade," por pedido"):""}})(e,n,a),d=Object(x.a)(e),l=e.idproduto;return Object(C.jsxs)(s.Suspense,{fallback:Object(C.jsx)("div",{}),children:[this.renderModalAnalise(),i?Object(C.jsx)(P,{idproduto:e.idproduto,produto:e,styles:d,imagensProduto:t,imgSrc:r,alterarImagem:o,carrinho:this.getItemCarrinho(),quantidade:n,precoDestaque:c,handleClickQuantidade:this.handleClickQuantidade,clickable:!0,allowEdit:this.props.allowEdit||!1,hover:this.props.hover||!1,onNavigationDetails:()=>this.navigateToDetails()},l):Object(C.jsx)(S,{idproduto:e.idproduto,produto:e,styles:d,carrinho:this.getItemCarrinho(),quantidade:n,precoDestaque:c,handleClickQuantidade:this.handleClickQuantidade,clickable:!0,allowEdit:this.props.allowEdit||!1,hover:this.props.hover||!1,onNavigationDetails:()=>this.navigateToDetails(),goLogin:()=>this.goLogin(),fornecedorActive:a},l)]})}}const _=Object(a.compose)(Object(c.b)("CardProdutoContainer",{}),d.g,Object(v.b)(),Object(n.b)((e=>({carrinho:e.carrinho,usuarioAprovado:e.usuario.cadastro_aprovado,usuarioLogado:e.usuario.authenticated,usuario:e.usuario,restricaoCadastro:Object(f.d)(e,"restrict-not-approved-user-submission"),fornecedorActive:e.fornecedor.fornecedorActive})),(e=>Object(a.bindActionCreators)({alterarProdutoCarrinho:i.alterarProdutoCarrinho,recomendacaoFeedback:i.recomendacaoFeedback},e))))(T)},354:function(e,t,o){"use strict";o.d(t,"a",(function(){return f}));var s=o(1),r=o(21),i=o(38),a=o(267),n=o(329),c=o(355),d=o(330),l=o.n(d),p=(o(327),o(328),o(400),o(2)),h=o(22),u=o(6);const g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,r=[1,2,2,3,4],i=[460,768,960,1150,1400].map(((e,t)=>((e,t,o)=>{let s=Math.ceil(t/3);return o&&o<t&&(t=o),{breakpoint:e,settings:{dots:!1,arrows:!0,slidesToShow:t,slidesToScroll:s}}})(1.01*e,r[t],o))),a="#FFFFFF"===e.primaryColor?e.textColor:e.primaryColor;return{...{...t,autoplaySpeed:t.autoplay?Number(t.autoplaySpeed):""},slidesToShow:i[i.length-1].settings.slidesToShow,slidesToScroll:i[i.length-1].settings.slidesToScroll,infinite:!0,dots:!1,nextArrow:Object(u.jsx)(c.a,{className:"slick-next",icon:"fa fa-angle-double-right",color:a,disabled:s}),prevArrow:Object(u.jsx)(c.a,{className:"slick-prev",icon:"fa fa-angle-double-left",color:a,disabled:s}),responsive:i}},m=(e,t)=>{const o=o=>{const s=e.map((e=>e.id===o.id?o:e));t(s)};return e.map((e=>((e,t)=>Object(u.jsx)(n.a,{allowEdit:!0,idproduto:e.idproduto,produto:e,fullWidth:!1,hover:!1,centerMode:!0,updateProduct:e=>t(e)},e.id+e.preco))(e,o)))},f=Object(r.compose)(Object(a.b)("VitrineProdutoComponent",{}),Object(i.b)((e=>({carrinho:e.carrinho,menu:e.menu}))))((e=>{Object(s.useEffect)((()=>{o(e.produtos)}),[e.produtos]),Object(s.useEffect)((()=>{const t=e.menu.active===h.k;i(t)}),[e.menu]);const[t,o]=Object(s.useState)(e.produtos||[]),[r,i]=Object(s.useState)(!1);let a=g(e.theme,e.slickExtendConfig,t.length,r),n=t.map((e=>e.id+e.preco)).join("_");const d={...a,nextArrow:Object(u.jsx)(c.a,{className:"slick-next",icon:p.get(a,"navStyle","fass fa-angle-double-right"),color:p.get(a,"colors.font","#000"),disabled:r}),prevArrow:Object(u.jsx)(c.a,{className:"slick-prev",inverse:!0,icon:p.get(a,"navStyle","fass fa-angle-double-right"),color:p.get(a,"colors.font","#000"),disabled:r})};return Object(u.jsxs)("div",{style:{marginTop:"1em",marginBottom:"1em"},children:[e.showTitle&&e.title?(f=e.title,Object(u.jsx)("h3",{style:{padding:"1em"},children:f})):"",Object(u.jsx)(l.a,{...d,className:"slider-vitrine-produtos",children:m(t,o)},n)]});var f}))},355:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));o(1);var s=o(268),r=o(269),i=o(6);const a={"fa fa-angle-double-right":r.b,"fa fa-angle-double-left":r.a,"fas fa-chevron-right":r.p,"fas fa-caret-right":r.l,"fas fa-chevron-circle-right":r.o,"fas fa-arrow-circle-right":r.e},n=e=>{const{className:t,onClick:o,icon:n,color:c,inverse:d=!1,disabled:l=!1}=e,p=a[n]||r.b;return Object(i.jsx)("button",{"aria-label":"Bot\xf5es Carrossel",className:t,onClick:o,style:{color:c,fontSize:"2.5em",display:l?"none":""},children:Object(i.jsx)(s.a,{icon:p,className:d?"rotated":""})})}},397:function(e,t,o){},400:function(e,t,o){},486:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=(s=o(1))&&s.__esModule?s:{default:s};function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},s=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),s.forEach((function(t){h(e,t,o[t])}))}return e}function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}function c(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function d(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?p(e):t}function l(e){return l=Object.getPrototypeOf||function(e){return e.__proto__},l(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var u={position:"absolute",left:0,top:0,right:0,bottom:0,overflow:"hidden",zIndex:-1,visibility:"hidden",pointerEvents:"none"},g={position:"absolute",left:0,top:0,transition:"0s"};var m=function(e){function t(){var e,o,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return d(s,(o=s=d(this,(e=l(t)).call.apply(e,[this].concat(i))),h(p(p(s)),"_expandRef",null),h(p(p(s)),"_shrinkRef",null),h(p(p(s)),"_node",null),h(p(p(s)),"_lastWidth",void 0),h(p(p(s)),"_lastHeight",void 0),h(p(p(s)),"_lastRect",void 0),h(p(p(s)),"_hasResize",!1),h(p(p(s)),"_handleScroll",(function(e){(s.props.onPosition||s.props.onReflow||s.props.onResize)&&(s._globalScollTarget(e.target)||s._refScrollTarget(e.target)||s._ancestorScollTarget(e.target))&&s._reflow()})),h(p(p(s)),"_globalScollTarget",(function(e){return e instanceof Node&&(s.props.onPosition||s.props.onReflow)&&(e===document||e===document.documentElement||e===document.body)})),h(p(p(s)),"_refScrollTarget",(function(e){if(e instanceof HTMLElement&&(e===s._expandRef||e===s._shrinkRef)){var t=e.offsetWidth,o=e.offsetHeight;if(t!==s._lastWidth||o!==s._lastHeight)return s._lastWidth=t,s._lastHeight=o,s._reset(s._expandRef),s._reset(s._shrinkRef),!0}return!1})),h(p(p(s)),"_ancestorScollTarget",(function(e){return e instanceof Node&&(s.props.onPosition||s.props.onReflow)&&s._node&&function(e,t){for(var o=e.parentNode;o;){if(o===t)return!0;o=o.parentNode}return!1}(s._node,e)})),h(p(p(s)),"_reflow",(function(){if(s._node&&s._node.parentNode instanceof Element){var e=s._node.parentNode.getBoundingClientRect(),t=!0,o=!0;s._lastRect&&(t=e.width!==s._lastRect.width||e.height!==s._lastRect.height,o=e.top!==s._lastRect.top||e.left!==s._lastRect.left),s._lastRect=e,t&&s.props.onResize&&s.props.onResize(e),o&&s.props.onPosition&&s.props.onPosition(e),(t||o)&&s.props.onReflow&&s.props.onReflow(e)}})),h(p(p(s)),"_handleRef",(function(e){s._node=e})),h(p(p(s)),"_handleExpandRef",(function(e){s._reset(e),s._expandRef=e})),h(p(p(s)),"_handleShrinkRef",(function(e){s._reset(e),s._shrinkRef=e})),o))}var o,s,i;return o=t,(s=[{key:"componentDidMount",value:function(){this._reflow(),window.addEventListener("scroll",this._handleScroll,!0),(this.props.onPosition||this.props.onReflow)&&(window.addEventListener("resize",this._reflow,!0),this._hasResize=!0)}},{key:"componentDidUpdate",value:function(){!this.props.onPosition&&!this.props.onReflow||this._hasResize?this.props.onPosition||this.props.onReflow||!this._hasResize||(window.removeEventListener("resize",this._reflow,!0),this._hasResize=!1):(window.addEventListener("resize",this._reflow,!0),this._hasResize=!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this._handleScroll,!0),this._hasResize&&window.removeEventListener("resize",this._reflow,!0)}},{key:"_reset",value:function(e){e&&(e.scrollLeft=1e5,e.scrollTop=1e5)}},{key:"render",value:function(){return this.props.onResize||this.props.onReflow?r.default.createElement("div",{style:u,ref:this._handleRef},r.default.createElement("div",{ref:this._handleExpandRef,style:u},r.default.createElement("div",{style:a({},g,{width:1e5,height:1e5})})),r.default.createElement("div",{ref:this._handleShrinkRef,style:u},r.default.createElement("div",{style:a({},g,{width:"200%",height:"200%"})}))):r.default.createElement("noscript",{ref:this._handleRef})}}])&&c(o.prototype,s),i&&c(o,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n(e.prototype,t&&t.prototype),t&&n(e,t)}(t,e),t}(r.default.Component);h(m,"displayName","ResizeObserver");var f=m;t.default=f},741:function(e,t,o){},742:function(e,t,o){},743:function(e,t,o){},744:function(e,t,o){},745:function(e,t,o){},746:function(e,t,o){},810:function(e,t,o){"use strict";o.r(t),o.d(t,"ListaProdutosVendaComponent",(function(){return Ce})),o.d(t,"ListaProdutosVenda",(function(){return we}));var s=o(1),r=o.n(s),i=o(408),a=o(7),n=o(531),c=o(28),d=o(440),l=o(441),p=o(265),h=o(276),u=o(491);function g(e){var t=e.children,o=e.className,s=e.content,n=e.icon,u=Object(c.a)("divider",o),m=Object(d.a)(g,e),f=Object(l.a)(g,e);return Object(h.a)(n)?Object(h.a)(s)?r.a.createElement(f,Object(a.a)({},m,{className:u}),p.a.isNil(t)?"/":t):r.a.createElement(f,Object(a.a)({},m,{className:u}),s):i.a.create(n,{defaultProps:Object(a.a)({},m,{className:u}),autoGenerateKey:!1})}g.handledProps=["as","children","className","content","icon"],g.propTypes={},g.create=Object(u.f)(g,(function(e){return{icon:e}}));var m=g,f=o(14),b=o(270),j=o(293),v=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))||this).computeElementType=function(){var e=t.props,o=e.link,s=e.onClick;if(o||s)return"a"},t.handleClick=function(e){return Object(b.a)(t.props,"onClick",e,t.props)},t}return Object(f.a)(t,e),t.prototype.render=function(){var e=this.props,o=e.active,s=e.children,i=e.className,n=e.content,h=e.href,u=Object(c.a)(Object(j.a)(o,"active"),"section",i),g=Object(d.a)(t,this.props),m=Object(l.a)(t,this.props,this.computeElementType);return r.a.createElement(m,Object(a.a)({},g,{className:u,href:h,onClick:this.handleClick}),p.a.isNil(s)?n:s)},t}(s.Component);function x(e){var t=e.children,o=e.className,s=e.divider,i=e.icon,h=e.sections,u=e.size,g=Object(c.a)("ui",u,"breadcrumb",o),f=Object(d.a)(x,e),b=Object(l.a)(x,e);if(!p.a.isNil(t))return r.a.createElement(b,Object(a.a)({},f,{className:g}),t);var j=[];return Object(n.a)(h,(function(e,t){var o=v.create(e);if(j.push(o),t!==h.length-1){var r=o.key+"_divider"||!1;j.push(m.create({content:s,icon:i,key:r}))}})),r.a.createElement(b,Object(a.a)({},f,{className:g}),j)}v.handledProps=["active","as","children","className","content","href","link","onClick"],v.propTypes={},v.create=Object(u.f)(v,(function(e){return{content:e,link:!0}})),x.handledProps=["as","children","className","divider","icon","sections","size"],x.propTypes={},x.Divider=m,x.Section=v;var O=x,y=o(815),C=o(806),w=o(820),S=o(329),P=o(21),T=o(38),_=o(267),N=o(56),k=o(34),A=o(2),L=(o(327),o(328),o(330)),E=o.n(L),R=o(821),F=(o(397),o(355)),q=o(10),D=(o(741),o(6));class z extends r.a.Component{constructor(e){super(e),this.state={modalOpen:!1,modalLink:""}}renderSlide(e,t){const{carrossel:o,fornecedorActive:s,history:r}=this.props,i=!!o.length&&o.carrosselForPage[0].idcarrossel===t.idcarrossel,a=!1===(s.tag.includes("use-new-style-page")||!1);return Object(D.jsx)("div",{className:"nothing"!==e.action.type?"withPointer":"",children:Object(D.jsx)("img",{alt:"Imagem do Carrossel",width:"100%",src:e.image,style:{height:"100%",marginTop:i&&a?"6px":""},onClick:()=>this.handleSlideClick(e.action,t,r,s)},e.id)},e.id)}actionLink(e){let[t,o]=e,s=/(http)(s)?/.test(o)?o:"https://".concat(o);"external"===t?window.open(s,Math.random()+""):this.setState({modalOpen:!0,modalLink:s})}actionPaginaEstatica(e,t,o){const{slug:s,idfornecedor:r}=o,i=e[0];i&&t.push("/".concat(s||r,"/p/").concat(i))}actionPaginaNavegacao(e){let[t]=e;if("page-supplier-selection"===t)this.props.activeMenuFornecedores()}actionProduto(e){let[t,o]=e;const{idfornecedor:s,slug:r}=this.props.fornecedorActive,i=o||t;this.props.history.push("/".concat(r||s,"/produto/").concat(i))}actionCombo(e){let[t,o,s]=e;const{idfornecedor:r,slug:i}=this.props.fornecedorActive;s?this.props.history.push("/".concat(i||r,"/combo-promocional/").concat(t)):this.props.history.push("/".concat(i||r,"/combo-promocional/"))}handleSlideClick(e,t,o,s){switch(e.type){case"link":this.actionLink(e.params);break;case"filter":this.props.cancelRequest(!0),this.handleCategorySelection(e,t);break;case"product":this.actionProduto(e.params);break;case"combination":this.actionCombo(e.params);break;case"static-page":this.actionPaginaEstatica(e.params,o,s);break;case"page-selection":this.actionPaginaNavegacao(e.params)}}handleCategorySelection(e,t){if(!this.props.fornecedorActive||!this.props.fornecedorActive.idfornecedor)return;let{idfornecedor:o,slugFornecedor:s,slug:r}=this.props.fornecedorActive;const i="".concat(r||s||o);if("categoria"===e.params[0]&&e.params[1]){let o=e.params[1].split(":");if(o&&o[1])if("home"==o[1])this.props.history.push("/".concat(i));else{let s=(t.categorias||[]).find((e=>e.idsetor===o[1]));if(s){let{idsetor:t,slug:o}=s;this.props.history.push("/".concat(i,"/categoria/").concat(o||t)),this.props.getCarrosselForPage(this.props.fornecedorActive.idfornecedor,e.params[1])}}}}renderSlides(e,t){return e?e.map((e=>this.renderSlide(e,t))):"carrossel sem imagem"}renderModal(){return Object(D.jsx)(R.a,{dimmer:"blurring",style:{marginTop:"0px",margin:"15vh auto"},open:this.state.modalOpen,onClose:()=>this.setState({modalOpen:!1}),size:"fullscreen",children:Object(D.jsx)(R.a.Content,{children:Object(D.jsx)("iframe",{src:this.state.modalLink,style:{width:"100%",height:"50vh"},frameBorder:0})})})}renderTitle(e){return Object(D.jsx)("h3",{style:{padding:"1em"},children:e})}getCarrosselCores(e){const{colors:{font:t="",background:o=""}={}}=e,s={font:t,background:o};return t||(s.font="#ffffff"===String(this.props.theme.primaryColor).toLowerCase()?this.props.theme.textColor:this.props.theme.primaryColor),s}render(){let{config:e,titulo:t}=this.props.definition;const{showDots:o=!1}=e;if(e.loginRequired&&!this.props.usuario.idcliente)return"";let s=e.slidesToShowResponsive.desktop;s>this.props.definition.slides.length&&(s=this.props.definition.slides.length);let r=e.slidesToShowResponsive.mobile;r>this.props.definition.slides.length&&(r=this.props.definition.slides.length);let i=this.getCarrosselCores(e);var a={...e,slidesToShow:Number(s),autoplaySpeed:Number(e.autoplaySpeed),centerPadding:"60px",centerPadding:"60px",infinite:!0,adaptiveHeight:!1,dots:o,nextArrow:Object(D.jsx)(F.a,{className:"slick-next",icon:e.navStyle,color:i.font}),prevArrow:Object(D.jsx)(F.a,{className:"slick-prev",icon:e.navStyle,inverse:!0,color:i.font}),responsive:[{breakpoint:1024,settings:{dots:o,arrows:!1,centerPadding:"40px",slidesToShow:Number(s)||3}},{breakpoint:768,settings:{dots:o,arrows:!1,centerPadding:"40px",slidesToShow:Number(r)||1}}]};let n="";e&&e.showTitle&&(n=t);const c=e&&!0===(null===e||void 0===e?void 0:e.bannerPrincipal)?"banner-principal-class":"banner-nao-principal-class";return Object(D.jsxs)("div",{className:this.props.definition.device.join(" ")+" slider"+" slide-index-".concat(this.props.index," ").concat(c),children:[n?this.renderTitle(n):"",Object(D.jsx)(E.a,{...a,children:this.renderSlides(this.props.definition.slides,this.props.definition)}),this.renderModal()]})}}const I=Object(P.compose)(Object(_.b)(),q.g,Object(T.b)((e=>({fornecedorActive:e.fornecedor.fornecedorActive,segmentoActive:e.fornecedor.segmentoActive,usuario:e.usuario,carrossel:e.carrossel})),(e=>Object(P.bindActionCreators)({getCarrosselForPage:k.getCarrosselForPage,activeMenuFornecedores:k.activeMenuFornecedores,cancelRequest:k.cancelRequest},e))))(z);var M=o(354),H=o(295),B=o(827),W=o(826),U=o(825);o(742);class Q extends s.Component{constructor(){super(...arguments),this.renderCardFull=()=>Object(D.jsx)(B.a,{className:"loadingCardProduto cardFull",children:Object(D.jsx)(W.a,{stackable:!0,children:Object(D.jsxs)(W.a.Row,{className:"flex-center-mobile",style:{paddingTop:"27px"},children:[Object(D.jsx)(W.a.Column,{width:5,style:{maxWidth:"350px"},children:Object(D.jsx)("div",{style:{maxWidth:"350px",marginLeft:"1em",marginBottom:"10px"},children:Object(D.jsx)("div",{className:"imagem-produto loading"})})}),Object(D.jsxs)(W.a.Column,{width:10,className:"flex-center-mobile",children:[Object(D.jsx)(B.a,{basic:!0,compact:!0,vertical:!0,className:"flex-center-mobile",style:{width:"100%"},children:Object(D.jsx)(U.a,{as:"div",className:"flex-center-mobile",children:Object(D.jsx)("div",{className:"titulo-produto loading"})})}),Object(D.jsx)(B.a,{basic:!0,compact:!0,vertical:!0,className:"flex-center-mobile",style:{width:"100%"},children:Object(D.jsxs)("div",{style:{maxWidth:"800px"},className:"flex-center-mobile",children:[Object(D.jsx)("div",{className:"descricao-produto loading",style:{width:"40%"}}),Object(D.jsx)("div",{className:"descricao-produto loading",style:{width:"35%"}}),Object(D.jsx)("div",{className:"descricao-produto loading",style:{width:"35%"}}),Object(D.jsx)("div",{className:"descricao-produto loading",style:{width:"30%"}})]})}),Object(D.jsx)(B.a,{basic:!0,compact:!0,vertical:!0,className:"flex-center-mobile",style:{width:"100%"},children:Object(D.jsx)("div",{className:"botao-produto loading"})})]})]})})}),this.renderCard=()=>Object(D.jsxs)(y.a,{className:"loadingCardProduto",style:{textAlign:"center",marginLeft:"auto",marginRight:"auto"},children:[Object(D.jsxs)(y.a.Header,{className:"flex-center-column",style:{padding:"14px",paddingTop:"15px"},children:[Object(D.jsx)("div",{className:"titulo-produto loading",style:{width:"80%"}}),Object(D.jsx)("div",{className:"titulo-produto loading",style:{width:"40%"}})]}),Object(D.jsx)(y.a.Header,{style:{padding:"14px",marginBottom:"10px"},children:Object(D.jsx)("div",{className:"imagem-produto loading"})}),Object(D.jsx)(y.a.Content,{className:"flex-center",style:{borderTop:"0px",marginTop:"-10px",padding:"1em"},children:Object(D.jsx)("div",{className:"preco-produto loading"})}),Object(D.jsx)(y.a.Content,{extra:!0,style:{textAlign:"center",padding:".75em 6px"},children:Object(D.jsx)("div",{className:"botao-produto loading"})})]})}render(){return this.props.fullWidth?this.renderCardFull():this.renderCard()}}var V=o(63),G=o(12),K=o(325),J=o(833),Y=o(789),X=(o(743),o(268)),Z=o(269);class $ extends s.Component{constructor(e){var t;super(e),t=this,this.clearFilter=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){let o=e.tags_pesquisa.map((e=>e.idtagpesquisa)),s=t.state.tagsSelected.filter((e=>!o.includes(e)));t.setState({tagsSelected:s})}else t.setState({tagsSelected:[]}),t.props.changeFilter([])},this.changeTagMultipla=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){let o=(t.state.tagsSelected||[]).filter((t=>t!==e));t.setState({...t.state,tagsSelected:o})}else{const o=t.props.agrupadores.reduce(((t,o)=>(!o.multipla_selecao&&A.find(o.tags_pesquisa,{idtagpesquisa:e})&&o.tags_pesquisa.map((e=>t.push(e.idtagpesquisa))),t)),[]),s=(t.state.tagsSelected||[]).filter((e=>!o.includes(e)));t.setState({...t.state,tagsSelected:[...s,e]})}},this.changeTagUnica=(e,t)=>{const o=(e||[]).map((e=>e.idtagpesquisa));let s=(this.state.tagsSelected||[]).filter((e=>!o.includes(e)));this.setState({...this.state,tagsSelected:[...s,t]})},this.changeFilter=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){let o=t.state.filtersOpen.filter((t=>t!==e));t.setState({...t.state,filtersOpen:o})}else t.setState({...t.state,filtersOpen:[...t.state.filtersOpen,e]})},this.renderTags=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=t.state.tagsSelected||[];if(s)return e.map((e=>{const s=r.includes(e.idtagpesquisa);return Object(D.jsx)(J.a,{checked:s,onChange:()=>t.changeTagMultipla(e.idtagpesquisa,s),label:e.valor},o+"-"+e.idtagpesquisa+"-"+Math.floor(1e3*Math.random()))}));{const s=e.reduce(((e,t)=>(r.includes(t.idtagpesquisa)&&(e=t.idtagpesquisa),e)),"");return e.map((r=>Object(D.jsx)(Y.a,{label:r.valor,checked:s===r.idtagpesquisa,onChange:()=>t.changeTagUnica(e,r.idtagpesquisa)},o+"-"+r.idtagpesquisa+"-"+Math.floor(1e3*Math.random()))))}},this.aplicaFiltro=()=>{this.props.changeFilter(this.state.tagsSelected||[])},this.renderFilters=()=>(this.props.agrupadores||[]).map((e=>{let t=(this.state.filtersOpen||[]).includes(e.idagrupadortagpesquisa);return Object(D.jsxs)("div",{className:t?"filter":"filter close",children:[Object(D.jsxs)("div",{className:"filter-header",onClick:()=>this.changeFilter(e.idagrupadortagpesquisa,t),children:[Object(D.jsx)("span",{className:"filter-title",children:e.descricao}),Object(D.jsxs)("span",{className:"filter-title-icon",children:[Object(D.jsx)(X.a,{icon:Z.y}),Object(D.jsx)(X.a,{icon:Z.y})]})]}),Object(D.jsxs)("div",{className:"filter-content",children:[Object(D.jsx)("div",{className:"filter-clear",style:{color:"rgb(119, 119, 119)"},onClick:()=>this.clearFilter(e),children:"Limpar"}),Object(D.jsx)("div",{className:"filter-tag",children:this.renderTags(e.tags_pesquisa,e.idagrupadortagpesquisa,e.multipla_selecao)})]})]},e.idagrupadortagpesquisa)})),this.state={filtersOpen:[],tagsSelected:[],initialSelect:[]}}componentDidMount(){this.setState({...this.state,tagsSelected:this.props.selected||[],initialSelect:this.props.selected||[]})}componentDidUpdate(){this.props.selected!==this.state.initialSelect&&this.props.selected!==this.state.tagsSelected&&this.setState({...this.state,tagsSelected:this.props.selected||[],initialSelect:this.props.selected||[]})}render(){let{theme:e,filtersIsOpen:t}=this.props;const o={backgroundColor:e.auxiliarColor,color:e.textAuxiliarColor||"#fff",cursor:"pointer"};return this.props.agrupadores&&0!=this.props.agrupadores.length?Object(D.jsxs)("div",{className:t?"container-filters open":"container-filters",children:[this.renderFilters(),Object(D.jsxs)("div",{className:"footer-options-filter",children:[Object(D.jsx)("button",{className:"clear-all",style:{color:"#9a9a9a",borderColor:"#9a9a9a",cursor:"pointer"},onClick:()=>this.clearFilter(),children:"LIMPAR"}),Object(D.jsx)("button",{className:"apply-all",style:o,onClick:()=>this.aplicaFiltro(),children:"APLICAR"})]})]}):Object(D.jsx)("div",{})}}var ee=Object(P.compose)(Object(_.b)(),Object(T.b)((e=>({agrupadores:e.commerceSearch.agrupadoresFiltros})),(e=>Object(P.bindActionCreators)({changeTagFiltro:k.changeTagFiltro,loadTagFiltros:k.loadTagFiltros,clearTagFiltro:k.clearTagFiltro},e))))($),te=o(486),oe=o.n(te),se=(o(744),o(787)),re=o(277),ie=o(273),ae=o.n(ie),ne=(o(745),o(310));class ce extends s.Component{render(){let e=this.props.produto,t=this.props.exibePrecoItens,o=e.preco,s=e.preco_original,r={unidade:t?2:4,preco:t?2:0},i={unidade:t?"center":"right",preco:t?"right":""};const a=A.get(e,"meta_info.quantidadeDecimais");return Object(D.jsxs)(W.a.Row,{style:{cursor:"pointer"},onClick:()=>this.props.onNavigationDetails(e.id?e.id:e.idcadastroextraproduto),children:[Object(D.jsx)(W.a.Column,{computer:1,tablet:3,children:Object(D.jsx)(ne.a,{unspaced:!0,size:"small",productId:e.id})}),Object(D.jsxs)(W.a.Column,{computer:11,tablet:9,children:[Object(D.jsx)("div",{children:Object(D.jsx)(U.a,{as:"h4",children:Object(D.jsx)(ae.a,{escapeHtml:!1,source:e.nome})})}),Object(D.jsx)("div",{className:"descricao-longa-item-conjunto",children:Object(D.jsx)(ae.a,{escapeHtml:!0,skipHtml:!0,source:e.descricaolonga})})]}),Object(D.jsxs)(W.a.Column,{width:r.unidade,textAlign:i.unidade,className:"config-item",style:{display:"flex",flexBasis:"",flexDirection:"column"},children:[Object(D.jsx)("div",{style:{flex:1}}),Object(D.jsxs)("div",{style:{flex:1},children:[e.quantidade_itens," ",e.labelunidade]}),Object(D.jsx)("div",{style:{flex:1}})]}),t&&o?Object(D.jsx)(W.a.Column,{width:r.preco,textAlign:i.preco,verticalAlign:"middle",style:{display:"flex"},children:de(o,s,a)}):null]})}}const de=(e,t,o)=>e===t?Object(D.jsx)("div",{className:"itens-preco",children:le(e,"atual",o)}):Object(D.jsxs)("div",{className:"itens-preco",children:[le(t,"original",o),le(e,"atual",o)]}),le=(e,t,o)=>{if(!e)return;const s="config-item preco ".concat(t);return Object(D.jsx)("div",{className:s,children:Object(re.a)(!0,e,o)})};var pe=ce,he=o(3),ue=o(5);o(746);const ge={marginLeft:"auto",marginRight:"auto",maxWidth:"1440px"},me={position:"fixed",width:"100%",zIndex:10,maxHeight:"30vh",overflow:"hidden"};class fe extends s.Component{constructor(e){super(e),this.requestDetalhesProduto=()=>{let{fornecedorActive:e,usuario:t,fornecedor:o}=this.props,s="";e&&e.tag.indexOf("support-price-variance-by-payment")>=0&&(s=t.formaPagamentoActive.idformapagto);const r=A.get(o,"tipoEntrega");this.requestProduto(this.props.match.params.idproduto,s,!0,r)},this.requestProduto=(e,t,o,s)=>{let{fornecedorActive:{idfornecedor:r,slug:i},usuario:a,history:n,fornecedorActive:c}=this.props,d="".concat(a.token).concat(he.k).concat(a.idcliente);ue.b.getDetalhesProduto(d,r,e,t,o,s).then((i=>{if(o){this.setState({...this.state,idproduto:e,produto:i.data,similares:null,imagens:[],imagemDestaque:null,tags:[],tipoEntrega:s});const o=!!c.tag&&c.tag.includes("enable-google-analytics-ga4-version-tag-events");window.dataLayer&&o&&(window.dataLayer.push({ecommerce:null}),window.dataLayer.push({event:"view_item",userId:a.idcliente,ecommerce:{currency:"BRL",value:i.data.preco,items:{...i.data}}})),setTimeout((()=>this.requestProduto(e,t,!1)),1e3),setTimeout((()=>this.getCarrossel(A.get(i.data,"idcadastroextraproduto"))),1e3),this.props.setPageSubHeader({subtitle:A.get(this.state,"produto.nome",null),subdecription:A.get(this.state,"produto.metatags_seo.description",null),subkey:A.get(this.state,"produto.metatags_seo.keywords",null)}),this.getImagensProduto(r,this.state.produto.idcadastroextraproduto),window.dataLayer&&!o&&(window.dataLayer.push({ecommerce:null}),window.dataLayer.push({event:"productClick",ecommerce:{currency:"BRL",click:{products:[{id:this.state.produto.id,name:this.state.produto.nome,price:this.state.produto.preco}]}}}),window.dataLayer.push({ecommerce:null}),window.dataLayer.push({event:"gtm.dom",ecommerce:{currency:"BRL",detail:{products:[{id:this.state.produto.id,name:this.state.produto.nome,price:this.state.produto.preco}]}}}))}else this.setState({...this.state,similares:i.data.similares||[]})})).catch((()=>{G.b.error("Produto n\xe3o encontrado"),n.push("/".concat(i||r))}))},this.getImagensProduto=(e,t)=>{ue.b.fetchImagensProduto(e,t).then((e=>{this.setState({...this.state,imagens:e.data.imagens,imagemDestaque:A.get(e,"data.imagens.0")}),this.props.setPageSubHeader({subtitle:A.get(this.state,"produto.nome",null),subimage:A.get(e,"data.imagens.0.smallSize")||A.get(e,"data.imagens.0.mediumSize")||A.get(e,"data.imagens.0.largeSize"),subdecription:A.get(this.state,"produto.metatags_seo.description",null),subkey:A.get(this.state,"produto.metatags_seo.keywords",null)})})).catch((()=>{this.setState({...this.state,imagens:[],imagemDestaque:null})}))},this.getCarrossel=e=>{const{usuario:{token:t,idcliente:o,formaPagamentoActive:s},fornecedorActive:{idfornecedor:r},tipoEntrega:i=""}=this.props,a=s?s.idformapagto:null;ue.b.getCarrosselForPage({idfornecedor:r,page:"page:product-details",token:t,idcliente:o,idformapagamento:a,tipoentrega:i,idcadastroextraproduto:e}).then((e=>{this.setState({...this.state,carrossel:e.data||[]})})).catch((e=>{console.error(e),this.setState({...this.state,carrossel:[]})}))},this.goToHome=()=>{let{fornecedorActive:{idfornecedor:e,slug:t},history:o}=this.props;o.length>2?o.goBack():o.push("/".concat(t||e))},this.navigateToDetails=e=>{let t=this.props.match.params.idfornecedor;e&&this.props.history.push("/".concat(t,"/produto/").concat(e));let o=this.props.produto?this.props.produto.id:null;o&&this.props.history.push("/".concat(t,"/produto/").concat(o))},this.alterarImagemDestaque=e=>{this.setState({...this.state,imagemDestaque:e})},this.updateProduct=e=>this.setState({...this.state,produto:e}),this.renderProdutosLoading=()=>{let e=[];for(let t=0;t<5;t++)e.push(Object(D.jsx)(Q,{},"loader-prod-"+t));return e},this.state={idproduto:"",idformapagamento:"",tipoEntrega:"",keyUsuario:"",imagens:[],imagemDestaque:null,produto:null,similares:null,imageLoading:!1,tags:[],carrossel:[],carrosselSize:{width:"0",height:"0"}}}componentDidMount(){window.document.querySelector(".top-content-grid-commerce").scrollTop=0,this.setState({idproduto:"",idformapagamento:"",tipoEntrega:"",keyUsuario:"",imagens:[],imagemDestaque:null,produto:null,similares:null,imageLoading:!1,tags:[],carrossel:[]})}componentDidUpdate(){const e=A.get(this.props,"usuario.formaPagamentoActive.idformapagto"),t=A.get(this.props,"fornecedor.tipoEntrega");this.state.idproduto===this.props.match.params.idproduto&&this.state.idformapagamento===e&&this.state.tipoEntrega===t||(this.setState({...this.state,idproduto:this.props.match.params.idproduto,produto:null,similares:null,imagens:[],imagemDestaque:null,idformapagamento:e,tipoEntrega:t}),window.document.querySelector(".top-content-grid-commerce").scrollTop=0,this.requestDetalhesProduto())}componentWillUnmount(){this.props.setPageSubHeader({})}hadCarroselTop(){return(this.state.carrossel||[]).filter((e=>A.get(e,"config.fixedTop",!1))).length}renderCarrossel(e){return(this.state.carrossel||[]).filter((t=>"top"===e&&(A.get(t,"config.fixedTop",!1)||A.get(t,"localexibicao").includes("page:all"))||"top"!==e&&!A.get(t,"config.fixedTop",!1)&&!A.get(t,"localexibicao").includes("page:all"))).sort(((e,t)=>{const o=A.get(e,"config.fixedTop",!1),s=A.get(t,"config.fixedTop",!1);return o&&!s?-1:!o&&s?1:0})).map(((e,t)=>{const o=A.get(e,"config.fixedTop",!1);return"PRODUCT_CATEGORY"===e.tipo_conteudo?Object(D.jsx)("div",{style:o?me:{},children:Object(D.jsx)(M.a,{produtos:e.produtos,showTitle:e.config.showTitle,title:e.titulo,slickExtendConfig:e.config},e.idcarrossel)},e.idcarrossel):Object(D.jsx)(K.LazyLoadComponent,{delayTime:2e3,children:o?Object(D.jsxs)("div",{style:me,children:[Object(D.jsx)(oe.a,{onResize:e=>{this.setState({...this.state,carrosselSize:{height:e.height,width:e.width}})}}),Object(D.jsx)(I,{index:t,definition:e},e.idcarrossel)]}):Object(D.jsx)("div",{style:{marginTop:"".concat(1==t?"".concat(this.state.carrosselSize.height,"px"):"")},children:Object(D.jsx)(I,{index:t,definition:e},e.idcarrossel)})},"lazycarrosel-"+e.idcarrossel)}))}render(){var e,t;const{fornecedorActive:o,t:s}=this.props,{imagens:r,imagemDestaque:i,produto:a,similares:n}=this.state,c=o.tag.includes("use-new-style-page"),d=a?a.idproduto:this.props.match.params.idproduto;return Object(D.jsxs)(D.Fragment,{children:[this.renderCarrossel("top"),Object(D.jsxs)(se.a,{fluid:!0,style:{background:"#f6f6fa",paddingBottom:"2em"},className:"detalhe-produto-top-container",children:[Object(D.jsx)(B.a,{basic:!0,style:{...ge,zIndex:10,paddingTop:this.hadCarroselTop()?"10vh":""},children:Object(D.jsx)("a",{className:"go-back",style:{cursor:"pointer"},onClick:()=>this.goToHome(),children:Object(D.jsxs)("div",{className:"container-go-back",children:[Object(D.jsx)(X.a,{style:{fontSize:"2em"},icon:Z.n})," ",Object(D.jsx)("span",{className:"btn-voltar-detalhe-pedido",children:s("pedidos.btn.voltar2")})]})})}),Object(D.jsxs)(B.a,{basic:!0,style:ge,className:"cardProduto",children:[!a&&Object(D.jsx)(Q,{fullWidth:!0}),a&&Object(D.jsxs)(B.a,{children:[Object(D.jsx)(S.a,{idproduto:a.idproduto,imgSrc:i,produto:a,fullWidth:!0,allowEdit:!0,imagensProduto:r,alterarImagem:e=>this.alterarImagemDestaque(e),updateProduct:e=>this.updateProduct(e)},a.id+a.preco+a.quantidade),Object(D.jsx)(be,{produto:a,navigateToDetails:this.navigateToDetails})]})]}),(null===this||void 0===this||null===(e=this.state)||void 0===e||null===(t=e.carrossel)||void 0===t?void 0:t.length)>0&&Object(D.jsx)(B.a,{basic:!0,style:c?{marginBottom:"1rem",...ge}:{marginBottom:"15vh",...ge},children:this.renderCarrossel()}),Object(D.jsx)(B.a,{basic:!0,style:ge,children:Object(D.jsx)(U.a,{as:"h3",children:s("produto.detalhes.itens.relacionados")})}),Object(D.jsxs)(B.a,{basic:!0,style:c?{marginBottom:"1rem",...ge}:{marginBottom:"15vh",...ge},children:[null!==n&&Object(D.jsx)(M.a,{produtos:n}),null==n&&Object(D.jsx)(y.a.Group,{style:{justifyContent:"center"},children:this.renderProdutosLoading()})]})]},d)]})}}const be=e=>{let{produto:t,navigateToDetails:o}=e;const s=A.get(t,"subitens",[]);return s.length?Object(D.jsxs)(B.a,{style:{border:"unset",boxShadow:"unset"},children:[Object(D.jsx)(U.a,{as:"h3",children:"Itens"}),Object(D.jsx)(W.a,{divided:!1,stackable:!0,columns:16,className:"item-conjunto-detalhes-itens",children:Object(D.jsx)(je,{exibePrecoItens:!t.esconder_preco_sub_itens,itens:s,navigateToDetails:o})})]}):null},je=e=>{let{itens:t,navigateToDetails:o,exibePrecoItens:s}=e;return(t||[]).map(((e,t)=>Object(D.jsx)(pe,{exibePrecoItens:s,produto:e,onNavigationDetails:o},e.id+t)))};var ve=Object(P.compose)(Object(_.b)(),Object(N.b)(),q.g,Object(T.b)((e=>({carrinho:e.carrinho,usuario:e.usuario,fornecedorActive:e.fornecedor.fornecedorActive,fornecedor:e.fornecedor,formaPagamentoActive:e.usuario.formaPagamentoActive,tipoEntrega:e.fornecedor.tipoEntrega})),(e=>Object(P.bindActionCreators)({setPageSubHeader:k.setPageSubHeader},e))))(fe),xe=o(57),Oe=o(39),ye=o(0);class Ce extends s.Component{constructor(e){var t;super(e),t=this,this.fetchProdutosDebounce=A.debounce((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t.fetchProdutos(e)}),500),this.getSearchText=()=>new URLSearchParams(A.get(this.props.history,"location.search","")).get("query")||"",this.setCategoria=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e)return null!==t.state.categoria&&t.setState({...t.state,categoria:null,idCategoria:null}),void t.props.setPageSubHeader({});let{slug:o,idfornecedor:s}=t.props.fornecedorActive;Object(V.b)(s,e).then((o=>{t.setState({...t.state,categoria:o.data,idCategoria:e}),t.props.setPageSubHeader({subtitle:"categoria: ".concat(o.data.titulo),titulo:o.data.titulo}),t.fetchCarrossel(o.data.id),t.props.loadTagFiltros(s,A.get(o,"data.id",""),A.get(t.props,"usuario.idcliente",""),t.props.searchText||""),window.dataLayer&&(window.dataLayer.push({ecommerce:null}),window.dataLayer.push({event:"page_view",pageTitle:"Categoria: "+o.data.titulo,userId:A.get(t.props,"usuario.idcliente",""),visitorType:"high-value",slug:e}))})).catch((()=>{t.props.history.push("/".concat(o||s,"/")),G.b.error("Categoria n\xe3o encontrada")}))},this.scrollTop=()=>{const e=window.document.getElementById("commerce-content");e&&(e.scrollTop=0)},this.scrollToCard=e=>{const t=window.document.getElementById("commerce-content"),o=window.document.getElementById(e);t&&o&&setTimeout((()=>{t.scrollTo({top:o.offsetTop,left:0})}),500)},this.updateProduct=e=>{const t=this.state.produtos.map((t=>t.id===e.id?e:t));this.setState({...this.state,produtos:t})},this.renderProdutosLoading=()=>{let e=[];for(let t=0;t<12;t++)e.push(Object(D.jsx)(Q,{},"loader-prod-"+t));return e},this.getHeightImageNavLogo=()=>{const e=document.querySelector(".nav-logo"),t=document.querySelector(".nav-logo img");e&&t&&(t.height>122?this.setState({...this.state,setLogoMobile:!0}):this.setState({...this.state,setLogoMobile:!1}))},this.changeFilters=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.setState({...t.state,filtros:e,isLoading:!0}),t.fetchProdutosDebounce(!0),t.fetchCarrossel()},this.renderLista=()=>{const{theme:e}=this.props,o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!!(e&&e.length>0)&&Object(Oe.o)(t.props.fornecedorActive,e)};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{className:"breadcrumb-container",style:{display:"none",top:"-4em",backgroundColor:e.auxiliarColor,color:e.textAuxiliarColor||"#fff"},children:[this.hasBreadcrumb()?Object(D.jsx)(i.a,{name:"home",style:{marginLeft:"20px",marginRight:"15px",fontSize:"16px"},className:"clickable",size:"big",onClick:e=>this.handleNavigationClean(e)}):"",this.renderBreadcrumb(),Object(D.jsx)(i.a,{name:"close",style:{marginLeft:"8px",verticalAlign:"sub",cursor:"pointer"},onClick:e=>this.handleNavigationClean(e)})]},"1"),this.canRenderCarrosel()?this.renderFixedCarrossel():"",Object(D.jsxs)("div",{className:"stage",style:{minHeight:"100vh"},children:[this.hasBreadcrumb()?Object(D.jsx)("div",{className:"breadbrumb-spacer enabled"}):Object(D.jsx)("div",{className:"breadbrumb-spacer"}),Object(D.jsx)("div",{style:this.getListaProdutosStyle(),children:Object(D.jsxs)("div",{style:{minHeight:"75vh"},children:[this.canRenderCarrosel()&&this.renderCarrossel(o([ye.Vc.PORTFOLIO_WEB,ye.Vc.ORCAMENTO_WEB,ye.Vc.WEB_COMMERCE])),o([ye.Vc.PORTFOLIO_WEB,ye.Vc.ORCAMENTO_WEB,ye.Vc.WEB_COMMERCE])&&this.renderListaProdutos()]})})]},"3")]})};let{idcliente:o,token:s}=this.props.usuario,r="".concat(o).concat(s);this.fetchProdutos=this.fetchProdutos.bind(this),this.renderProdutos=this.renderProdutos.bind(this),this.renderProduto=this.renderProduto.bind(this),this.state={lastFormaPagto:e.usuario.formaPagamentoActive.idformapagto,lastKeyUsuario:r,idCategoria:null,categoria:null,listaFiltroOpen:!1,lastTagsFiltros:e.tagsSelecinadas,carrosselSize:{width:"0",height:"0"},isLoading:!0,filtros:[],idproduto:"",showCarrousel:!1,carrosselState:[],searchText:this.getSearchText(),tagFornecedor:e.fornecedorActive.tag,isLoadingFilter:!1,lastTipoEntrega:e.fornecedor.tipoEntrega,setLogoMobile:!1,produtos:this.props.produtosExibicao?this.props.produtosExibicao:[]}}componentDidMount(){this.props.cancelRequest(!1),this.fetchProdutos(!0);const{match:{params:e}}=this.props;this.fetchCarrossel(e.idcategoria||null),this.selectDefaultOrder(),this.props.loadTagFiltros(this.props.fornecedorActive.idfornecedor,e.idcategoria||"",A.get(this.props,"usuario.idcliente",""),this.getSearchText()||"");document.querySelector(".nav-logo img").addEventListener("load",this.getHeightImageNavLogo),window.addEventListener("resize",this.getHeightImageNavLogo)}componentDidUpdate(e){const{usuario:{idcliente:t,token:o,formaPagamentoActive:s},match:{params:r},fornecedor:{tipoEntrega:i}}=this.props,{searchText:a,lastFormaPagto:n,lastKeyUsuario:c,lastTipoEntrega:d}=this.state,l="".concat(t).concat(o),p=r.idcategoria||null,h=this.getSearchText();(h!==a&&!r.idproduto||s&&s.idformapagto!==n||i&&i!==d||l!==c||p!==this.state.idCategoria&&!r.idproduto)&&(this.setState({...this.state,searchText:h,lastFormaPagto:s.idformapagto,lastKeyUsuario:l,idCategoria:p||null,isLoading:!0,filtros:[],idproduto:"",lastTipoEntrega:i}),(h!==a||p!==this.state.idCategoria&&!r.idproduto)&&this.props.clearTagFiltro(),h&&h!==a&&this.props.loadTagFiltros(this.props.fornecedorActive.idfornecedor,p||"",A.get(this.props,"usuario.idcliente",""),h||""),this.fetchProdutosDebounce(!0),this.fetchCarrossel(p||null));const u=r.idproduto||"";if(this.state.idproduto!==u&&(this.state.idproduto&&!u&&this.scrollToCard(this.state.idproduto),this.setState({...this.state,idproduto:u||""})),e.produtosExibicao&&this.props.produtosExibicao){!A.isEqual(e.produtosExibicao,this.props.produtosExibicao)&&this.setState({...this.state,produtos:this.props.produtosExibicao})}}componentWillUnmount(){this.props.setPageSubHeader({});document.querySelector(".nav-logo img").removeEventListener("load",this.getHeightImageNavLogo),window.removeEventListener("resize",this.getHeightImageNavLogo)}fetchProdutos(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{idendereco:t,usuario:{formaPagamentoActive:o,idcliente:s},match:{params:{idcategoria:r=null}},searchText:i,fornecedorActive:a,carrossel:n}=this.props;this.props.fetchProductList(this.props.usuario,a.idfornecedor,t,r,i,0,!1,A.get(this.props.fornecedor,"tipoEntrega"),o?o.idformapagto:"",e,n.cancelRequest,this.state.filtros||[],(()=>{this.setState({...this.state,isLoading:!1,isLoadingFilter:!1})}),!1,A.get(this.props.usuarioVinculado,"trocarUsuarioVinculado"),!0);const c=!!a.tag&&a.tag.includes("enable-google-analytics-ga4-version-tag-events");i&&window.dataLayer&&window.dataLayer.push({event:c?"view_item_list":"pageview",pageTitle:"Search",visitorType:"high-value",query:i,userId:s}),setTimeout((()=>{!window.dataLayer||i||r||(c?window.dataLayer.push({event:"page_view",page_title:"Lista de produtos",visitorType:"high-value",page:this.props.search.pageNumber||1,page_location:window.location.href,userId:s}):window.dataLayer.push({event:"pageview",pageTitle:"Lista de produtos",visitorType:"high-value",page:this.props.search.pageNumber||1,userId:s}))}),1e3),this.setCategoria(r||null),this.scrollTop()}fetchCarrossel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.props.cleanCarroselForPage(),this.props.fornecedorActive&&this.props.fornecedorActive.idfornecedor){let t="page:home";e&&(t="categoria:".concat(e)),this.props.getCarrosselForPage(this.props.fornecedorActive.idfornecedor,t),this.mostrarCarrossel()}}mostrarCarrossel(){this.props.carrossel&&!this.state.showCarrousel&&this.setState({...this.state,showCarrousel:!0})}carrosseisForPage(){return this.props.carrossel&&this.props.carrossel.carrosselForPage&&this.props.fornecedor.whiteLabel?this.props.carrossel.carrosselForPage:[]}renderProdutos(){return this.state.produtos.map(((e,t)=>this.renderProduto(e,t)))}renderProduto(e){return Object(D.jsx)(S.a,{allowEdit:!0,idproduto:e.idproduto,produto:e,hover:!0,updateProduct:this.updateProduct},e.id+e.preco+e.quantidade)}renderBreadcrumb(){let e=[];if(this.state.categoria){let{id:t,titulo:o}=this.state.categoria;e.push({content:o,key:t})}return Object(D.jsx)(O,{sections:e})}hasBreadcrumb(){return null!==this.state.categoria}handleNavigationClean(){let{slug:e,idfornecedor:t}=this.props.fornecedorActive;this.props.history.replace("/".concat(e||t))}changeProductOrder(e){this.props.changeSelectedOrder(e,!0),setTimeout((()=>this.fetchProdutos(!0)),100)}loadMore(){this.props.fetchProductList(this.props.usuario,this.props.fornecedorActive.idfornecedor,null,this.state.idCategoria,this.props.searchText,this.props.search.pageNumber+1,!0,A.get(this.props.fornecedor,"tipoEntrega"),A.get(this.props,"usuario.formaPagamentoActive.idformapagto",null),!1,this.props.carrossel.cancelRequest,this.state.filtros||[],(e=>{let{data:t}=e;return this.scrollToCardTimeOut(t)}))}scrollToCardTimeOut(e){setTimeout((()=>this.scrollToCard(A.get(e,"dados[0].slug"))))}renderFixedCarrossel(){return Object(D.jsxs)("div",{id:"carrossel-fixo-containter",style:{position:"fixed",width:"100%",zIndex:11,maxHeight:"30vh",overflow:"hidden"},children:[Object(D.jsx)(oe.a,{onResize:e=>{this.setState({...this.state,carrosselSize:{height:e.height,width:e.width}})}}),this.carrosseisForPage().map(((e,t)=>{if(A.get(e,"config.fixedTop")||!1)return Object(D.jsx)(K.LazyLoadComponent,{delayTime:2500,children:Object(D.jsx)(I,{index:t,definition:e},e.idcarrossel)},"lazycarrosel-"+e.idcarrossel)}))]},"2")}renderCarrossel(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=A.get(this.props.carrossel,"produtosCarrossel")||{};return this.carrosseisForPage().map(((o,s)=>{let r=A.get(o,"config.fixedTop")||!1;return"PRODUCT_CATEGORY"===o.tipo_conteudo&&e&&void 0!==t[o.idcarrossel]&&t[o.idcarrossel].length?Object(D.jsx)(M.a,{produtos:t[o.idcarrossel]||[],showTitle:o.config.showTitle,title:o.titulo,slickExtendConfig:o.config},o.idcarrossel):!r&&this.state.showCarrousel?Object(D.jsx)(K.LazyLoadComponent,{delayTime:2e3,children:Object(D.jsx)(I,{index:s,definition:o},o.idcarrossel)},"lazycarrosel-"+o.idcarrossel):void 0}))}canRenderCarrosel(){return!this.props.match.params.idcategoria||this.state.categoria}removeCarrosseisPesquisa(){const{carrossel:e}=this.props,{searchText:t}=this.state;if(e){let o=!0;for(;o;){const s=e.carrosselForPage.findIndex((e=>e.config&&!1===e.config.showOnPesquisaAtivada));s>=0&&t?e.carrosselForPage.splice(s,1):o=!1}}}selectDefaultOrder(){if(!this.props.fornecedorActive)return;if(this.props.search.order)return;const e=this.props.fornecedorActive,t=e.ordenacao_de_pesquisa,o=this.getOrderOptions(),s=e=>{setTimeout((()=>{this.changeProductOrder(e)}),500)};s("ordenacao_de_pesquisa"in e&&"Nenhuma Selecionada"!==t?t:o[0].value)}getOrderOptions(){const{t:e}=this.props;return this.props.fornecedorActive.ordenacoes_produto.map((t=>({key:t,text:e("lista.pedido.ordenar")+" "+t,value:t})))}renderListaProdutos(){const{searchText:e,enableMixProdutos:t,fornecedorActive:o}=this.props,{categoria:s,isLoading:r,isLoadingFilter:i}=this.state,a=t||e||s;return Object(D.jsxs)("div",{className:"container-commerce",style:{minHeight:a?"75vh":"0vh"},children:[(s||e)&&Object(D.jsx)(ee,{filtersIsOpen:this.state.listaFiltroOpen,selected:this.state.filtros,changeFilter:this.changeFilters}),Object(D.jsxs)("div",{className:"container-products",style:{paddingBottom:"".concat(this.state.setLogoMobile?"20px":"90px"),paddingTop:"5px"},children:[(this.state.produtos.length>0||r)&&a&&Object(D.jsxs)("div",{className:"options-lista",style:{margin:"1em"},children:[(s||this.props.history.location)&&Object(D.jsx)("div",{className:"open-filters",onClick:()=>{this.setState({listaFiltroOpen:!this.state.listaFiltroOpen})},children:Object(D.jsx)(X.a,{icon:Z.D})}),"ocultar_ordenacao_de_pesquisa"in o&&o.ocultar_ordenacao_de_pesquisa?"":this.renderOrderOptions()]}),Object(D.jsxs)(y.a.Group,{style:{marginTop:"1em",justifyContent:"center"},children:[a&&this.renderProdutos(),a&&0===this.state.produtos.length&&!r&&(e||s)&&(i?this.renderProdutosLoading():Object(D.jsxs)("div",{className:"busca-vazia",children:[Object(D.jsx)(X.a,{icon:Z.B}),Object(D.jsx)("h3",{children:"Desculpe, n\xe3o encontramos nenhum produto"})]})),r&&a&&this.renderProdutosLoading()]}),Object(D.jsx)("center",{style:{margin:"2em"},children:a&&this._renderCarregarMais()})]})]})}renderOrderOptions(){if(!this.props.fornecedorActive)return;const e=this.props.search.order,t=this.getOrderOptions();return Object(D.jsx)(C.a,{additionLabel:"Ordenar por",placeholder:"Mais vendidos",value:e,selection:!0,options:t,onChange:(e,t)=>{this.changeProductOrder(t.value),this.setState({...this.state,isLoadingFilter:!0})}})}getListaProdutosStyle(){const e=this.state.carrosselSize.width<700?"76vh":"86vh";this.removeCarrosseisPesquisa();const t=this.canRenderCarrosel()?this.state.carrosselSize.height:0;return{position:"relative",width:"100%",display:"flex",flexDirection:"column",minHeight:e,marginTop:"".concat(t,"px")}}habilitarCarregar(){const{fornecedorActive:e}=this.props;return"false"!==A.get(e,"config.tema.config.configuracao.habilitarCarregar")}_renderCarregarMais(){const{quantidadeProdutos:e,isLoading:t,t:o}=this.props;let s=this.state.produtos.length&&e?Object(D.jsx)(w.a,{className:t?"disabled":"",size:"huge",onClick:()=>{!t&&this.loadMore()},children:o("lista.pedido.btn.carregar")}):"";return this.habilitarCarregar()?s:""}render(){return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(s.Suspense,{fallback:Object(D.jsx)("div",{}),children:Object(D.jsxs)(q.d,{children:[Object(D.jsx)(q.b,{exact:!0,path:"/:idfornecedor/produto/:idproduto",component:ve}),Object(D.jsx)(q.b,{path:"/:idfornecedor/*",children:this.renderLista()}),Object(D.jsx)(q.b,{path:"/:idfornecedor/",children:this.renderLista()})]})})})}}const we=Object(P.compose)(Object(_.b)(),Object(N.b)(),H.a,Object(T.b)((e=>({tagsSelecinadas:e.commerceSearch.filtrosSelecionados,categoriasSelecionadas:e.commerceSearch.selectedNavigation,produtosExibicao:e.commerceSearch.produtosExibicao,quantidadeProdutos:e.commerceSearch.quantidadeProdutos,fornecedorActive:e.fornecedor.fornecedorActive,fornecedor:e.fornecedor,usuario:e.usuario,idendereco:e.endereco.idendereco,search:e.commerceSearch,carrinho:e.carrinho,carrossel:e.carrossel,enableMixProdutos:!Object(xe.d)(e,"disable-mix-produtos"),formaEntregaActive:e,usuarioVinculado:e.usuarioVinculado})),(e=>Object(P.bindActionCreators)({fetchProductList:k.fetchProductList,searchClean:k.searchClean,getCarrosselForPage:k.getCarrosselForPage,cleanCarroselForPage:k.cleanCarroselForPage,changeSelectedOrder:k.changeSelectedOrder,setPageSubHeader:k.setPageSubHeader,clearTagFiltro:k.clearTagFiltro,loadTagFiltros:k.loadTagFiltros,cancelRequest:k.cancelRequest},e))))(Ce);t.default=we}}]);