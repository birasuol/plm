(this["webpackJsonpsuperon-web-commerce"]=this["webpackJsonpsuperon-web-commerce"]||[]).push([[10],{277:function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return r})),o.d(t,"d",(function(){return i})),o.d(t,"c",(function(){return n}));var a=o(524);const s=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,s=Number(o);return a.format(n(t,o),{symbol:e?"R$ ":"",decimal:",",thousand:".",precision:isNaN(s)?2:s})},r=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";return i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(e).replace("".concat(o),t)},i=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0);return isNaN(t)?e:t},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=Number(arguments.length>1&&void 0!==arguments[1]?arguments[1]:2)+2,o=Number(e).toFixed(t);return o.slice(0,o.length-2)}},295:function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));o(1);var a=o(6);const s=e=>t=>{let o="";if(t.location){let e=new URLSearchParams(t.location.search);o=e.has("query")?e.get("query"):""}else console.warn("withTextQuery needs withRoute to also be bound the to component");return Object(a.jsx)(e,{...t,searchText:o})}},310:function(e,t,o){"use strict";o.d(t,"a",(function(){return h}));var a=o(1),s=o(324),r=o(771),i=o(325),n=o(768),c=o(2),d=(o(670),o(326)),l=o(6);class h extends a.Component{renderImage(){const{size:e="small",alt:t,productId:o,src:a,animateImageHover:i,handleClick:h}=this.props,u=i?"image-product-hover-animated":"",p=a?c.get(a,"mediumSize",c.get(a,"largeSize"))||a:Object(d.b)(o);if("large"===e){const e=a?c.get(a,"largeSize",c.get(a,"mediumSize"))||a:Object(d.b)(o,"large");let r=!1;return Object(l.jsx)(n.a,{style:{borderRadius:"5px"},className:u,enlargedImageContainerClassName:"zoom-image-container",enlargedImageContainerStyle:{zIndex:1},lensStyle:{background:"rgba(255,255,255,0.5)"},smallImage:{alt:t||"",isFluidWidth:!0,width:200,height:200,src:p,onError:e=>{e.target.src=s.a}},largeImage:{src:e,width:800,height:800,onError:t=>{t.target.src=r?e:s.a},onLoad:()=>{r=!0}}})}return Object(l.jsx)(r.a,{src:p,alt:t||"",size:e,width:"200",height:"200",style:{borderRadius:"5px"},className:u,onError:e=>{e.target.src=s.a},onClick:e=>h&&h(e)})}render(){const{clickable:e,lazy:t,unspaced:o}=this.props,a=o?{}:{minHeight:"10em",top:"-10px",marginBottom:"10px"};return Object(l.jsxs)("div",{style:{...a,cursor:e?"pointer":"auto"},children:[t&&Object(l.jsx)(i.LazyLoadComponent,{placeholder:Object(l.jsx)("div",{className:"imagem-loading"}),children:this.renderImage()}),!t&&this.renderImage()]})}}},324:function(e,t,o){"use strict";t.a=o.p+"static/media/sem-imagem.cdd03d79.png"},326:function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"a",(function(){return r}));var a=o(3);const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const o=e?e.replace(/(.webp|.WEBP)$/g,"").replace(/_/g,"+").split("+"):"",[,s]=o;return t=t?"_".concat(t):"","https://s3-sa-east-1.amazonaws.com/".concat(a.d,"/shared/product-image/").concat(s).concat(t,".webp")},r=e=>"https://s3-sa-east-1.amazonaws.com/".concat(a.d,"/shared/product-image/").concat(e,".webp")},334:function(e,t,o){"use strict";o.d(t,"g",(function(){return S})),o.d(t,"f",(function(){return O})),o.d(t,"e",(function(){return B})),o.d(t,"h",(function(){return D})),o.d(t,"c",(function(){return W})),o.d(t,"a",(function(){return H})),o.d(t,"b",(function(){return G})),o.d(t,"l",(function(){return Y.a})),o.d(t,"i",(function(){return J})),o.d(t,"j",(function(){return $})),o.d(t,"d",(function(){return de})),o.d(t,"k",(function(){return le.default}));var a=o(1),s=o.n(a),r=o(10),i=o(21),n=o(38),c=o(267),d=o(56),l=o(22),h=o(2),u=o(34),p=o(821),m=o(825),b=o(6);class g extends s.a.Component{constructor(e){super(e),this.state={modalId:"modal-container-".concat(100*Math.random())},this._closeHandler=this._closeHandler.bind(this)}_hasClassDoNotCloseModal(e){return e.classList.contains("do-not-close-modal")||e.parentNode.classList.contains("do-not-close-modal")}_closeHandler(e){const{closeMenu:t,pageAfterClose:o,searchAfterClose:a,history:s}=this.props;if(e&&e.target&&e.target.isConnected){if("aceitar-termos"!==e.target.id&&"recusar-termos"!==e.target.id&&!this._hasClassDoNotCloseModal(e.target)){if(o){const e=a||"";setTimeout((()=>s.push(o+e)),100)}t()}}}render(){const{render:e,open:t,headerContent:o,actions:a,closeIcon:s,scrolling:r,margin:i,size:n,className:c="modal-endereco",useBackdrop:d=!0}=this.props;return Object(b.jsxs)(p.a,{id:this.state.modalId,style:{marginTop:"0px",margin:i||"25vh auto"},className:c,open:t,state:this.state,onClose:this._closeHandler,closeOnDimmerClick:d,size:n||"small",closeIcon:s,children:[Object(b.jsx)(m.a,{content:o}),Object(b.jsx)(p.a.Content,{scrolling:r,children:e()}),a||null]})}}var j=Object(i.compose)(r.g,Object(n.b)((e=>({active:e.menu.active,pageAfterClose:e.menu.pageAfterClose,searchAfterClose:e.menu.searchAfterClose})),(e=>Object(i.bindActionCreators)({closeMenu:u.closeMenu},e))))(g),x=o(489);o(387);class f extends s.a.Component{constructor(e){super(e),this.abrirModalEnderecoObrigatorio=h.debounce((function(){const{menu:{active:e},endereco:t,fornecedorActive:o,activeMenuEndereco:a,tipoEntregaAtivo:s,showComponente:r}=this.props;"DELIVERY"===s&&(!Object(u.isEnderecoObrigatorio)(t,o)||this.state.wasModalOpened&&e||!r||(a({token:"",idcliente:""}),this.setState({...this.state,wasModalOpened:!0})))}),1e3),this.state={wasModalOpened:!1}}componentDidUpdate(){this.abrirModalEnderecoObrigatorio()}render(){const{menu:{active:e},theme:t,t:o,showComponente:a}=this.props,s=(e===l.e||e===l.g)&&a,r=e===l.g;return Object(b.jsx)(j,{headerContent:o("modal.endereco.header"),margin:"10vh auto 250px auto",open:s,scrolling:!0,closeIcon:!0,render:()=>Object(b.jsx)(x.a,{theme:t,active:r})})}}var O=Object(i.compose)(Object(c.b)(),Object(n.b)((e=>({menu:e.menu,tipoEntregaAtivo:e.fornecedor.tipoEntrega})),(e=>Object(i.bindActionCreators)({activeMenuEnderecoMobile:u.activeMenuEnderecoMobile,activeMenuEndereco:u.activeMenuEndereco},e))),r.g,Object(d.b)())(f),v=o(110),C=o(493),y=o(827);class A extends s.a.Component{constructor(e){super(e),this.state={tipoEntrega:null},this.getLojasEmpresa=this.getLojasEmpresa.bind(this)}componentDidMount(){this.getLojasEmpresa(this.props.tipoEntrega)}getLojasEmpresa(e){this.setState({...this.state,tipoEntrega:e})}_renderSelecionarFornecedores(){const{theme:e,usuario:{idcliente:t},closeMenu:o,commerceLimparCarrinho:a,fornecedor:{lojasEmpresa:s,fornecedorActive:r},history:i,showAtivo:n,t:c}=this.props;return Object(b.jsx)(E,{theme:e,setFornecedorActive:e=>{let{slug:t,idfornecedor:a}=e;o(a),i.push("/".concat(t||a,"?fselecionado=").concat(a)),window.location.reload()},closeMenu:o,commerceLimparCarrinho:a,idcliente:t,fornecedores:s,fornecedorActive:r,showAtivo:n,t:c})}render(){return this._renderSelecionarFornecedores()}}const E=e=>{const{fornecedorActive:{idfornecedor:t},setFornecedorActive:o,fornecedores:a,theme:s,idcliente:r,commerceLimparCarrinho:i,closeMenu:n,showAtivo:c,t:d}=e,l=e=>{let{active:t}=e;return c&&t?Object(b.jsx)(C.a,{horizontal:!0,style:{float:"right",backgroundColor:s.primaryColor,color:s.textColor},children:d("modal.endereco.btn.selecionado")}):null};return a?Object(b.jsx)(y.a.Group,{children:(a||[]).map((e=>{const a=e.idfornecedor===t;return Object(b.jsxs)(y.a,{style:{cursor:"pointer",minHeight:"60px"},onClick:()=>(e=>{let{idfornecedorActive:t,fornecedor:a,idcliente:s}=e;t!==a.idfornecedor?(s||i(),o(a)):n(t)})({idfornecedorActive:t,fornecedor:e,idcliente:r}),children:[Object(b.jsxs)("strong",{children:[" ",e.nome," "]}),Object(b.jsx)("br",{}),Object(b.jsxs)("span",{children:[" ",h.get(e,"meta_info.descricao_endereco_loja",void 0)," "]}),Object(b.jsx)(l,{active:a})]},e.idfornecedor)}))}):""};var k=Object(i.compose)(Object(n.b)((e=>({menu:e.menu,authenticated:e.usuario.authenticated,usuario:e.usuario,fornecedor:e.fornecedor})),(e=>Object(i.bindActionCreators)({closeMenu:u.closeMenu,getFornecedoresByIdempresa:u.getFornecedoresByIdempresa,setFornecedorActive:u.setFornecedorActive,commerceLimparCarrinho:u.commerceLimparCarrinho},e))),Object(c.b)(),Object(d.b)(),r.g)(A);class _ extends s.a.Component{constructor(e){super(e),this.abrirModalSelecaoFornecedor=h.debounce((function(){const{menu:{active:e},fornecedorActive:t,activeMenuFornecedores:o,showComponente:a,fornecedor:{lojasEmpresa:s}}=this.props,r=v.a.parse(this.props.location.search),i=r&&r.fselecionado;if(s.length<=1){const{fornecedorSelecionado:e}=this.props.menu;this.props.closeMenu(e),this.setState({...this.state,wasModalOpened:!1})}else this.isDiffFornecedor()?!Object(u.isSelecaoFornecedorObrigatorio)(t)||this.state.wasModalOpened&&e||i||(a&&o(Object(u.isSelecaoFornecedorObrigatorio)(t)),this.setState({...this.state,wasModalOpened:!0})):this.setState({...this.state,wasModalOpened:!0})}),1e3),this.state={wasModalOpened:!1}}componentDidMount(){this.abrirModalSelecaoFornecedor();const{getFornecedoresByIdempresa:e,fornecedor:{fornecedorActive:{idempresa:t},fornecedorActive:o},usuario:{token:a},usuario:s,tipoEntrega:r}=this.props,{idcliente:i}=s;e({idempresa:t,token:a,tipoEntrega:r,idcliente:Object(u.isSelecaoFornecedorObrigatorio)(o)?i:null})}componentDidUpdate(){if(this.isDiffFornecedor()){const e=v.a.parse(this.props.location.search),t=e&&e.fselecionado;t&&this.state.wasModalOpened&&this.props.closeMenu(t)}}isDiffFornecedor(){const{fornecedorActive:e}=this.props,{fornecedorSelecionado:t}=this.props.menu,o=h.get(e,"idfornecedor");return!t||o!==t}render(){const{t:e,fornecedorActive:t,showComponente:o,fornecedor:{lojasEmpresa:a}}=this.props,s=Object(u.isSelecaoFornecedorObrigatorio)(t)&&!this.props.menu.fornecedorSelecionado&&o,r=v.a.parse(h.get(this,"props.location.search")),i=h.get(r,"fselecionado")||"";return null!==i&&i===t.idfornecedor||a.length<=1?"":Object(b.jsx)(j,{open:s,headerContent:e("modal.selecao.fornecedor.title"),margin:"10vh auto 250px auto",scrolling:!0,closeIcon:!0,render:()=>Object(b.jsx)(k,{})})}}var S=Object(i.compose)(Object(c.b)(),Object(n.b)((e=>({menu:e.menu,authenticated:e.usuario.authenticated,usuario:e.usuario,fornecedores:e.fornecedores,fornecedor:e.fornecedor})),(e=>Object(i.bindActionCreators)({activeMenuEnderecoMobile:u.activeMenuEnderecoMobile,activeMenuFornecedores:u.activeMenuFornecedores,getFornecedoresByIdempresa:u.getFornecedoresByIdempresa,closeMenu:u.closeMenu},e))),r.g,Object(d.b)())(_),w=o(279),M=o(638),P=o(826),N=o(820),T=o(771),L=o(3),I=o(273),R=o.n(I);o(642);class F extends s.a.Component{constructor(){super(...arguments),this.state={copied:!1}}getValorDesconto(e){return"%"===e.tipodesconto?"- ".concat(e.valordesconto," ").concat(e.tipodesconto):"- R$ ".concat(e.valordesconto)}copiarCupom(){this.setState({copied:!0}),setTimeout((()=>{this.setState({copied:!1})}),1e3)}renderCupomRow(e,t,o){const a=this.getValorDesconto(e);return Object(b.jsxs)(P.a.Row,{style:{borderTop:"0px",paddingTop:"0.5rem",paddingBottom:"0.5rem"},children:[Object(b.jsxs)(P.a.Column,{width:6,style:{margin:"auto",display:"grid"},children:[Object(b.jsx)("span",{className:"word-break",children:e.codigocupom}),Object(b.jsx)("span",{style:{opacity:"0.7"},children:a})]}),Object(b.jsx)(P.a.Column,{width:6,style:{margin:"auto"},textAlign:"center",children:w(e.datafim,w.ISO_8601).format("DD/MM/YYYY")}),Object(b.jsx)(P.a.Column,{width:4,style:{width:"25%%",textAlign:"center"},children:Object(b.jsx)(N.a,{style:{color:"#789266",backgroundColor:"#cfe4c9",border:"1px solid #789266",borderRadius:"5px",textAlign:"center"},onClick:()=>{t(e)},children:o("modal.cupom.btn.usar")})})]},e.idcupomdesconto)}renderCupons(e){let{cupons:t,setCupomDesconto:o,titleStyle:a,t:s}=e;const r={fontWeight:"bold",fontSize:"1.1rem"};return t&&t.length?Object(b.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(b.jsx)("span",{style:a,children:s("modal.cupom.body.header")}),Object(b.jsxs)(P.a,{columns:3,style:{paddingTop:"10px"},children:[Object(b.jsxs)(P.a.Row,{style:{borderTop:"0px"},children:[Object(b.jsx)(P.a.Column,{width:6,style:r,children:s("modal.cupom.body.codigo")}),Object(b.jsx)(P.a.Column,{width:6,style:r,textAlign:"center",children:s("modal.cupom.body.validade")}),Object(b.jsx)(P.a.Column,{width:4,textAlign:"center"})]}),t.map((e=>this.renderCupomRow(e,o,s)))]})]}):s("modal.cupom.body.empty")}renderCupomRecomendacao(e,t){const{fornecedorActive:{idfornecedor:o},t:a}=this.props,s=h.get(e,"meta_info")||{},r=h.get(e,"cupom")||null,i={color:this.state.copied?"white":"#789266",width:"130px",backgroundColor:this.state.copied?"#e1a837":"#cfe4c9",border:"1px solid",borderColor:this.state.copied?"#e1a837":"#789266",borderRadius:"5px",textAlign:"center",padding:"10px",cursor:"pointer"};return r?Object(b.jsxs)("div",{style:{borderBottom:"solid 1px #ccc"},children:[Object(b.jsx)("span",{style:t,children:a("modal.cupom.recomendacao.header")}),Object(b.jsx)("div",{style:{textAlign:"center",marginTop:"15px"},children:Object(b.jsx)(T.a,{style:{display:"inline"},src:"".concat(L.b,"/cupom/").concat(o)})}),Object(b.jsx)("div",{style:{textAlign:"center",padding:"15px 40px"},children:Object(b.jsx)(R.a,{escapeHtml:!1,source:s.texto})}),Object(b.jsx)("div",{style:{textAlign:"center",padding:"5px 0 10px 0"},children:Object(b.jsx)("div",{style:{padding:"10px"},children:Object(b.jsx)(M.CopyToClipboard,{style:i,text:s.mensagem,onCopy:()=>this.copiarCupom(),children:Object(b.jsxs)("span",{children:[" ",this.state.copied?a("modal.cupom.recomendacao.btn.copiar.sucesso"):r.codigocupom]})})})})]}):""}render(){const{menu:{active:e},menu:{cupons:t=[],cupomRecomendacao:o={}},setCupomDesconto:a,t:s}=this.props,r={fontWeight:"bold",fontSize:"1.2rem"};return Object(b.jsx)(j,{headerContent:s("modal.cupom.header"),className:"modal-cupom",margin:"15vh auto",open:e===l.d,scrolling:!0,closeIcon:!0,render:()=>Object(b.jsxs)("div",{children:[o?this.renderCupomRecomendacao(o,r):"",this.renderCupons({cupons:t,setCupomDesconto:a,titleStyle:r,t:s})]})})}}var B=Object(i.compose)(Object(c.b)(),Object(d.b)(),Object(n.b)((e=>({menu:e.menu})),(e=>Object(i.bindActionCreators)({setCupomDesconto:u.setCupomDesconto},e))),r.g)(F),U=o(335);var D=Object(i.compose)(Object(c.b)(),Object(d.b)(),Object(n.b)((e=>({menu:e.menu,auth:e.usuario.authenticated}))))((e=>{const{menu:{active:t},auth:o,t:a}=e;return Object(b.jsx)(j,{headerContent:a("modal.login.header"),margin:"15vh auto",open:t===l.f&&!o,scrolling:!0,closeIcon:!0,useBackdrop:!1,render:()=>Object(b.jsx)("div",{style:{overflow:"hidden"},children:Object(b.jsx)(U.c,{})})})})),V=o(488);let z=Object(r.g)(V.a);class q extends s.a.Component{render(){const{menu:{active:e},formaPagamento:t,numpedido:o,idfornecedor:a,usesForeignDoc:s,t:r,after_success:i}=this.props,n=h.get(t,"tipo","CREDITO"),c="DEBITO"===n?"modal.cartao.debito.header":"modal.cartao.header";return Object(b.jsx)(j,{headerContent:r(c),margin:"10vh auto",size:"tiny",open:e===l.c,scrolling:!0,closeIcon:!0,render:()=>Object(b.jsx)(z,{numpedido:o,idfornecedor:a,usesForeignDoc:s,tipoPagamento:n,after_success:i})})}}var W=Object(i.compose)(Object(c.b)(),Object(d.b)(),Object(n.b)((e=>({menu:e.menu})),null),r.g)(q);var H=Object(i.compose)(Object(c.b)(),Object(d.b)(),Object(n.b)((e=>({menu:e.menu,auth:e.usuario.authenticated}))))((e=>{const{menu:{active:t},t:o}=e;return Object(b.jsx)(j,{headerContent:o("modal.alterar.usuario.header"),margin:"15vh auto",open:t===l.a,scrolling:!0,closeIcon:!0,render:()=>Object(b.jsx)("div",{style:{overflow:"hidden"},children:Object(b.jsx)(U.a,{columns:2})})})}));var G=Object(i.compose)(Object(c.b)(),Object(d.b)(),Object(n.b)((e=>({menu:e.menu,auth:e.usuario.authenticated}))))((e=>{const{menu:{active:t},t:o}=e;return Object(b.jsx)(j,{headerContent:o("modal.atualizar.usuario.header"),margin:"15vh auto",open:t===l.b,scrolling:!0,closeIcon:!0,render:()=>Object(b.jsx)("div",{style:{overflow:"hidden"},children:Object(b.jsx)(U.b,{columns:2})})})}));class K extends s.a.Component{constructor(){super(...arguments),this.clearMessageModal=()=>{this.props.clearMessageModal()}}render(){const{mensagemModal:e,theme:t}=this.props;return Object(b.jsx)(j,{headerContent:"Mensagem",className:"modal-mensagem",margin:"15vh auto",open:!!e,scrolling:!0,render:()=>Object(b.jsx)(P.a,{style:{},className:"message-modal",verticalAlign:"middle",centered:!0,width:16,children:Object(b.jsxs)(P.a.Column,{width:16,computer:16,table:16,mobile:16,children:[Object(b.jsx)(P.a.Row,{style:{marginBottom:"5px"},children:Object(b.jsx)("p",{children:e})}),Object(b.jsx)(P.a.Row,{children:Object(b.jsx)(N.a,{style:{float:"right",backgroundColor:"#FFFFFF"===t.primaryColor.toUpperCase()?"#ccc":t.primaryColor,color:t.textColor},onClick:this.clearMessageModal,children:"Fechar"})})]})})})}}var J=Object(i.compose)(Object(c.b)(),Object(n.b)((e=>({mensagemModal:e.usuario.mensagemModal})),(e=>Object(i.bindActionCreators)({clearMessageModal:u.clearMessageModal},e))),r.g)(K),Y=o(389),Z=(o(390),o(391),o(392));class X extends s.a.Component{render(){const{menu:{active:e},totalLiquido:t,t:o}=this.props,a=h.get(this.props.pagamentoSucesso,"Pix.Payload","");return Object(b.jsx)(j,{headerContent:o("visualizar.pedido.pix"),margin:"10vh auto",size:"tiny",open:e===l.h,scrolling:!0,closeIcon:!0,render:()=>Object(b.jsx)(Z.a,{payload:a,valor:t})})}}var $=Object(i.compose)(Object(c.b)(),Object(d.b)(),Object(n.b)((e=>({menu:e.menu})),null),r.g)(X),Q=o(408),ee=o(815),te=o(785),oe=o(274),ae=o(310),se=o(351),re=o(353),ie=o(393),ne=o(12);o(477),o(327),o(328);class ce extends s.a.Component{constructor(e){super(e),this.fetchNewProducts=async(e,t)=>{const{usuario:o,fornecedorActive:a,idendereco:s,id_entidade:r,fornecedor:i}=this.props;this.props.fetchProductList(o,a.idfornecedor,s,r,e,t,!1,h.get(i,"tipoEntrega"),o.formaPagamentoActive?o.formaPagamentoActive.idformapagto:"",!0,!1,[],(e=>{const o=h.get(e,"data.dados",[]),a=0===t?o:this.state.produtosExibicaoState.concat(o);this.setState((e=>({isLoading:!1,stopIntersect:!0,produtosExibicaoState:a.filter((t=>!e.produtosCombo.find((e=>e.entidade.idcadastroextraproduto===t.idcadastroextraproduto))))})))}),!0)},this.handleObserver=()=>{const e=document.getElementById("nova-busca");if(e){const t=new window.IntersectionObserver((e=>{e.some((e=>1==e.isIntersecting&&1==this.state.stopIntersect&&this.props.produtosExibicao.length>0))&&(this.setState({...this.state,currentPage:this.state.currentPage+1,stopIntersect:!this.state.stopIntersect,isLoading:!0}),this.fetchNewProducts(this.state.searchText,this.state.currentPage),this.setState({...this.state}))}));return t.observe(e),()=>t.disconnect()}},this.handleSearch=(e,t)=>{this.setState({searchText:e,isLoading:!0,currentPage:t}),this.fetchNewProducts(e,t)},this.addOrRemove=(e,t)=>{if(-1===e.findIndex((e=>e.id===t.id))){const o=[...e],a=e.reduce(((e,t)=>e+t.quantidade),0),s=this.props.qtdSKUMaxima>0&&e.length===this.props.qtdSKUMaxima;return a===this.props.qtdMaxima||s?ne.b.warn(s?"Limite m\xe1ximo de SKU atingido!":"Limite m\xe1ximo atingido!"):o.push({...t,quantidade:1}),o}return e.filter((e=>e.id!==t.id))},this.selectProduct=e=>{if(!h.get(e,"meta_info.sem_estoque",!1)){const t=this.addOrRemove(this.state.produtosSelecionados,e),o=this.state.produtosSelecionados.reduce(((e,t)=>e+t.quantidade),0);if(o-1===this.props.qtdMaxima)return void ne.b.warn("Limite m\xe1ximo atingido!");if(this.props.qtdSKUMaxima>0&&o-1===this.props.qtdSKUMaxima)return void ne.b.warn("Limite m\xe1ximo de SKU atingido!");this.setState({...this.state,produtosSelecionados:t.map((e=>({...e,quantidade:1})))})}},this.confirm=()=>{this.props.handleSelectedProduct(this.props.id_entidade,this.state.produtosSelecionados),this.props.handleModal()},this.renderIcon=e=>-1===this.state.produtosSelecionados.findIndex((t=>t.id===e.id))?Object(b.jsx)(b.Fragment,{}):Object(b.jsx)(Q.a,{name:"check",color:"green",style:{marginLeft:"5px"}}),this.state={searchText:"",produtosSelecionados:e.produtosSelecionados||[],isLoading:!0,currentPage:0,stopIntersect:!0,produtosExibicaoState:[],discountPercent:e.discountPercent,produtosCombo:[]}}componentDidMount(){this.fetchNewProducts(this.state.searchText,0)}componentDidUpdate(e){!this.props.showModalProdutos||this.props.id_entidade===e.id_entidade&&e.showModalProdutos||(this.fetchNewProducts(this.state.searchText,0),this.setState({...this.state,produtosSelecionados:this.props.produtosSelecionados||[],produtosExibicaoState:[],currentPage:0,isLoading:!0,discountPercent:this.props.discountPercent,produtosCombo:this.props.produtosCombo})),this.handleObserver()}getProdutoPreco(e){return{...e,precoDestaque:this.state.discountPercent?e.preco-e.preco*this.state.discountPercent/100:e.preco,precoAuxiliar:this.state.discountPercent?e.preco:null}}render(){const{showModalProdutos:e,handleModal:t,nomeSegmento:o}=this.props;return Object(b.jsxs)(p.a,{open:e,style:{marginTop:"0px",margin:"5vh auto"},closeIcon:!0,onClose:()=>{this.props.handleSelectedProduct(this.props.id_entidade,this.state.produtosSelecionados),t()},children:[Object(b.jsx)(p.a.Header,{children:o||""}),Object(b.jsx)(p.a.Content,{scrolling:!0,children:Object(b.jsx)(p.a.Description,{children:Object(b.jsxs)(P.a,{children:[Object(b.jsx)(P.a.Row,{style:{marginBottom:"30px;"},children:Object(b.jsx)(te.a,{icon:"search",placeholder:"Pesquisar...",style:{width:"100%",paddingBottom:"15px;"},onChange:e=>this.handleSearch(e.target.value,0),value:this.state.searchText})}),(this.state.produtosSelecionados||[]).length>0&&Object(b.jsx)("div",{className:"row",style:{padding:"0 1rem"},children:Object(b.jsx)("span",{style:{fontSize:"1.25rem"},children:"Itens selecionados"})}),Object(b.jsx)(P.a.Row,{className:"container-products",children:Object(b.jsx)(b.Fragment,{children:(this.state.produtosSelecionados||[]).map((e=>Object(b.jsx)(P.a.Column,{style:{marginBottom:"10px;"},widescreen:"4",computer:"4",largeScreen:"4",mobile:"16",tablet:"8",className:"product",children:Object(b.jsx)(ee.a,{id:e.idproduto,style:{cursor:"pointer"},children:Object(b.jsxs)(ee.a.Content,{onClick:()=>this.selectProduct(e),className:"container-card",children:[Object(b.jsx)(ae.a,{clickable:!1,size:"small",productId:e.id,lazy:!0}),Object(b.jsx)("span",{className:"title-card-combo",children:Object(b.jsx)(R.a,{escapeHtml:!1,source:e.nome})}),Object(b.jsxs)("span",{children:["C\xf3digo: ",e.id_produto_erp]}),Object(b.jsxs)("div",{className:"container-preco",children:[h.get(e,"meta_info.sem_estoque",!1)?Object(b.jsx)(ie.a,{styles:Object(re.a)(e),idproduto:h.get(e,"idproduto"),actived:h.get(e,"alerta_disponibilidade",!1),idcadastroextraproduto:h.get(e,"idcadastroextraproduto")}):Object(b.jsx)(se.a,{produto:this.getProdutoPreco(e),styles:Object(re.a)(e),disabledMessage:!0,quantidade:e.quantidade,centerMode:!0,fornecedor:this.props.fornecedorActive,showPrefix:!0}),this.renderIcon(e)]})]})})},e.idproduto)))})}),(!this.state.isLoading||0!==this.state.currentPage)&&(this.state.produtosExibicaoState||[]).filter((e=>-1===this.state.produtosSelecionados.findIndex((t=>t.id===e.id)))).length>0&&Object(b.jsx)("div",{className:"row",style:{padding:"0 1rem"},children:Object(b.jsx)("span",{style:{fontSize:"1.25rem"},children:"Itens do combo"})}),Object(b.jsx)(P.a.Row,{className:"container-products",children:Object(b.jsxs)(b.Fragment,{children:[(!this.state.isLoading||0!==this.state.currentPage)&&(this.state.produtosExibicaoState||[]).filter((e=>-1===this.state.produtosSelecionados.findIndex((t=>t.id===e.id)))).map((e=>Object(b.jsx)(P.a.Column,{style:{marginBottom:"10px;"},widescreen:"4",computer:"4",largeScreen:"4",mobile:"16",tablet:"8",className:"product",children:Object(b.jsx)(ee.a,{id:e.idproduto,style:{cursor:"pointer"},children:Object(b.jsxs)(ee.a.Content,{onClick:()=>this.selectProduct(e),className:"container-card",children:[Object(b.jsx)(ae.a,{clickable:!1,size:"small",productId:e.id,lazy:!0}),Object(b.jsx)("span",{className:"title-card-combo",children:Object(b.jsx)(R.a,{escapeHtml:!1,source:e.nome})}),Object(b.jsxs)("span",{children:["C\xf3digo: ",e.id_produto_erp]}),Object(b.jsx)("div",{className:"container-preco",children:h.get(e,"meta_info.sem_estoque",!1)?Object(b.jsx)(ie.a,{styles:Object(re.a)(e),idproduto:h.get(e,"idproduto"),actived:h.get(e,"alerta_disponibilidade",!1),idcadastroextraproduto:h.get(e,"idcadastroextraproduto")}):Object(b.jsx)(se.a,{produto:this.getProdutoPreco(e),styles:Object(re.a)(e),disabledMessage:!0,quantidade:e.quantidade,centerMode:!0,fornecedor:this.props.fornecedorActive,showPrefix:!0})})]})})},e.idproduto))),Object(b.jsx)("div",{id:"nova-busca",style:{margin:"auto"},children:this.state.isLoading&&Object(b.jsx)(oe.a,{})})]})})]})})}),Object(b.jsx)(p.a.Actions,{children:Object(b.jsx)(N.a,{icon:"check",content:"Salvar escolhas",positive:!0,onClick:this.confirm,disabled:0===this.state.produtosSelecionados.length})})]})}}var de=Object(i.compose)(Object(c.b)(),Object(d.b)(),Object(n.b)((e=>({produtosExibicao:e.commerceSearch.produtosExibicao,quantidadeProdutos:e.commerceSearch.quantidadeProdutos,fornecedor:e.fornecedor,fornecedorActive:e.fornecedor.fornecedorActive,usuario:e.usuario,idendereco:e.endereco.idendereco})),(e=>Object(i.bindActionCreators)({fetchProductList:u.fetchProductList},e))),r.g)(ce),le=o(478);o(394),o(395)},351:function(e,t,o){"use strict";o.d(t,"a",(function(){return y}));var a=o(2),s=o(1),r=o(804),i=o(672),n=o(493),c=o(29),d=o(277),l=o(352),h=o.n(l),u=(o(671),o(21)),p=o(267),m=o(476),b=o(6);const g=(e,t,o,s)=>{if(!a.get(e,"efeitospoliticas.desconto.mostrarPrecoOriginal")||!t)return null;const r="".concat(Object(d.a)(!0,t,s)," ").concat(e.labelunidade);return Object(b.jsx)("div",{style:o,className:"preco-auxiliar strike shrink","data-cy":"preco-original",children:r})},j=(e,t,o,a,s,r,i)=>t?Object(b.jsxs)("div",{className:a,style:{display:s,...r},"data-cy":"preco-auxiliar",children:[i&&"De ",e.precoAuxiliar?Object(d.a)(!0,e.precoAuxiliar,o)+e.labelunidade:""]}):null,x=function(e,t,o,a){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";const r=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={height:o?"40px":"30px",borderBottom:o?"none":"1px solid #C8C8C8"},s=e=>({fontSize:"14px",color:e?"#262626":"#474747",fontWeight:e?600:400});return Object(b.jsxs)("div",{className:"discount-table-item","data-cy":"item-tabela-desconto-progressivo",style:a,children:[Object(b.jsx)("span",{style:s(o),children:e}),Object(b.jsx)("span",{style:s(o),children:t})]})}(e,Object(d.a)(!0,t,a),o)};return Object(b.jsx)("div",{style:{position:"relative"},className:s,children:Object(b.jsxs)("div",{className:"discount-table-box","data-cy":"tabela-desconto-progressivo",children:[r("1 ".concat(o),e[t[0]]),t.slice(1).map(((a,s)=>{const i=t[s+2];return r((n=a,(c=i)?"De ".concat(Number(n)," - ").concat(Number(c)-1," ").concat(o):"A partir de ".concat(n," ").concat(o)),e[a],s===t.length-2);var n,c}))]})})},f=(e,t,o,a,n,c,d,l,h)=>{const[u,p]=Object(s.useState)(!1);if(0===n.length)return null;const g=2!==n.length&&l?"(".concat(d," a ").concat(l-1," ").concat(e.labelunidade,")"):"A partir de ".concat(Number(c)," ").concat(e.labelunidade);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{"data-cy":"mensagem-desconto-progressivo",style:{fontSize:"12px",fontWeight:400},children:c&&g}),Object(b.jsx)("div",{"data-cy":"botao-mostrar-tabela-desconto-progressivo",style:{position:"absolute",top:0,right:0,transform:"translate(100%, -30%)",zIndex:1,padding:".75rem"},onMouseEnter:()=>{Object(m.a)()||p(!0)},onMouseLeave:()=>p(!1),onClick:e=>{Object(m.a)()&&o(!t),e.stopPropagation()},children:Object(b.jsx)(r.a,{position:"right center",open:u,trigger:Object(b.jsx)("button",{className:"plus-button",children:Object(b.jsx)("i",{className:t||!Object(m.a)()?"icon plus":"icon minus"})}),children:Object(b.jsx)(i.a,{className:"popup-content",children:x(a,n,e.labelunidade,h)})})})]})},O=(e,t,o,a)=>Object(b.jsx)("div",{style:{marginTop:"1rem"},children:x(e,t,a,o,"table-discount-content")});function v(e,t,o,r,i,c,l,h,u){var p;const[m,x]=Object(s.useState)(!0),v=a.get(o,"meta_info.quantidadeDecimais"),C=a.get(o,"tags_card_produto",[]),y=C&&C.length>0,A={fontSize:"16px",display:e,...c.preco_original},E=o.msgDestaque?c.preco_atacado:c.preco_venda,k=c.preco_venda,_={fontSize:"16px",margin:"6px 0",color:"rgb(45,45,45)",transform:"scale(0.8)",opacity:"0.8",display:e,...E},S=y?C.reduce(((e,t)=>t.preco<e.preco?t:e)).preco:o.precoDestaque,w=null===o||void 0===o||null===(p=o.efeitospoliticas)||void 0===p?void 0:p.descontoProgressivo,M=w?Object.keys(w):[],P=M.length>0,N=M.find((e=>e>l)),T=M[M.indexOf(N)+1],L=M[M.indexOf(T)-1];return Object(b.jsxs)("div",{style:{width:"100%"},children:[!(o.precoAuxiliar===i||!N&&P)&&g(o,i,A,v),j(o,o.precoAuxiliar,v,r,e,k,h),o.precoAuxiliar&&P&&N&&Object(b.jsx)("span",{style:_,children:"ou"}),Object(b.jsxs)("div",{style:{fontSize:"19px",display:e,...E},className:t,children:[y&&Object(b.jsx)("div",{style:{width:"100%",paddingBottom:"24px",position:"relative"},children:Object(b.jsx)(n.a,{as:"div",color:"red",ribbon:!0,style:{position:"absolute",transform:"scale(0.8)",left:"-36px",top:"-4px",padding:"0.5833em 0.833em"},children:"A partir de:"})}),Object(b.jsxs)("div",{className:"preco-destaque-content",style:{margin:u?"0 auto":"0"},children:[h&&"Por ",Object(d.a)(!0,S,v)," ",o.labelunidade,f(o,m,x,w,M,N,L,T,v)]}),!m&&O(w,M,v,o.labelunidade)]})]})}function C(e,t){const o={fontSize:"10px",color:"rgb(45,45,45)",marginTop:a.get(e,"meta_info.sem_estoque")?"40px":"10px",marginBottom:"-13px",...t.msg_extra};return Object(b.jsx)("div",{style:o,dangerouslySetInnerHTML:{__html:h.a.sanitize(e.mensagemcardproduto)}})}const y=Object(u.compose)(Object(p.b)("InfoPrecoProdutoComponent",{}))((e=>{const{produto:t,styles:o,disabledMessage:s,ommitMessage:r,fornecedor:i,showPrefix:n,quantidade:d,centerMode:l}=e,h=i?i.tag.includes("disable-product-multiple"):null,u=i&&!h?d*t.multiploincremento:d,p=a.get(t,"efeitospoliticas.descontoProgressivo"),m=Object(c.c)(p,1e-7)||t.minvendaatacado,g=!(!i||h)&&u*t.multiploincremento>=m;let j=(Object(c.d)(t)||g)&&u>=m?"preco-destaque animated tada":"preco-destaque animated",x=(Object(c.d)(t)||g)&&u>=Object(c.c)(p,u)?" preco-auxiliar strike shrink":"preco-auxiliar";const f=(Object(c.d)(t)||g)&&u>=m&&t.preco_sem_politica_atacado?t.preco_sem_politica_atacado:t.preco_sem_politica_varejo,O=!!(t.precoDestaque&&t.precoDestaque>0)?"block":"none";return Object(b.jsxs)("span",{children:[v(O,j,t,x,f,o,u,n,l),!s&&!r&&C(t,o)]})}))},353:function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"a",(function(){return i}));var a=o(2);const s=(e,t)=>{const o=a.get(e,"meta_info"),s=a.get(o,"[".concat(t,"].fontSize.commerce"));if("string"===typeof t&&o&&s)return{fontSize:r(s),fontWeight:"true"===a.get(o,"[".concat(t,"].bold"))?"bolder":"unset",fontStyle:"true"===a.get(o,"[".concat(t,"].italic"))?"italic":"unset",backgroundColor:a.get(o,"[".concat(t,"].bgColor"))||"",color:a.get(o,"[".concat(t,"].cor"))||""}},r=function(){return"".concat("1.15"/5*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"5")).concat("em")},i=e=>{const t=s(e,"btn_adicionar");return{nome_produto:s(e,"nome_produto"),preco_venda:s(e,"preco_venda"),preco_original:s(e,"preco_original"),preco_atacado:s(e,"preco_atacado"),msg_extra:s(e,"msg_extra"),btn_adicionar:t,qtd_unidade:t&&{fontSize:t.fontSize},btn_availability_alert:s(e,"btn_availability_alert"),btn_sob_demanda:s(e,"btn_sob_demanda")}}},387:function(e,t,o){},389:function(e,t,o){"use strict";var a=o(280),s=o(821),r=o(820),i=o(21),n=o(56),c=o(267),d=o(34),l=o(273),h=o.n(l),u=o(10),p=o(38),m=o(5),b=o(2),g=o(1),j=o.n(g),x=o(6);const f=a();class O extends j.a.Component{constructor(){super(...arguments),this.state={termoUso:"",novaVersao:null},this.renderTermoUso=e=>e.includes("<html")?Object(x.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:e}):Object(x.jsx)(h.a,{escapeHtml:!1,source:e,astPlugins:[f]})}componentDidMount(){const{fornecedorActive:e}=this.props,{idfornecedor:t,config:o}=e,a=b.get(o,"termosUso.config.versao",""),s=a?"".concat(t,"-").concat(a):"";this.state.termoUso||m.b.getTermoUso(s).then((e=>{this.setState({...this.state,termoUso:e.data})}))}componentDidUpdate(){const{fornecedorActive:e,termoAtual:t}=this.props,{idfornecedor:o,config:a}=e,s=this.state.novaVersao||b.get(a,"termosUso.config.versao",""),r=t;if(r>s){const e=r?"".concat(o,"-").concat(r):"";m.b.getTermoUso(e).then((e=>{this.setState({...this.state,termoUso:e.data,novaVersao:r})}))}}render(){const{handleTermosUso:e,showTerm:t,btnCancelarLabel:o,t:a}=this.props;return Object(x.jsxs)(s.a,{open:t,style:{marginTop:"0px",margin:"auto"},children:[Object(x.jsx)(s.a.Header,{children:a("modal.termo.uso.header")}),Object(x.jsx)(s.a.Content,{scrolling:!0,children:Object(x.jsx)(s.a.Description,{children:this.renderTermoUso(this.state.termoUso)})}),Object(x.jsxs)(s.a.Actions,{children:[Object(x.jsx)(r.a,{id:"recusar-termos",icon:"close",content:o,onClick:()=>{e(!1)}}),Object(x.jsx)(r.a,{id:"aceitar-termos",icon:"check",content:a("modal.termo.uso.btn.executar"),positive:!0,onClick:()=>{e(!0)}})]})]})}}t.a=Object(i.compose)(Object(c.b)(),Object(n.b)(),Object(p.b)((e=>({menu:e.menu,fornecedorActive:e.fornecedor.fornecedorActive})),(e=>Object(i.bindActionCreators)({setCupomDesconto:d.setCupomDesconto},e))),u.g)(O)},390:function(e,t,o){"use strict";var a=o(280),s=o(821),r=o(820),i=o(21),n=o(273),c=o.n(n),d=o(1),l=o.n(d),h=o(6);const u=a();class p extends l.a.Component{constructor(){super(...arguments),this.state={termoCookies:"Nosso site pode utilizar cookies para o funcionamento adequado dos seus recursos, com o objetivo de melhorar a sua experi\xeancia,    permitir o in\xedcio de sess\xe3o seguro, memorizar os detalhes de seu in\xedcio de sess\xe3o, gerir a sess\xe3o e recolher    estat\xedsticas para oferecer o conte\xfado mais adequado aos seus interesses.      Saiba mais sobre <a href='https://lifeappshelp.zendesk.com/hc/pt-br/articles/6069875669783-O-que-s%C3%A3o-cookies-' target='_blank' rel='noopener noreferrer'> o que s\xe3o cookies </a>.    ",showCookie:null},this.renderTermoCookie=e=>e.includes("<html")?Object(h.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:e}):Object(h.jsx)(c.a,{escapeHtml:!1,source:e,astPlugins:[u]})}render(){const{t:e,showCookie:t,handlerShowCookie:o,handlerPreferenceCookie:a}=this.props;return Object(h.jsxs)(s.a,{open:t,style:{marginTop:"0px",margin:"auto"},children:[Object(h.jsx)(s.a.Header,{children:e("modal.termo.cookie.header")}),Object(h.jsx)(s.a.Content,{scrolling:!0,children:Object(h.jsx)(s.a.Description,{children:this.renderTermoCookie(this.state.termoCookies)})}),Object(h.jsxs)(s.a.Actions,{children:[Object(h.jsx)(r.a,{id:"gerenciar-preferencias",content:e("modal.termo.cookie.btn.preferencias"),size:"large",onClick:()=>{a()}}),Object(h.jsx)(r.a,{id:"aceitar-termos",icon:"check",content:e("modal.termo.cookie.btn.executar"),positive:!0,size:"large",onClick:()=>{o()}})]})]})}}t.a=Object(i.compose)()(p)},391:function(e,t,o){"use strict";var a=o(821),s=o(817),r=o(408),i=o(833),n=o(820),c=o(21),d=o(1),l=o.n(d),h=o(6);class u extends l.a.Component{constructor(){super(...arguments),this.state={termoPolica:"Cookies s\xe3o arquivos criados pelo sites que voc\xea visita.\n    Eles tormam sua experi\xeancia on-line mais f\xe1cil,\n    economizando informa\xe7\xf5es de navega\xe7\xe3o. Com os \n    cookies, os sites podem manter seu login, lembrar suas\n    prefer\xeancias do site e fornecer conte\xfado relevante localmente.\n    ",termoPolitica2:"Voc\xea pode conhecer cada um deles e gerenciar suas prefer\xeancias:"}}render(){const{t:e,showCookie:t,handlerShowCookie:o,handlerPreferenceCookie:c,categoriasCookies:d,handleOpenDescriptionCookie:l,handleActiveCookie:u}=this.props;return Object(h.jsxs)(a.a,{open:t,style:{marginTop:"0px",margin:"15vh auto"},closeIcon:!0,size:"tiny",onClose:()=>c(),children:[Object(h.jsx)(a.a.Header,{children:e("modal.termo.cookie.preferencias.header")}),Object(h.jsxs)(a.a.Content,{scrolling:!0,children:[Object(h.jsxs)(a.a.Description,{children:[this.state.termoPolica,Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),this.state.termoPolitica2]}),Object(h.jsx)("br",{}),Object(h.jsx)(s.a,{fluid:!0,styled:!0,style:{paddingTop:"30px"},children:d.map((e=>Object(h.jsxs)("div",{children:[Object(h.jsx)(s.a.Title,{active:e.open,index:e.id,style:{cursor:"default"},children:Object(h.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(h.jsxs)("span",{onClick:()=>l(e.id),style:{cursor:"pointer"},children:[Object(h.jsx)(r.a,{name:"dropdown"}),e.titulo]}),Object(h.jsx)(i.a,{id:e.id,toggle:!0,checked:e.active,onClick:()=>u(e.id),label:e.active?"Ativado":"Desativado",style:{paddingRight:"5px"}})]})}),Object(h.jsx)(s.a.Content,{active:e.open,children:Object(h.jsx)("p",{children:e.descricao})})]},e.id)))})]}),Object(h.jsx)(a.a.Actions,{children:Object(h.jsx)(n.a,{id:"aceitar-termos",icon:"check",content:e("modal.termo.cookie.btn.executar"),positive:!0,size:"large",onClick:()=>{o()}})})]})}}t.a=Object(c.compose)()(u)},392:function(e,t,o){"use strict";var a=o(1),s=o(277),r=o(21),i=(o(653),o(56)),n=o(654),c=o(6);class d extends a.Component{constructor(e){super(e),this.copyToClipboard=()=>{const e=document.createElement("textarea");e.value=this.props.payload,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.setState({isPixCopied:!0})},this.state={isPixCopied:!1}}render(){const{payload:e,valor:t,t:o}=this.props;return Object(c.jsx)("div",{className:"pix-info",children:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"pix-title",children:o("visualizar.pedido.pix")}),Object(c.jsx)(n.a,{className:"pix-qrcode",value:e,size:250}),Object(c.jsx)("div",{className:"pix-copy",children:Object(c.jsx)("a",{onClick:this.copyToClipboard,children:this.state.isPixCopied?o("visualizar.pedido.pix.copiado"):o("visualizar.pedido.pix.copiar")})}),Object(c.jsxs)("div",{className:"pix-valor",children:[Object(c.jsx)("span",{children:"Valor: "}),Object(c.jsx)("span",{className:"p-valor",children:Object(c.jsx)("b",{children:Object(s.a)(!0,t)})})]})]})})}}t.a=Object(r.compose)(Object(i.b)())(d)},393:function(e,t,o){"use strict";o.d(t,"a",(function(){return j}));var a=o(1),s=o.n(a),r=o(267),i=o(56),n=o(38),c=o(2),d=o(12),l=o(21),h=o(820),u=o(268),p=o(269),m=o(48),b=o(6);class g extends s.a.Component{constructor(e){super(e),this.handlerAlert=()=>{const{idproduto:e,idcadastroextraproduto:t,fornecedorActive:o,usuario:a}=this.props;this.setState({...this.state,loading:!0}),this.state.actived?Object(m.h)(c.get(a,"idcliente"),c.get(o,"idfornecedor"),t).then((()=>{this.setState({actived:!1,loading:!1}),d.b.success("Alerta de disponibilidade do produto removida")})).catch((e=>{d.b.error(c.get(e,"response.message","Falha ao remover alerta de disponibilidade"))})):Object(m.a)(c.get(a,"idcliente"),c.get(o,"idfornecedor"),e,t).then((()=>{d.b.success("Alerta de disponibilidade do produto criada"),this.setState({actived:!0,loading:!1})})).catch((e=>{d.b.error(c.get(e,"response.message","Falha ao criar alerta de disponibilidade"))}))},this.state={actived:this.props.actived||!1,loading:!1}}render(){const{theme:e,styles:t,usuario:o,t:a,fornecedorActive:s}=this.props,{loading:r,actived:i}=this.state,n=c.get(t,"btn_availability_alert",e.secondaryColor),d=(c.get(s,"tag",[])||[]).includes("use-product-availability-alert");return Object(b.jsx)(b.Fragment,{children:o.authenticated&&d?Object(b.jsxs)(h.a,{style:{backgroundColor:"#ccc",borderRadius:"3px",textAlign:"center",color:e.secondaryColor,...c.get(t,"btn_availability_alert")||{}},className:"availability-alert",onClick:()=>this.handlerAlert(),disabled:r,children:[Object(b.jsx)(u.a,{style:{marginRight:"0.4em",color:n},icon:i?p.k:p.j}),Object(b.jsx)("span",{className:"text",children:a(i?"produto.btn.remover_alerta_disponibilidade":"produto.btn.criar_alerta_disponibilidade")})]}):Object(b.jsx)("span",{})})}}const j=Object(l.compose)(Object(r.b)("AdicionarRemoverProdutoCarrinho"),Object(i.b)(),Object(n.b)((e=>({fornecedorActive:e.fornecedor.fornecedorActive,usuario:e.usuario}))))(g)},394:function(e,t,o){"use strict";var a=o(821),s=o(826),r=o(785),i=o(818),n=o(820),c=o(21),d=o(38),l=o(1),h=o.n(l),u=o(10),p=o(267),m=o(56),b=(o(477),o(12)),g=o(5),j=o(2),x=o.n(j),f=o(6);class O extends h.a.Component{constructor(e){super(e),this.createUser=()=>{const{usuario_cadastro:e}=this.state,{usuario:t}=this.props;if(!e.email||!/^([\w\\+._-]{1,})@([\w\\+_-]+)(([.][\w\\+_-]{1,}){1,})$/.exec(e.email))return b.b.warning("Informe um endere\xe7o de e-mail v\xe1lido.");g.b.cadastrarUsuarioVinculado(t.usuario.idcadastroextracliente,t.idfornecedor,e.email).then((()=>{b.b.success("Usu\xe1rio cadastrado com sucesso"),this.setState({...this.state,usuario_cadastro:{email:""}}),this.props.handleModal(),this.props.loadUsuariosVinculados()})).catch((e=>{const t=x.a.get(e,"response.data.error","");t?b.b.error(t):b.b.error("Erro ao cadastrar usu\xe1rio."),console.error(e)}))},this.state={usuario_cadastro:{email:""}},this.handleInput=this.handleInput.bind(this)}handleInput(e){const{name:t,value:o}=e.target;this.setState({[t]:o})}render(){const{t:e,openModal:t,handleModal:o,message:c}=this.props,{usuario_cadastro:d}=this.state;return Object(f.jsxs)(a.a,{open:t,style:{marginTop:"0px",margin:"5vh auto"},closeIcon:!0,onClose:()=>o(),children:[Object(f.jsx)(a.a.Header,{children:e("usuarios.modal.header.cadastro")}),Object(f.jsx)(a.a.Content,{scrolling:!0,children:Object(f.jsx)(s.a,{centered:!0,children:Object(f.jsx)(s.a.Row,{children:Object(f.jsxs)(s.a.Column,{mobile:"16",widescreen:"12",children:[Object(f.jsx)("label",{className:"form__label",children:e("usuarios.modal.field.email")}),Object(f.jsx)(r.a,{id:"email",name:"email",type:"email",fluid:!0,focus:!0,value:d.email,placeholder:e("usuarios.modal.field.email"),onChange:(e,t)=>{this.setState({...this.state,usuario_cadastro:{email:t.value}})}}),c&&Object(f.jsx)(i.a,{color:"red",children:c})]})})})}),Object(f.jsx)(a.a.Actions,{children:Object(f.jsx)(n.a,{icon:"check",content:e("usuarios.modal.btn.cadastro"),positive:!0,onClick:this.createUser})})]})}}t.a=Object(c.compose)(Object(p.b)(),Object(m.b)(),Object(d.b)((e=>({produtosExibicao:e.commerceSearch.produtosExibicao,quantidadeProdutos:e.commerceSearch.quantidadeProdutos,fornecedor:e.fornecedor,fornecedorActive:e.fornecedor.fornecedorActive,usuario:e.usuario,idendereco:e.endereco.idendereco,message:e.usuario.message})),(e=>Object(c.bindActionCreators)({},e))),u.g)(O)},395:function(e,t,o){"use strict";o.r(t);var a=o(1),s=o.n(a),r=o(56),i=o(21),n=o(38),c=o(267),d=o(34),l=o(821),h=o(806),u=o(820),p=o(274),m=o(2),b=o.n(m),g=o(6);class j extends s.a.Component{constructor(e){super(e),this.getClient=(e,t)=>{let{value:o}=t;e.preventDefault(),e.getModifierState&&this.setState({...this.state,newClient:o,isLoading:!1})},this.handleSubmit=(e,t)=>{e.preventDefault();const{newClient:o}=t,a=this.defaultValue()[0];o?this.props.autenticar({token:o.token,usuario:o,callback:()=>this.props.usuarioVinculo()}):(this.props.autenticar({token:a.token,usuario:a,callback:()=>this.props.usuarioVinculo()}),this.setState({...this.state,newClient:a})),this.setState({...this.state,authenticating:!0}),setTimeout((()=>{this.props.usuarioVinculado.usuarioVinculadoAtual={...this.props.usuarioVinculado.usuarioVinculadoAtual,...o},this.props.usuarioVinculado.loginAsUsuarioVinculado=!(o?o.principal:a.principal),this.setState({...this.state,isLoading:!0,newClient:null,authenticating:!1})}),1500)},this.cancelar=()=>{this.props.usuarioVinculo(),this.setState({...this.state,newClient:null})},this.defaultValue=()=>{const{listaClientesVinculados:e,usuarioVinculado:{usuarioVinculadoAtual:t}}=this.props;return e.filter((e=>e.id_cadastro_extra_cliente===t.idcadastroextracliente)).map((e=>({cpf:e.cpf,email:e.email,idcadastroextracliente:e.id_cadastro_extra_cliente,token:e.token,senha:"",principal:e.principal,id_usuario:e.id_usuario,id_fornecedor:e.id_fornecedor})))},this.state={isLoading:!0,newClient:null,authenticating:!1}}componentDidUpdate(e){const{isLoading:t}=this.state,{usuarioVinculado:o,usuario:{idfornecedor:a}}=this.props;o.usuarioVinculado&&t?(this.props.getListaClientesVinculados(o.usuarioVinculado.idusuario,a),this.setState({...this.state,isLoading:!1})):o.usuarioVinculado||t||this.setState({...this.state,isLoading:!0});const s=b.a.get(e,"usuario.idcliente",null),r=b.a.get(this.props,"usuario.idcliente",null);if(r!==s&&r){const{usuario:{idfornecedor:e}}=this.props;this.props.getListaComboPromocional({idfornecedor:e},r)}}render(){const{t:e,loadlistaClientesVinculados:t,listaClientesVinculados:o,usuarioVinculado:{usuarioVinculadoAtual:a},usuarioVinculado:s}=this.props,{newClient:r,authenticating:i}=this.state,n=this.defaultValue()[0],c=r&&a?i||a.idcadastroextracliente===r.idcadastroextracliente:!(!n||!a)&&(i||a.idcadastroextracliente===n.idcadastroextracliente);return Object(g.jsxs)(l.a,{open:s.trocarUsuarioVinculado,style:{marginTop:"0px",margin:"30vh auto"},children:[Object(g.jsx)(l.a.Header,{children:e("usuarios.modal.usuario.vinculado.header")}),Object(g.jsx)(l.a.Content,{children:Object(g.jsx)(l.a.Description,{children:t?Object(g.jsx)(p.a,{}):s&&o.length>0&&Array.isArray(o)?Object(g.jsx)(h.a,{placeholder:"Digite o nome, CPF ou e-mail",fluid:!0,search:!0,selection:!0,options:o.map((e=>({key:e.id_cadastro_extra_cliente,value:{cpf:e.cpf,email:e.email,idcadastroextracliente:e.id_cadastro_extra_cliente,token:e.token,senha:"",principal:e.principal,id_usuario:e.id_usuario,id_fornecedor:e.id_fornecedor},text:"".concat(e.nome," | ").concat(e.cpf," | ").concat(e.email||""),icon:e.principal?"user circle":""}))),onChange:this.getClient,defaultValue:n}):t?Object(g.jsx)(p.a,{}):"Usu\xe1rio sem clientes cadastrados"})}),Object(g.jsxs)(l.a.Actions,{children:[!t&&o.length>0?Object(g.jsx)(u.a,{loading:i,id:"aceitar-controle-cliente",icon:"check",content:"Confirmar",positive:!0,size:"large",onClick:e=>this.handleSubmit(e,this.state)}):"",Object(g.jsx)(u.a,{disabled:c,id:"sair-controle-cliente",icon:"cancel",content:"Cancelar",negative:!0,size:"large",onClick:()=>this.cancelar()})]})]})}}t.default=Object(i.compose)(Object(c.b)(),Object(r.b)(),Object(n.b)((e=>({usuarioVinculado:e.usuarioVinculado,listaClientesVinculados:e.usuarioVinculado.listaClientesVinculados,loadlistaClientesVinculados:e.usuarioVinculado.fetchingData,usuario:e.usuario})),(e=>Object(i.bindActionCreators)({getListaClientesVinculados:d.getListaClientesVinculados,autenticar:d.autenticar,getListaComboPromocional:d.getListaComboPromocional,usuarioVinculo:d.usuarioVinculo},e))))(j)},476:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));const a=()=>!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},477:function(e,t,o){},478:function(e,t,o){"use strict";o.r(t);var a=o(1),s=o.n(a),r=o(56),i=o(21),n=o(38),c=o(267),d=o(34),l=o(821),h=o(806),u=o(820),p=o(274),m=o(6);class b extends s.a.Component{constructor(e){super(e),this.getClient=(e,t)=>{let{value:o}=t;e.preventDefault(),this.setState({...this.state,newUser:o})},this.handleSubmit=(e,t,o)=>{e.preventDefault();const{usuario:a}=o;this.props.autenticar({token:a.token,usuario:t.newUser}),setTimeout((()=>{o.representante.trocarUsuario=!o.representante.trocarUsuario}),1e3)},this.state={isLoading:!0,searchText:"",newUser:null}}componentDidMount(){const{usuarioRepresentante:e}=this.props;e&&(this.props.getListaClientesRepresentante(e.idusuario,e.fornecedorActive.idfornecedor),document.cookie="access=".concat(this.props.usuarioRepresentante.access))}componentDidUpdate(){const{isLoading:e}=this.state,{usuarioRepresentante:t}=this.props;t&&e?(this.props.getListaClientesRepresentante(t.idusuario,t.fornecedorActive.idfornecedor),this.setState({...this.state,isLoading:!1}),document.cookie="access=".concat(this.props.usuarioRepresentante.access)):t||e||this.setState({...this.state,isLoading:!0})}logout(e){if(e.usuarioRepresentante){let t={token:e.usuarioRepresentante.tokenRepresentante,history:e.history};e.logoutUsuario(t),this.setState({...this.state,isLoading:!0})}}render(){const{t:e,usuarioRepresentante:t,loadlistaClientesRepresentante:o,listaClientesRepresentante:a,representante:s}=this.props,{newUser:r}=this.state;return Object(m.jsxs)(l.a,{closeIcon:!0,onClose:()=>this.logout(this.props),open:s.trocarUsuario,style:{marginTop:"0px",margin:"30vh auto"},children:[Object(m.jsx)(l.a.Header,{children:e("modal.representante.header")}),Object(m.jsx)(l.a.Content,{children:Object(m.jsx)(l.a.Description,{children:o?Object(m.jsx)(p.a,{}):t&&a.length>0?Object(m.jsx)(h.a,{placeholder:"Digite o nome, CPF/CNPJ ou idERP",fluid:!0,search:!0,selection:!0,options:a.map((e=>({key:e.idcliente,value:{cpf:e.email,senha:"",idcliente:e.idcliente},text:"".concat(e.nome," | ").concat(e.cpf," | ").concat(e.id_cliente_erp||""," ")}))),onChange:this.getClient}):o?Object(m.jsx)(p.a,{}):"Representante sem clientes cadastrados"})}),Object(m.jsx)(l.a.Actions,{children:!o&&a.length>0&&r?Object(m.jsx)(u.a,{id:"aceitar-controle-cliente",icon:"check",content:"Confirmar",positive:!0,size:"large",onClick:e=>this.handleSubmit(e,this.state,this.props)}):Object(m.jsx)(u.a,{id:"sair-controle-cliente",icon:"check",content:"Sair",negative:!0,size:"large",onClick:()=>this.logout(this.props)})})]})}}t.default=Object(i.compose)(Object(c.b)(),Object(r.b)(),Object(n.b)((e=>({menu:e.menu,usuarioRepresentante:e.representante.usuarioRepresentante,listaClientesRepresentante:e.representante.listaClientesRepresentante,loadlistaClientesRepresentante:e.representante.fetchingData,loadingAuth:e.usuario.fetchingForUser,representante:e.representante,usuario:e.usuario})),(e=>Object(i.bindActionCreators)({logoutUsuario:d.logoutUsuario,getListaClientesRepresentante:d.getListaClientesRepresentante,autenticar:d.autenticar},e))))(b)},479:function(e,t,o){},488:function(e,t,o){"use strict";o.d(t,"a",(function(){return V}));var a=o(1),s=o.n(a),r=o(10),i=o(21),n=o(38),c=o(815),d=o(388),l=o(34),h=o(56),u=o(268),p=o(269),m=o(6);const b={width:"290px",margin:"5px auto"};class g extends s.a.Component{constructor(e){super(e),this._handleClick=this._handleClick.bind(this),this._handleClickConfirmar=this._handleClickConfirmar.bind(this),this._renderCartao=this._renderCartao.bind(this),this._renderNovoCartao=this._renderNovoCartao.bind(this),this._renderListaCartoes=this._renderListaCartoes.bind(this)}componentDidMount(){const{getCreditcards:e,idclient:t,idfornecedor:o,tipoPagamento:a}=this.props;t&&e({idclient:t,idfornecedor:o,tipoPagamento:a})}_handleClick(){const{history:e,match:t}=this.props;"/"===t.url.slice(-1)?e.push("cadastrar-cartao"):e.push(this.props.numpedido+"/cadastrar-cartao")}_handleClickConfirmar(e){const{history:t,match:o}=this.props;"/"===o.url.slice(-1)?t.push("confirmar-cartao"):t.push(this.props.numpedido+"/confirmar-cartao"),this.props.activeCartao(e)}_renderNovoCartao(e){let{t:t}=e;return Object(m.jsx)(c.a,{onClick:this._handleClick,style:{width:"100%",marginTop:"10px"},children:Object(m.jsxs)(c.a.Content,{style:{textAlign:"left"},children:[Object(m.jsx)(u.a,{style:{fontSize:"3em",marginRight:"30px"},icon:p.s}),Object(m.jsxs)("b",{style:{display:"inline-block"},children:[t("modal.cartao.btn.cadastrar"),Object(m.jsx)("br",{}),t("modal.cartao.btn.cadastrar.2")]})]})})}_renderListaCartoes(){const{listaCartoes:e,t:t}=this.props;return e.map((e=>this._renderCartao({cartao:e,t:t})))}_renderCartao(e){let{cartao:t,t:o}=e;return Object(m.jsx)("div",{onClick:()=>this._handleClickConfirmar(t),style:{cursor:"pointer",marginTop:"5px"},children:Object(m.jsx)(d.a,{placeholders:{name:o("modal.cartao.preview.nome.titular")},locale:{valid:o("modal.cartao.preview.validar")},number:t.mask,name:t.holder_name,expiry:t.expiration_date,cvc:""})},t.idcreditcard)}render(){const{t:e}=this.props;return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{style:{marginBottom:"15px"},children:Object(m.jsx)("label",{style:{margin:"auto auto",fontWeight:"bold"},children:e("modal.cartao.listagem")})}),Object(m.jsxs)("div",{style:b,children:[this._renderListaCartoes(),this._renderNovoCartao({t:e})]})]})}}var j=Object(i.compose)(Object(h.b)(),Object(n.b)((e=>({idclient:e.usuario.idcliente,listaCartoes:e.cartao.listaCartoes})),(e=>Object(i.bindActionCreators)({getCreditcards:l.getCreditcards,activeCartao:l.activeCartao},e))))(g),x=o(301),f=o(806),O=o(785),v=o(821),C=o(820),y=o(833),A=o(298),E=o.n(A),k=o(267),_=o(309),S=o(2),w=o(647),M=o.n(w),P=o(3);const N={width:"290px",margin:"5px auto",display:"flex",flexDirection:"column"},T={margin:"5px 0px"},L=(e,t)=>{let o=e;for(;o.includes(t);)o=o.replace(t,"");return o};class I extends s.a.Component{constructor(e){super(e),this.getCaptchaToken=()=>new Promise((e=>{const t=S.get(this.props.fornecedor,"config.tema.config.configuracao.reCaptcha");t&&window.grecaptcha?window.grecaptcha.ready((()=>{window.grecaptcha.execute(t,{action:"submit"}).then((t=>e(t))).catch((()=>{e("")}))})):e("")})),this.travaSubmit=!1,this.state={number:"",name:"",expiry:"",cvc:"",focused:"number",salvarCartao:!1,optEstados:_.b,optPaises:_.a,isPaisEstrangeiro:!1,estadoSelecionado:null,paisSelecionado:null,ableToSaveCard:!1,valorPedido:"0",qtdParcelas:1,methodPayment:"Credit",isDebit:!1,disabled3ds:!1,msgErroPadrao:"Erro ao autenticar cart\xe3o",msgErro3ds:"",alreadyMounted:!1,msgPreReserva:"",preAutorizacao:!1,UtilizarPopUp:!1,dadosCartao:[],confirmarPagamento:!1,abrirModalConfirmarPagamento:!1},this.handleSubmit=this.handleSubmit.bind(this),this.updateCardFocus=this.updateCardFocus.bind(this),this.toggleSalvarCartao=this.toggleSalvarCartao.bind(this),this.setOnState=this.setOnState.bind(this)}componentDidMount(){const{message:e,cleanMessageFinishPayment:t,getTokenGateway:o}=this.props,a=this.props.pedido.pedidos.find((e=>e.numpedido===this.props.numpedido));if(a&&a.dadospedido&&!this.state.alreadyMounted){const e="DEBITO"===S.get(a,"dadospedido.formaPagamento.tipo","");if(a.dadospedido.enderecoentrega){let t=a.dadospedido.enderecoentrega,o="",s="",r="",i="",n="",c="",d="";if(t.bairro&&(o=t.bairro),t.rua&&(s=t.rua),t.numero&&(r=t.numero),t.complemento&&(i=t.complemento),t.cep&&(n=t.cep),t.cidade){const e=t.cidade.split("-");c=e[0],d=e[1]}const l=t&&t.pais||"Brasil",h=S.get(a,"dadospedido.formaPagamento.pre_autorizacao",!1),u=Number(S.get(a,"dadospedido.formaPagamento.margem_adicional",0))/100,p=Number(S.get(a,"totalliquido",0)),m=p+p*u,b=this.props.t("margem.adicional.forma.pagamento.pre.reserva",[m.toFixed(2)]);this.setState({...this.state,faturamento_bairro:o,faturamento_rua:s,faturamento_numero:r,faturamento_complemento:i,faturamento_cep:n,faturamento_cidade:c,estadoSelecionado:d,paisSelecionado:l,isPaisEstrangeiro:"Brasil"!==l,ableToSaveCard:S.get(a,"dadosPagamento.ableToSaveCard",!1),valorPedido:S.get(a,"totalpedido","0").replace(/\D/g,""),qtdParcelas:S.get(a,"formaPagamento.quantParcelas",1),methodPayment:e?"Debit":"Credit",isDebit:e,alreadyMounted:!0,msgPreReserva:b,preAutorizacao:!!u&&h})}e&&o({idfornecedor:S.get(a,"dadospedido.formaPagamento.idfornecedor",""),idformapagamento:S.get(a,"dadospedido.formaPagamento.idformapagto","")})}e&&t()}componentDidUpdate(){S.get(this.props,"gatewayToken.token","")&&(document.getElementById("authEnabled").value=this.state.isDebit||"",document.getElementById("accessToken").value=S.get(this.props,"gatewayToken.token",""),document.getElementById("orderNumber").value=S.get(this.props,"numpedido",""),document.getElementById("amount").value=this.state.valorPedido||"",document.getElementById("installments").value=this.state.qtdParcelas||"",document.getElementById("paymentMethod").value=this.state.methodPayment||"",document.getElementById("billToName").value=S.get(this.props,"usuario.nome",""),document.getElementById("billToPhone").value=S.get(this.props,"usuario.usuario.telefone",""),document.getElementById("billToEmail").value=S.get(this.props,"usuario.email",""),setTimeout((()=>{if(!document.getElementById("3ds")){window.env="PRODUCAO"===S.get(this.props,"gatewayToken.ambiente","")?"PRD":"SDB";const e=document.createElement("script");e.src=window.location.origin+"/js/3ds.js",e.id="3ds",document.body.appendChild(e)}}),500),setTimeout((()=>{if(this.state.isDebit&&!document.getElementById("cielo3ds")){S.get(this.props,"gatewayToken.token","");const e=document.createElement("script");e.src=P.l,e.id="cielo3ds",document.body.appendChild(e)}}),1e3))}componentWillUnmount(){const{cleanTokenGateway:e}=this.props;if(document.getElementById("3ds")){const e=document.getElementById("3ds");e&&e.remove()}if(document.getElementById("cielo3ds")){const e=document.getElementById("cielo3ds");e&&e.remove()}e()}updateCartao3ds(e){let{number:t,expiry:o,faturamento_rua:a,faturamento_numero:s,faturamento_complemento:r,faturamento_bairro:i,faturamento_cidade:n,faturamento_estado:c,faturamento_cep:d}=e;document.getElementById("cardNumber").value=t.replaceAll(" ",""),document.getElementById("expMonth").value=o.split("/")[0],document.getElementById("expYear").value=o.split("/")[1],document.getElementById("billToStreet1").value="".concat(a," ").concat(s),document.getElementById("billToStreet2").value="".concat(r," ").concat(i),document.getElementById("billToCity").value=n,document.getElementById("billToState").value=c,document.getElementById("billToZipCode").value=d}toggleSalvarCartao(){this.setState({...this.state,salvarCartao:!this.state.salvarCartao})}async handleSubmit(e){var t=this;const{confirmarPagamento:o,UtilizarPopUp:a}=this.state;if(!a)return this.setState((t=>({...t,abrirModalConfirmarPagamento:!0,UtilizarPopUp:!0,dadosCartao:e})));let{usuario:{formaPagamentoActive:s}}=this.props;const r="PAGBANK"===s.nome_provider;if(!this.travaSubmit&&o){this.updateCartao3ds(e),this.travaSubmit=!0,this.setState((e=>({...e,abrirModalConfirmarPagamento:!1})));const{numpedido:o,confirmPayment:a,usuario:i,token:n,after_success:c=null,history:d,usuarioVinculado:l}=this.props;e.expiry=L(e.expiry,"_");const h={...e,salvarCartao:this.state.salvarCartao,faturamento_estado:this.state.estadoSelecionado},u=await this.getCaptchaToken(),p=document.getElementById("sessionId").value||"",m=S.get(l.usuarioVinculado,"idusuario")!==S.get(l.usuarioVinculadoAtual,"id_usuario")?S.get(l.usuarioVinculado,"idusuario",""):null,b=S.get(l,"loginAsUsuarioVinculado")||S.get(i,"loginAsUsuarioVinculado")||!1,g=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||d.push(c),t.travaSubmit=!1};if(r){const[e,t]=h.expiry.split("/"),o=window.PagSeguro.encryptCard({publicKey:s.adicional_config.chavePublica,holder:h.name,number:h.number.replace(/\s+/g,""),expMonth:e,expYear:t,securityCode:h.cvc});h.token=o.encryptedCard}if(this.state.isDebit){let e;this.setState({disabled3ds:!0});let t=0;const s=()=>{if(t>12)clearInterval(e),this.setState({disabled3ds:!1}),this.setState({msgErro3ds:this.state.msgErroPadrao});else if(window.complete3ds){if(window.returnCode||window.returnMessage){const e=window.returnCode||window.returnMessage?"".concat(window.returnCode,":").concat(window.returnMessage):this.state.msgErroPadrao;this.setState({msgErro3ds:e})}else{const e={};window.cavv&&(e.Cavv=window.cavv),window.xid&&(e.Xid=window.xid),window.eci&&(e.Eci=window.eci),window.version&&(e.Version=window.version),window.referenceId&&(e.ReferenceID=window.referenceId),a({numpedido:o,creditcard:h,idclient:i.idcliente,idusuariovinculado:m,clientevinculadoprincipal:!b,token:n,sessionId:p,captchaToken:u,externalAuthentication:e,callback:g})}clearInterval(e),this.setState({disabled3ds:!1})}else t+=1};window.sendOrder(),e=setInterval(s,5e3)}else a({numpedido:o,creditcard:h,idclient:i.idcliente,idusuariovinculado:m,clientevinculadoprincipal:!b,token:n,sessionId:p,captchaToken:u,isPagbank:r,callback:g})}}handleErrorMessage(e,t){if(e&&t)return Object(m.jsx)("div",{style:{marginTop:"5px",textAlign:"left",color:"red"},children:e})}handleValidate(e){let t={};return e.number||(t.number="N\xfamero do cart\xe3o \xe9 obrigat\xf3rio"),e.name||(t.name="Nome \xe9 obrigat\xf3rio"),(!e.expiry||L(e.expiry,"_").length<5)&&(t.expiry="Vencimento \xe9 inv\xe1lido"),e.cvc||(t.cvc="CVC \xe9 obrigat\xf3rio"),t}updateCardFocus(e){const{cleanMessageFinishPayment:t,message:o}=this.props;this.setState((t=>({...t,focused:e}))),o&&t()}sizeOfRowCvcAndExpiry(e,t,o,a){return e&&t||o&&a?"58px":"38px"}setOnState(e,t){t(e.event),this.setState({...this.state,[e.event.target.name]:e.event.target.value})}renderPaises(e){const{usesForeignDoc:t}=this.props,{optPaises:o,paisSelecionado:a}=this.state;return t?Object(m.jsx)("div",{children:Object(m.jsx)(f.a,{selection:!0,fluid:!0,id:"pais",placeholder:"Pa\xeds",value:a,onChange:(t,o)=>{const a="Brasil"!==o.value;this.setState({...this.state,paisSelecionado:o.value,isPaisEstrangeiro:a,estadoSelecionado:""},(()=>{e("uf","")}))},options:o})}):""}renderEstado(e,t,o){const{optEstados:a,isPaisEstrangeiro:s,estadoSelecionado:r}=this.state,{t:i}=this.props;return s?Object(m.jsx)(O.a,{id:"faturamento_estado",onChange:(e,t)=>{this.setState({...this.state,estadoSelecionado:t.value})},placeholder:i("modal.cartao.input.estado.placeholder"),error:o.uf&&t.uf,value:e.faturamento_estado,maxLength:"2",fluid:!0}):Object(m.jsx)(f.a,{selection:!0,fluid:!0,id:"faturamento_estado",name:"faturamento_estado",onChange:(e,t)=>this.setState({...this.state,estadoSelecionado:t.value}),options:a,value:r,placeholder:i("modal.cartao.input.estado.placeholder")})}renderMaskCardNumber(e){const t=M()(e)[0];return!t||"american-express"!==t.type&&"diners-club"!==t.type?[/\d/,/\d/,/\d/,/\d/," ",/\d/,/\d/,/\d/,/\d/," ",/\d/,/\d/,/\d/,/\d/," ",/\d/,/\d/,/\d/,/\d/]:[/\d/,/\d/,/\d/,/\d/," ",/\d/,/\d/,/\d/,/\d/,/\d/,/\d/," ",/\d/,/\d/,/\d/,/\d/,/\d/]}renderModalConfirmPayment(){const{t:e}=this.props,{abrirModalConfirmarPagamento:t,dadosCartao:o}=this.state;return Object(m.jsxs)(v.a,{open:t,size:"tiny",style:{marginTop:"0px",margin:"auto"},children:[Object(m.jsx)(v.a.Header,{children:e("modal.cartao.confirmarPagamento.header")}),Object(m.jsx)(v.a.Content,{scrolling:!0,children:Object(m.jsxs)(v.a.Description,{children:[Object(m.jsx)("p",{style:{display:"block",marginBottom:"20px",fontWeight:"600"},children:e("modal.cartao.confirmarPagamento.descricao")}),e("modal.cartao.confirmarPagamento.subDescricao")]})}),Object(m.jsxs)(v.a.Actions,{children:[Object(m.jsx)(C.a,{icon:"close",content:e("modal.cartao.confirmarPagamento.btn.cancelar"),onClick:()=>this.setState((e=>({...e,confirmarPagamento:!1,abrirModalConfirmarPagamento:!1,UtilizarPopUp:!1})))}),Object(m.jsx)(C.a,{icon:"check",content:e("modal.cartao.confirmarPagamento.btn.confirmar"),onClick:()=>{this.setState((e=>({...e,confirmarPagamento:!0,abrirModalConfirmarPagamento:!1}))),setTimeout((()=>{this.handleSubmit(o)}),1e3)},positive:!0})]})]})}render(){const{theme:e,closeMenu:t,message:o,t:a,tipoPagamento:s}=this.props;let{number:r,name:i,expiry:n,cvc:c,focused:l}=this.state,{faturamento_bairro:h,faturamento_rua:u,faturamento_numero:p,faturamento_complemento:b,faturamento_cep:g,faturamento_cidade:j,paisSelecionado:f,estadoSelecionado:v}=this.state;const A="DEBITO"===s;return Object(m.jsxs)("div",{children:[this.renderModalConfirmPayment(),Object(m.jsx)(x.a,{enableReinitialize:!0,initialValues:{number:r,name:i,expiry:n,cvc:c,faturamento_bairro:h||"",faturamento_rua:u||"",faturamento_numero:p||"",faturamento_complemento:b||"",faturamento_cep:g||"",faturamento_cidade:j||"",faturamento_estado:v||"",faturamento_pais:f||""},validate:this.handleValidate,onSubmit:this.handleSubmit,children:s=>{let{values:r,errors:i,touched:n,setFieldValue:c,handleChange:h,handleBlur:u,handleSubmit:p}=s;return Object(m.jsxs)("form",{onSubmit:p,children:[Object(m.jsx)(d.a,{placeholders:{name:a("modal.cartao.preview.nome.titular")},locale:{valid:a("modal.cartao.preview.validar")},number:r.number,name:r.name,expiry:r.expiry,cvc:r.cvc,focused:l}),Object(m.jsxs)("div",{className:"formulario-cartao",style:N,children:[Object(m.jsxs)("div",{style:T,children:[Object(m.jsx)("div",{className:"ui fluid input",children:Object(m.jsx)(E.a,{mask:this.renderMaskCardNumber(S.get(r,"number","")),guide:!0,name:"number",type:"text",onFocus:()=>this.updateCardFocus("number"),onChange:e=>this.setOnState({event:e},h),onBlur:u,value:r.number,placeholder:a("modal.cartao.input.numero.cartao".concat(A?".debito":"",".placeholder"))})}),this.handleErrorMessage(i.number,n.number)]}),Object(m.jsxs)("div",{style:T,children:[Object(m.jsx)(O.a,{fluid:!0,name:"name",type:"text",onFocus:()=>this.updateCardFocus("name"),onChange:e=>this.setOnState({event:e},h),onBlur:u,value:r.name,placeholder:a("modal.cartao.input.nome.placeholder")}),this.handleErrorMessage(i.name,n.name)]}),Object(m.jsxs)("div",{style:{...T,height:this.sizeOfRowCvcAndExpiry(i.expiry,n.expiry,i.cvc,n.cvc)},children:[Object(m.jsxs)("div",{style:{width:"48%",float:"left"},children:[Object(m.jsx)("div",{className:"ui fluid input",children:Object(m.jsx)(E.a,{mask:[/[0-1]/,/[0-9]/,"/",/\d/,/\d/,/\d/,/\d/],guide:!0,name:"expiry",type:"text",onFocus:()=>this.updateCardFocus("expiry"),onChange:e=>this.setOnState({event:e},h),onBlur:u,value:r.expiry,placeholder:a("modal.cartao.input.vencimento.placeholder")})}),this.handleErrorMessage(i.expiry,n.expiry)]}),Object(m.jsxs)("div",{style:{width:"48%",float:"right"},children:[Object(m.jsx)("div",{className:"ui fluid input",children:Object(m.jsx)(E.a,{mask:[/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/],guide:!1,name:"cvc",type:"text",onFocus:()=>this.updateCardFocus("cvc"),onChange:e=>this.setOnState({event:e},h),onBlur:u,value:r.cvc,placeholder:a("modal.cartao.input.cvc.placeholder")})}),this.handleErrorMessage(i.cvc,n.cvc)]})]}),this.state.preAutorizacao&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h4",{style:{marginTop:"8px"},children:"Aten\xe7\xe3o: Pr\xe9-Autoriza\xe7\xe3o de Pagamento"}),Object(m.jsx)("div",{children:this.state.msgPreReserva})]}),Object(m.jsx)("h4",{style:{marginTop:"8px"},children:a("modal.cartao.endereco.cobranca")}),Object(m.jsx)("div",{children:a("modal.cartao.endereco.cobranca.helper")}),Object(m.jsx)("div",{style:T,children:Object(m.jsx)(O.a,{fluid:!0,name:"faturamento_bairro",type:"text",onChange:e=>this.setOnState({event:e},h),onBlur:u,value:r.faturamento_bairro,placeholder:a("modal.cartao.input.bairro.placeholder")})}),Object(m.jsxs)("div",{style:T,children:[Object(m.jsx)("div",{style:{width:"60%",float:"left"},children:Object(m.jsx)(O.a,{fluid:!0,name:"faturamento_rua",type:"text",onChange:e=>this.setOnState({event:e},h),onBlur:u,value:r.faturamento_rua,placeholder:a("modal.cartao.input.rua.placeholder")})}),Object(m.jsx)("div",{style:{width:"36%",float:"right"},children:Object(m.jsx)(O.a,{fluid:!0,name:"faturamento_numero",type:"text",onChange:e=>this.setOnState({event:e},h),onBlur:u,value:r.faturamento_numero,placeholder:a("modal.cartao.input.numero.placeholder")})})]}),Object(m.jsxs)("div",{style:{...T,height:"38px"},children:[Object(m.jsx)("div",{style:{width:"60%",float:"left"},children:Object(m.jsx)(O.a,{fluid:!0,name:"faturamento_complemento",type:"text",onChange:e=>this.setOnState({event:e},h),onBlur:u,value:r.faturamento_complemento,placeholder:a("modal.cartao.input.complemento.placeholder")})}),Object(m.jsx)("div",{style:{width:"36%",float:"right"},children:Object(m.jsx)(O.a,{fluid:!0,name:"faturamento_cep",type:"text",onChange:e=>this.setOnState({event:e},h),onBlur:u,value:r.faturamento_cep,placeholder:"CEP"})})]}),this.renderPaises(c),Object(m.jsxs)("div",{style:{...T,height:"38px"},children:[Object(m.jsx)("div",{style:{width:"60%",float:"left"},children:Object(m.jsx)(O.a,{fluid:!0,name:"faturamento_cidade",type:"text",onChange:e=>this.setOnState({event:e},h),onBlur:u,value:r.faturamento_cidade,placeholder:a("modal.cartao.input.cidade.placeholder")})}),Object(m.jsx)("div",{style:{width:"36%",float:"right"},children:this.renderEstado(r,n,i,h)})]}),this.state.ableToSaveCard?Object(m.jsx)("div",{style:{marginTop:"40px"},children:Object(m.jsx)(y.a,{checked:this.state.salvarCartao,toggle:!0,onChange:this.toggleSalvarCartao,label:a("modal.cartao.salvar.cartao")})}):null,Object(m.jsx)(C.a,{type:"submit",style:{marginTop:"10px",backgroundColor:e.auxiliarColor,color:e.textColor,fontSize:"1em"},loading:this.props.fetchingFinishPayment||this.state.disabled3ds,disabled:this.props.fetchingFinishPayment||window.disabledBtn||this.state.disabled3ds,fluid:!0,children:a("modal.cartao.btn.salvar")}),this.handleErrorMessage(o,!0),this.handleErrorMessage(this.state.msgErro3ds,!0),Object(m.jsx)(C.a,{style:{marginTop:"5px",fontSize:"1em"},onClick:t,fluid:!0,children:a("modal.cartao.btn.cancelar")}),Object(m.jsx)("div",{style:{textAlign:"center"},className:"login-voltar",children:Object(m.jsx)("a",{onClick:()=>this.props.history.goBack(),style:{cursor:"pointer"},children:a("modal.cartao.btn.voltar")})})]})]})}})]})}}var R=Object(i.compose)(Object(k.b)(),Object(h.b)(),Object(n.b)((e=>({message:e.cartao.message,usuario:e.usuario,token:e.usuario.token,fetchingFinishPayment:e.cartao.fetchingFinishPayment,pedido:e.pedido,fornecedor:e.fornecedor.fornecedorActive,gatewayToken:e.cartao.gatewayToken,usuarioVinculado:e.usuarioVinculado})),(e=>Object(i.bindActionCreators)({closeMenu:l.closeMenu,confirmPayment:l.confirmPayment,cleanMessageFinishPayment:l.cleanMessageFinishPayment,getTokenGateway:l.getTokenGateway,cleanTokenGateway:l.cleanTokenGateway},e))))(I);const F={width:"290px",margin:"5px auto"};class B extends s.a.Component{constructor(e){super(e),this.getCaptchaToken=()=>new Promise((e=>{const t=S.get(this.props.fornecedor,"config.tema.config.configuracao.reCaptcha");t&&window.grecaptcha?window.grecaptcha.ready((()=>{window.grecaptcha.execute(t,{action:"submit"}).then((t=>e(t))).catch((()=>{e("")}))})):e("")})),this.state={focused:"number",cvc:"",message:"",travaSubmit:!1,msgPreReserva:"",preAutorizacao:!1},this._updateFocus=this._updateFocus.bind(this),this._renderCard=this._renderCard.bind(this),this.handleInput=this.handleInput.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.removeCard=this.removeCard.bind(this)}componentDidMount(){const e=this.props.pedido.pedidos.find((e=>e.numpedido===this.props.numpedido)),t=S.get(e,"dadospedido.formaPagamento.pre_autorizacao",!1),o=Number(S.get(e,"dadospedido.formaPagamento.margem_adicional",0))/100,a=Number(S.get(e,"totalliquido",0)),s=a+a*o,r=this.props.t("margem.adicional.forma.pagamento.pre.reserva",[s.toFixed(2)]);this.setState({...this.state,msgPreReserva:r,preAutorizacao:!!o&&t})}_updateFocus(e){this.props.cleanMessageFinishPayment(),this.setState({...this.state,focused:e,message:""})}handleInput(e){const{name:t,value:o}=e.target;this.setState({[t]:o})}async handleSubmit(){var e=this;this.setState({travaSubmit:!0});const{numpedido:t,confirmPayment:o,idclient:a,cartao:s,after_success:r=null,history:i,usuario:n,usuarioVinculado:c}=this.props,{cvc:d}=this.state,l={token:s.token,cvc:d,mask:s.mask},h=S.get(c.usuarioVinculado,"idusuario")!==S.get(c.usuarioVinculadoAtual,"id_usuario")?S.get(c.usuarioVinculado,"idusuario",""):null,u=S.get(c,"loginAsUsuarioVinculado")||S.get(n,"loginAsUsuarioVinculado")||!1;if(!d)return void this.setState({...this.state,message:"CVV \xe9 obrigat\xf3rio"});o({numpedido:t,creditcard:l,idclient:a,idusuariovinculado:h,clientevinculadoprincipal:!u,sessionId:document.getElementById("sessionId").value||"",captchaToken:await this.getCaptchaToken(),callback:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.setState({travaSubmit:!1}),t||i.push(r)}})}removeCard(){const{removeCard:e,cartao:t,history:o}=this.props;e(t.idcreditcard),o.goBack()}handleErrorMessage(e,t){if(e&&t)return Object(m.jsx)("div",{style:{marginTop:"5px",textAlign:"left",color:"red"},children:e})}_renderCard(){const{cartao:e}=this.props,{focused:t,cvc:o}=this.state;return e?Object(m.jsx)(d.a,{placeholders:{name:"NOME DO TITULAR"},locale:{valid:"Validade"},number:e.mask,name:e.holder_name,expiry:e.expiration_date,cvc:o,focused:t}):Object(m.jsx)(d.a,{placeholders:{name:"NOME DO TITULAR"},locale:{valid:"Validade"},number:"",name:"",expiry:"",cvc:o,focused:t})}render(){const{message:e,theme:t,t:o}=this.props;return Object(m.jsxs)("div",{children:[this._renderCard(),Object(m.jsxs)("div",{style:F,children:[Object(m.jsx)("div",{className:"ui fluid input",children:Object(m.jsx)(E.a,{mask:[/\d/,/\d/,/\d/,/\d/],guide:!1,onFocus:()=>this._updateFocus("cvc"),onChange:this.handleInput,onBlur:()=>this._updateFocus("number"),name:"cvc",type:"text",placeholder:"CVV do cart\xe3o"})}),this.state.preAutorizacao&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h4",{style:{marginTop:"8px"},children:"Aten\xe7\xe3o: Pr\xe9-Autoriza\xe7\xe3o de Pagamento"}),Object(m.jsx)("div",{children:this.state.msgPreReserva})]}),this.handleErrorMessage(this.state.message,!0),Object(m.jsx)(C.a,{style:{marginTop:"10px",backgroundColor:t.auxiliarColor,color:t.textColor,fontSize:"1em"},onClick:this.handleSubmit,loading:this.props.fetchingFinishPayment||this.state.travaSubmit,disabled:this.props.fetchingFinishPayment||this.state.travaSubmit,fluid:!0,children:o("modal.cartao.btn.confirmar")}),this.handleErrorMessage(e,!0),Object(m.jsx)(C.a,{style:{marginTop:"5px",fontSize:"1em"},onClick:this.removeCard,fluid:!0,children:o("modal.cartao.btn.remover")}),Object(m.jsx)("div",{style:{textAlign:"center"},className:"login-voltar",children:Object(m.jsx)("a",{onClick:()=>this.props.history.goBack(),style:{cursor:"pointer"},children:"Voltar"})})]})]})}}var U=Object(i.compose)(Object(n.b)((e=>({message:e.cartao.message,cartao:e.cartao.ativo,idclient:e.usuario.idcliente,fetchingFinishPayment:e.cartao.fetchingFinishPayment,fornecedor:e.fornecedor.fornecedorActive,usuarioVinculado:e.usuarioVinculado,pedido:e.pedido})),(e=>Object(i.bindActionCreators)({confirmPayment:l.confirmPayment,cleanMessageFinishPayment:l.cleanMessageFinishPayment,removeCard:l.removeCard},e))),Object(k.b)(),Object(h.b)())(B);class D extends s.a.Component{render(){const{match:e,numpedido:t,tipoPagamento:o,idfornecedor:a,usesForeignDoc:s,after_success:i=null}=this.props;return Object(m.jsxs)(r.d,{children:[Object(m.jsx)(r.b,{path:e.url,exact:!0,component:e=>Object(m.jsx)(j,{...e,numpedido:t,idfornecedor:a,usesForeignDoc:s,tipoPagamento:o})}),Object(m.jsx)(r.b,{path:"".concat(e.url,"/cadastrar-cartao"),component:e=>Object(m.jsx)(R,{...e,numpedido:t,usesForeignDoc:s,tipoPagamento:o,after_success:i})}),Object(m.jsx)(r.b,{path:"".concat(e.url,"/confirmar-cartao"),component:e=>Object(m.jsx)(U,{...e,numpedido:t,after_success:i})}),Object(m.jsx)(r.a,{path:"*",to:e.url})]})}}var V=D},489:function(e,t,o){"use strict";o(387);var a=o(826),s=o(493),r=o(827),i=o(21),n=o(38),c=o(12),d=o(1),l=o.n(d),h=o(267),u=o(56),p=o(269),m=o(268),b=o(472),g=o(2),j=o(473),x=o.n(j),f=(o(474),o(6));const O={height:"400px",width:"100%"},v="mapa-leaflet";class C extends d.Component{constructor(e){super(e),this.state={localizacaoAtual:e.coords||null,descricaoEndereco:e.descricaoEndereco||null,dadosEndereco:e.dadosEndereco||null,marker:null},this.startUpMap=this.startUpMap.bind(this)}componentDidMount(){this.startUpMap();const e=this.state.localizacaoAtual;let t=null;e&&(t=this._initMap({lat:e.lat,lng:e.lng,zoom:17}),t&&this._addUsuario({map:t,coords:e}))}startUpMap(){window.google&&window.google.maps&&(this.geocoder=new window.google.maps.Geocoder)}getDadosLocalizacao(e,t){this.geocoder&&this.geocoder.geocode({latLng:e},(e=>{const o=e[0]||null;return this.props.onChange(o),t(o)}))}_initMap(e){let t,{lat:o,lng:a,zoom:s}=e;if(o&&a){try{t=new x.a.Map(v,{center:{lat:o,lng:a},zoom:s}),this._addLayer(t),this._addMapEvents(t)}catch(r){console.log(r)}return t}}_addMapEvents(e){e.on("click",(t=>{this.state.marker&&e.removeLayer(this.state.marker),this._addUsuario({map:e,coords:t.latlng})}))}_addLayer(e){x.a.tileLayer("http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{subdomains:["mt0","mt1","mt2","mt3"]}).addTo(e)}getDescricaoEndereco(){const e=g.get(this.state.dadosEndereco,"formatted_address")||this.state.descricaoEndereco;return"<b>Endere\xe7o escolhido</b><br> ".concat(e)}_addUsuario(e){let{map:t,coords:o}=e;const a=g.get(o,"lat",0),s=g.get(o,"lng",0);a&&s&&this._addMarker({map:t,marker:{lat:a,lng:s,nome:"Endere\xe7o escolhido"},icon:x.a.icon({iconUrl:b.a,iconSize:[48,48]})})}_addMarker(e){let{map:t,marker:o,icon:a}=e;const s=g.get(o,"lat",0),r=g.get(o,"lng",0);if(s&&r){const e=x.a.marker({lat:s,lng:r},{title:o.nome,icon:a}).addTo(t);this.getDadosLocalizacao({lat:s,lng:r},(o=>{this.setState({...this.state,marker:e,dadosEndereco:o}),this._flyTo({map:t,center:{lat:s,lng:r}}),e.bindPopup(this.getDescricaoEndereco()).openPopup()}))}}_flyTo(e){let{map:t,center:o}=e;const a=g.get(o,"lat",0),s=g.get(o,"lng",0);a&&s&&t.flyTo({lat:a,lng:s})}render(){return Object(f.jsx)("div",{id:v,style:O})}}var y=C,A=o(820),E=o(274);class k extends d.Component{constructor(e){super(e),this.state={enderecoAtual:e.endereco||null,loading:!1}}onChange(e,t){t.setState({enderecoAtual:e})}_renderBotaoVoltar(e){return Object(f.jsxs)(A.a,{onClick:e,basic:!0,style:{margin:"0 70px 10px 0px"},children:[Object(f.jsx)(m.a,{icon:p.f,color:"black"}),Object(f.jsx)("span",{style:{marginLeft:"10px"},children:this.props.t("modal.endereco.btn.sair.mapa")})]})}render(){const{endereco:e={},confirmarEndereco:t,sairBuscaMapa:o}=this.props,a=g.get(e,"adr_address")||"";let s,r=g.get(e,"geometry.location")||null;return r&&(s={lat:r.lat(),lng:r.lng()}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{style:{display:"flex",alignItems:"baseline"},children:[this._renderBotaoVoltar(o),Object(f.jsxs)("div",{style:{opacity:"0.7"},children:[Object(f.jsx)(m.a,{icon:p.w,color:"gray"}),Object(f.jsx)("span",{style:{marginLeft:"10px"},children:this.props.t("modal.endereco.btn.alterar.posicao.mapa.ajuda")})]})]}),Object(f.jsx)(y,{coords:s,descricaoEndereco:a,onChange:e=>this.onChange(e,this)}),Object(f.jsx)(A.a,{fluid:!0,primary:!0,onClick:()=>{this.setState({loading:!0}),t(this.state.enderecoAtual.place_id)},children:this.state.loading?Object(f.jsx)(E.a,{}):this.props.t("modal.endereco.btn.confirmar.endereco")})]})}}var _=Object(i.compose)(Object(u.b)(),Object(h.b)())(k),S=(o(636),o(492));o(637);class w extends d.Component{constructor(e){super(e)}_renderBuscaEnderecoBarraIcon(){return Object(f.jsx)("div",{className:"breadcrumb-item",children:Object(f.jsx)(m.a,{icon:p.p,className:"breadcrumb-item"})})}_renderBuscaEnderecoBarraBairro(){const{editarBairro:e,textosEndereco:t=""}=this.props;return Object(f.jsx)("span",{className:"breadcrumb-item",onClick:()=>e(),children:t.bairro})}_renderBuscaEnderecoBarra(){const{editarCidade:e,textosEndereco:t=""}=this.props;return t.cidade?Object(f.jsxs)("div",{className:"breadcrumb",children:[Object(f.jsx)("span",{className:"breadcrumb-item",onClick:()=>e(),children:t.cidade}),t.bairro&&this._renderBuscaEnderecoBarraIcon(),t.bairro&&this._renderBuscaEnderecoBarraBairro()]}):""}render(){return this._renderBuscaEnderecoBarra()}}var M=w;class P extends d.Component{constructor(e){super(e),this.state={foiBuscado:!1,enderecos:[]}}getTextoBuscaAuxiliar(e){return"bairro"===e?this.props.textosEndereco.cidade:"rua"===e?"".concat(this.props.textosEndereco.cidade,", ").concat(this.props.textosEndereco.bairro):""}onChange(e,t){t.changeEndereco(e,t,this.state.tipoEnderecoCorrente)}changeEndereco(e,t){const o="cidade"!==this.state.tipoEnderecoCorrente;t.setState({...t.state,enderecos:e,foiBuscado:o})}_renderEnderecos(e){return e?e.filter((e=>!!e.structured_formatting)).map((e=>this._renderEnderecoRow(e))):""}_renderEnderecoRow(e){return Object(f.jsx)("div",{onClick:()=>this.props.selecionarEndereco(e),children:Object(f.jsxs)("div",{className:"address-search-row",children:[Object(f.jsx)(m.a,{icon:p.x,className:"row-icon"}),Object(f.jsxs)("div",{className:"row-content",children:[Object(f.jsx)("div",{className:"main_text",children:e.structured_formatting.main_text}),Object(f.jsx)("div",{className:"secondary_text",children:e.structured_formatting.secondary_text})]})]})},e.id)}_renderBuscarMapa(){const{t:e,irParaMapa:t}=this.props;return Object(f.jsxs)("div",{className:"list-block help-container",children:[Object(f.jsx)("div",{className:"help-text",children:Object(f.jsx)("p",{style:{opacity:"0.7"},children:e("modal.endereco.msg.completar.cadastro")})}),Object(f.jsxs)("div",{style:{display:"flex"},children:[this._renderBtnLocalizacaoAtual(),Object(f.jsx)(A.a,{onClick:t,fluid:!0,primary:!0,children:e("modal.endereco.btn.buscar.mapa")})]})]})}_renderBtnLocalizacaoAtual(){const{t:e,usarLocalAtual:t,tipoEnderecoCorrente:o}=this.props,a=e("bairro"===o?"modal.endereco.btn.usar.cidade":"modal.endereco.btn.usar.bairro");return Object(f.jsx)(A.a,{onClick:t,fluid:!0,children:a})}render(){const{textoBusca:e="",types:t=[],tipoEnderecoCorrente:o,textosEndereco:a,placeholder:s,editarCidade:r,editarBairro:i}=this.props,n=this.getTextoBuscaAuxiliar(o),c="cidade"!==o;return Object(f.jsxs)("div",{children:[Object(f.jsx)(M,{editarCidade:r,editarBairro:i,textosEndereco:a}),Object(f.jsx)(S.b,{value:e,types:t,placeholder:s,searchText:n,onChange:e=>this.onChange(e,this)}),this._renderEnderecos(this.state.enderecos),c?this._renderBuscarMapa():""]})}}var N=Object(i.compose)(Object(u.b)(),Object(h.b)())(P),T=o(31),L=o(359),I=o(500),R=o(34),F=o(57),B=o(10),U=o(358),D=o(41);const V={textAlign:"center",fontSize:"1.5em",color:"#ababab"};class z extends l.a.Component{constructor(e){super(e),this.state={tipoEntrega:null,textoBusca:"",enderecoSelecionado:{cidade:null,bairro:null,rua:null},foiBuscado:!1,textosEndereco:{cidade:"",bairro:"",rua:""},tipoEnderecoCorrente:"cidade",enderecoMapa:null},this.handleNovoCadastro=this.handleNovoCadastro.bind(this),this.alterarEndereco=this.alterarEndereco.bind(this),this._renderTipoEntrega=this._renderTipoEntrega.bind(this),this.getLojasEmpresa=this.getLojasEmpresa.bind(this),this.setTipoEntrega=this.setTipoEntrega.bind(this),this.irParaMapa=this.irParaMapa.bind(this),this.usarLocalAtual=this.usarLocalAtual.bind(this),this.confirmarEndereco=this.confirmarEndereco.bind(this)}componentDidMount(){const{hasDelivery:e,hasCollect:t}=this.props;e!==t&&e&&this.setState({...this.state,tipoEntrega:T.a}),this.getLojasEmpresa(T.b),this.limparDadosEntrega()}handleToastWarning(e,t,o){const a=e||t("endereco.nao.atendido");c.b.warn(a),o()}handleToastSuccess(e,t,o){c.b.success(e||t("modal.endereco.btn.utilizar.msg")),o()}handleTrocarFornecedor(e,t,o,a){const{slug:s}=t;a(),e&&s!==e&&(o.push("/".concat(e)),window.location.reload())}limparDadosEntrega(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({...this.state,enderecoSelecionado:{cidade:null,bairro:null,rua:null},foiBuscado:!1,textosEndereco:{cidade:"",bairro:"",rua:""},tipoEnderecoCorrente:"cidade",enderecoMapa:null,...e})}handleNovoCadastro(){const{activeMenuNovoEndereco:e}=this.props;e()}alterarEndereco(e){const{closeMenu:t,updateEnderecoComFornecedorAtivo:o,fornecedor:{fornecedorActive:a},history:s,usuario:{idcliente:r,token:i},t:n}=this.props;o({endereco:e,idcliente:r,token:i,fornecedorActive:a,actionError:e=>this.handleToastWarning(e,n,t),actionSuccess:e=>this.handleToastSuccess(e,n,t),actionTrocarFornecedor:e=>this.handleTrocarFornecedor(e,a,s,t)})}getLojasEmpresa(e){const{getFornecedoresByIdempresa:t,fornecedor:{fornecedorActive:{idempresa:o}},usuario:{token:a}}=this.props;t({idempresa:o,token:a,tipoEntrega:e}),this.setState({...this.state,tipoEntrega:e})}setTipoEntrega(e){this.setState({...this.state,tipoEntrega:e})}selecionarEndereco(e,t){let o="cidade",a={...this.state.textosEndereco},s={...this.state.enderecoSelecionado,[t]:e};switch(t){case"cidade":o="bairro",a={...a,cidade:g.get(e,"description")||""};break;case"bairro":o="rua",a={...a,bairro:g.get(e,"structured_formatting.main_text")||""};break;case"rua":o="",this.atualizarEndereco(e.place_id)}this.setState({...this.state,tipoEnderecoCorrente:o,textosEndereco:a,textoBusca:"",enderecoSelecionado:s})}getDetalhesEndereco(e){return new Promise((t=>{if(!e||!window.google)return t();new window.google.maps.places.PlacesService(document.getElementById("places-service")).getDetails({placeId:e},(e=>t(e)))}))}atualizarEndereco(e){const{usuario:{idcliente:t,token:o},closeMenu:a,updateEnderecoComFornecedorAtivo:s,fornecedor:{fornecedorActive:r},history:i,t:n}=this.props;this.getDetalhesEndereco(e).then((e=>{if(e&&e.geometry){let{location:c}=e.geometry;const d={lat:c.lat(),lng:c.lng()};s({token:o,idcliente:t,endereco:d,fornecedorActive:r,location:e,actionError:e=>this.handleToastWarning(e,n,a),actionSuccess:e=>this.handleToastSuccess(e,n,a),actionTrocarFornecedor:e=>this.handleTrocarFornecedor(e,r,i,a)})}}))}getUltimoEnderecoSelecionado(e){const{cidade:t,bairro:o,rua:a}=e.state.enderecoSelecionado;let s=t;return a?s=a:o&&(s=o),s}irParaMapa(){const e=g.get(this.getUltimoEnderecoSelecionado(this),"place_id")||null;this.getDetalhesEndereco(e).then((e=>{this.setState({...this.state,enderecoMapa:e})}))}usarLocalAtual(){const e=g.get(this.getUltimoEnderecoSelecionado(this),"place_id")||null;this.atualizarEndereco(e)}sairBuscaMapa(e){e.setState({...this.state,enderecoMapa:null})}confirmarEndereco(e){this.atualizarEndereco(e)}editarCidade(e){const t={...e.state.textosEndereco,bairro:"",rua:"",cidade:""},o={...e.state.enderecoSelecionado,bairro:[],rua:[],cidade:[]};e.editarDadosPesquisa(e,"cidade",t,o)}editarBairro(e){const t={...e.state.textosEndereco,bairro:"",rua:""},o={...e.state.enderecoSelecionado,bairro:[],rua:[]};e.editarDadosPesquisa(e,"bairro",t,o)}editarDadosPesquisa(e,t,o,a){e.setState({...e.state,tipoEnderecoCorrente:t,textosEndereco:o,enderecoSelecionado:a,textoBusca:""})}_renderBusca(e){const{t:t,representante:o}=this.props,{textoBusca:a,textosEndereco:s,tipoEnderecoCorrente:r,foiBuscado:i}=this.state,n="cidade"===e?["(regions)"]:[];return Object(f.jsx)("div",{children:o&&o.loginAsRepresentante?"":Object(f.jsx)(N,{placeholder:t("modal.endereco.input.pesquisar.".concat(e,".placeholder")),textoBusca:a,textosEndereco:s,tipoEnderecoCorrente:r,types:n,foiBuscado:i,onChange:e=>this.onChange(e,this),irParaMapa:this.irParaMapa,usarLocalAtual:this.usarLocalAtual,selecionarEndereco:t=>this.selecionarEndereco(t,e),editarCidade:()=>this.editarCidade(this),editarBairro:()=>this.editarBairro(this)},e)})}_renderAutoComplete(){const{tipoEnderecoCorrente:e,enderecoMapa:t}=this.state,o={display:"cidade"===e?"block":"none"},a={display:"bairro"===e?"block":"none"},s={display:"rua"===e?"block":"none"};return Object(f.jsxs)("div",{style:{display:t?"none":"block"},children:[Object(f.jsx)("div",{id:"places-service"}),Object(f.jsx)("div",{style:o,children:this._renderBusca("cidade")}),Object(f.jsx)("div",{style:a,children:this._renderBusca("bairro")}),Object(f.jsx)("div",{style:s,children:this._renderBusca("rua")})]})}_renderMapaBusca(){return Object(f.jsx)("div",{children:Object(f.jsx)(_,{endereco:this.state.enderecoMapa,getDetalhesEndereco:this.getDetalhesEndereco,confirmarEndereco:e=>this.confirmarEndereco(e),sairBuscaMapa:()=>this.sairBuscaMapa(this)})})}_renderTipoEntrega(){const{theme:e,t:t}=this.props;return Object(f.jsx)(I.a,{render:o=>{let{tipoEntregaAtivo:s,handleClick:r}=o;const i={marginLeft:"25px",height:"100%"},n={color:W(e),width:"100%",marginTop:"0px"},c={backgroundColor:e.auxiliarColor,borderColor:e.auxiliarColor,color:e.textColor},d={width:"47%",overflow:"hidden",height:"100px",borderRadius:"10px",border:"solid 3px",borderColor:W(e),color:W(e),display:"flex",alignItems:"center",cursor:"pointer",margin:"0.5em"};return Object(f.jsx)("div",{className:"tipo-entrega-container",children:Object(f.jsxs)(a.a,{centered:!0,columns:16,children:[Object(f.jsx)(a.a.Row,{columns:16,className:"main-content",children:Object(f.jsx)("div",{style:V,children:Object(f.jsxs)("span",{children:[" ",t("modal.endereco.body.header.1")," "]})})}),Object(f.jsxs)(a.a.Row,{columns:16,className:"main-content",children:[Object(f.jsxs)("div",{style:{...d,...s===T.a?c:{}},className:"do-not-close-modal btn-delivery",onClick:()=>r(T.a,(e=>this.limparDadosEntrega({tipoEntrega:e}))),children:[Object(f.jsx)("div",{style:i,children:Object(f.jsx)(U.a.Delivery,{width:"80",color:s===T.a?e.textColor:W(e)})}),Object(f.jsx)("h2",{style:{...n,...s===T.a?c:{}},children:t("hidden.pesquisa.endereco.btn.delivery")})]}),Object(f.jsxs)("div",{style:{...d,...s===T.b?c:{}},className:"do-not-close-modal btn-delivery",onClick:()=>r(T.b,(e=>this.setState({...this.state,tipoEntrega:e}))),children:[Object(f.jsx)("div",{style:i,children:Object(f.jsx)(U.a.Retirada,{width:"70",color:s===T.b?e.textColor:W(e)})}),Object(f.jsx)("h2",{style:{...n,...s===T.b?c:{}},children:t("hidden.pesquisa.endereco.btn.retirada")})]})]})]})})}})}_renderSelecionarFornecedorEndereco(e){let{_TipoEntrega:t}=e;const{theme:o,usuario:{idcliente:a},closeMenu:s,commerceLimparCarrinho:r,fornecedor:{fornecedoresPorEndereco:i,fornecedorActive:n},history:c,t:d,hasCollect:l,hasDelivery:h,enderecos:u}=this.props,p=u.length>0&&this.props.singleAddress;return Object(f.jsxs)("div",{children:[l&&h?Object(f.jsxs)(t,{children:[Object(f.jsx)("div",{children:this._renderTipoEntrega()}),p?Object(f.jsx)(L.b,{theme:o,onAlterarEndereco:this.alterarEndereco,cardCadastrarNovo:!p,onClickCardCadastrarNovo:()=>this.handleNovoCadastro()}):Object(f.jsx)("h2",{style:V,children:d("modal.endereco.novo.delivery.fornecedores.body.header")})]}):Object(f.jsx)(L.b,{theme:o,onAlterarEndereco:this.alterarEndereco,cardCadastrarNovo:!p,onClickCardCadastrarNovo:()=>this.handleNovoCadastro()}),Object(f.jsx)(q,{theme:o,setFornecedorActive:e=>{let{slug:t,idfornecedor:o}=e;s(),c.push("/".concat(t||o,"?fselecionado=").concat(o)),window.location.reload()},closeMenu:s,commerceLimparCarrinho:r,idcliente:a,fornecedores:i,fornecedorActive:n,t:d})]})}_renderSelecaoBasica(e){let{_TipoEntrega:t,t:o}=e;const a=!!this.state.enderecoMapa,{hasCollect:s,hasDelivery:r,enderecos:i}=this.props,n=i.length>0&&this.props.singleAddress;return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{style:{display:a?"none":"block"},children:[s&&r?Object(f.jsx)(t,{children:Object(f.jsx)("div",{children:this._renderTipoEntrega()})}):"",Object(f.jsxs)("div",{style:{display:n?"none":"block"},children:[Object(f.jsx)("h2",{style:V,children:o("modal.endereco.novo.delivery.body.header")}),this._renderAutoComplete()]})]}),a&&this._renderMapaBusca()]})}render(){const{t:e,authenticated:t,enderecos:o,fornecedor:{lojasEmpresa:a,fornecedorActive:s,tipoEntrega:r},history:i,closeMenu:n,hasDelivery:c,hasCollect:d,theme:l,commerceLimparCarrinho:h,usuario:{idcliente:u},fornecedoresPorEndereco:p,active:m}=this.props,b=o.length>0&&this.props.singleAddress,g=e=>{let{children:t}=e;return c||d?t:null},j=d&&!c,x=b&&1===o.length&&r!==T.b;return p||x?this._renderSelecionarFornecedorEndereco({_TipoEntrega:g}):r===T.b||j?Object(f.jsxs)("div",{children:[Object(f.jsx)(g,{children:Object(f.jsx)("div",{children:this._renderTipoEntrega()})}),b?null:Object(f.jsx)("h2",{style:V,children:e("modal.endereco.novo.retirada.body.header")}),Object(f.jsx)(q,{theme:l,setFornecedorActive:e=>{let{slug:t,idfornecedor:o}=e;n(o),i.push("/".concat(t||o,"?fselecionado=").concat(o)),window.location.reload()},closeMenu:n,commerceLimparCarrinho:h,idcliente:u,fornecedores:a,fornecedorActive:s,t:e})]}):t&&o.length&&!m?Object(f.jsxs)("div",{children:[c&&d?Object(f.jsx)(g,{children:Object(f.jsx)("div",{children:this._renderTipoEntrega()})}):"",b?null:Object(f.jsx)("h2",{style:V,children:e("modal.endereco.body.header.2")}),Object(f.jsx)(L.b,{theme:l,onAlterarEndereco:this.alterarEndereco,cardCadastrarNovo:!b,onClickCardCadastrarNovo:()=>this.handleNovoCadastro()})]}):this._renderSelecaoBasica({_TipoEntrega:g,t:e})}}const q=e=>{const{fornecedorActive:{idfornecedor:t},setFornecedorActive:o,fornecedores:a,theme:i,idcliente:n,commerceLimparCarrinho:c,closeMenu:d,t:l}=e,h=e=>{let{active:t}=e;return t?Object(f.jsx)(s.a,{horizontal:!0,style:{float:"right",backgroundColor:i.primaryColor,color:i.textColor},children:l("modal.endereco.btn.selecionado")}):null};return a?Object(f.jsx)(r.a.Group,{children:(a||[]).map((e=>{const a=e.idfornecedor===t;return Object(f.jsxs)(r.a,{style:{cursor:"pointer",minHeight:"60px"},onClick:()=>(e=>{let{idfornecedorActive:t,fornecedor:a,idcliente:s}=e;t!==a.idfornecedor?(s||c(),Object(R.cleanEnderecoAtivo)(),o(a)):d()})({idfornecedorActive:t,fornecedor:e,idcliente:n}),children:[Object(f.jsxs)("strong",{children:[" ",e.nome," "]}),Object(f.jsx)("br",{}),Object(f.jsxs)("span",{children:[" ",g.get(e,"meta_info.descricao_endereco_loja",void 0)," "]}),Object(f.jsx)(h,{active:a})]},e.idfornecedor)}))}):""},W=e=>{let{primaryColor:t,textColor:o}=e;return"#FFFFFF"!==t.toUpperCase()?t:o};t.a=Object(i.compose)(Object(n.b)((e=>({menu:e.menu,authenticated:e.usuario.authenticated,usuario:e.usuario,fornecedor:e.fornecedor,hasDelivery:Object(F.d)(e,"has-delivery"),hasCollect:Object(F.d)(e,"has-collect"),singleAddress:Object(D.d)(e,"uses-single-address"),enderecos:e.endereco.enderecos,fornecedoresPorEndereco:e.fornecedor.fornecedoresPorEndereco,representante:e.representante.usuarioRepresentante})),(e=>Object(i.bindActionCreators)({getFornecedoresByLocation:R.getFornecedoresByLocation,setEndereco:R.setEndereco,closeMenu:R.closeMenu,cleanFornecedorActive:R.cleanFornecedorActive,updateEnderecoComFornecedorAtivo:R.updateEnderecoComFornecedorAtivo,activeMenuNovoEndereco:R.activeMenuNovoEndereco,getFornecedoresByIdempresa:R.getFornecedoresByIdempresa,setFornecedorActive:R.setFornecedorActive,cleanEnderecoAtivo:R.cleanEnderecoAtivo,commerceLimparCarrinho:R.commerceLimparCarrinho},e))),Object(h.b)(),Object(u.b)(),B.g)(z)},519:function(e,t,o){},530:function(e,t,o){},534:function(e,t,o){},539:function(e,t,o){},636:function(e,t,o){},637:function(e,t,o){},642:function(e,t,o){},653:function(e,t,o){},670:function(e,t,o){},671:function(e,t,o){},674:function(e,t,o){},675:function(e,t,o){},676:function(e,t,o){},677:function(e,t,o){},678:function(e,t,o){},679:function(e,t,o){},680:function(e,t,o){},770:function(e,t,o){"use strict";o.r(t);var a=o(1),s=o(827),r=o(824),i=o(786),n=o(6);function c(){return Object(n.jsx)(s.a,{className:"loading-container",children:Object(n.jsx)(r.a,{active:!0,inverted:!0,children:Object(n.jsx)("div",{children:Object(n.jsx)(i.a,{})})})})}var d=o(34),l=o(21),h=o(38),u=o(10),p=o(12);class m extends a.Component{componentDidMount(){let{match:{params:{token:e,idfornecedor:t,email:o}},history:a,loginByToken:s}=this.props;s(e,o,a,"/".concat(t,"/"),"",(e=>{e?p.b.error(e):p.b.success("Login efetuado via token de redirecionamento"),a.replace("/".concat(t,"/"))}))}render(){return Object(n.jsx)(c,{})}}t.default=Object(l.compose)(u.g,Object(h.b)((e=>({fornecedorActive:e.fornecedor.fornecedorActive})),(e=>Object(l.bindActionCreators)({loginByToken:d.loginByToken},e))))(m)},805:function(e,t,o){"use strict";o.r(t),o.d(t,"ProtectedCommerce",(function(){return ro}));var a=o(1),s=o.n(a),r=(o(518),o(519),o(520)),i=o(787),n=o(826),c=o(493),d=o(10),l=o(12),h=o(21),u=o(38),p=o(56),m=o(2),b=o(31),g=o(34),j=o(295),x=o(267),f=o(816),O=o(808),v=o(22),C=o(6);const y={backgroundColor:"rgba(0,0,0,0.5)",zIndex:"5",position:"fixed",right:"0",bottom:"0",minWidth:"100%",minHeight:"100%"};var A=Object(h.compose)(Object(u.b)((e=>({active:e.menu.active,direction:e.menu.direction})),(e=>Object(h.bindActionCreators)({closeMenu:g.closeMenu},e))))((e=>{const{active:t,closeMenu:o,direction:a}=e,s=!!t&&("".concat(t)||"").includes(v.i);return Object(C.jsxs)(f.a.Pushable,{as:"div",children:[Object(C.jsx)(f.a,{className:"menu-lateral-mobile",as:O.a,style:{border:"0px",minHeight:"initial"},animation:"overlay",direction:a,width:"wide",visible:s,icon:"labeled",vertical:!0,children:e.render()}),Object(C.jsxs)(f.a.Pusher,{children:[t&&Object(C.jsx)("div",{style:y,onClick:()=>{t&&o()}}),e.pusher()]})]})})),E=o(771),k=o(3),_=o(277),S=o(358),w=o(41),M=(o(530),o(104));const P={borderRadius:"50px",cursor:"pointer"};var N=Object(h.compose)(d.g,j.a,Object(u.b)((e=>({tipoEntrega:e.fornecedor.tipoEntrega,endereco:e.endereco,fornecedorActive:e.fornecedor.fornecedorActive,paginasEstaticas:e.conteudo.paginasEstaticas,usuario:e.usuario,singleAddress:Object(w.d)(e,"uses-single-address"),loadingProdutos:e.commerceSearch.isLoading,sugestoes:e.commerceSearch.sugestoes||[],chatNotificacoes:e.chat.notificacoes,representante:e.representante,usuarioVinculado:e.usuarioVinculado})),(e=>Object(h.bindActionCreators)({activeMenuEndereco:g.activeMenuEndereco,logoutUsuario:g.logoutUsuario,updatePageAfterLogin:g.updatePageAfterLogin,setFormaPagamentoActive:g.setFormaPagamentoActive,activeMenuEnderecoMobile:g.activeMenuEnderecoMobile,activeMenuFormaPagamentoMobile:g.activeMenuFormaPagamentoMobile,activeMenuCupom:g.activeMenuCupom,activeMenuAtualizarCadastro:g.activeMenuAtualizarCadastro,activeMenuAtualizarUsuario:g.activeMenuAtualizarUsuario,getFornecedorCaracteristicasCliente:g.getFornecedorCaracteristicasCliente,getCarrosselForPage:g.getCarrosselForPage,closeMenu:g.closeMenu,obterNovasSugestoes:g.obterNovasSugestoes,getListaClientesRepresentante:g.getListaClientesRepresentante,autenticar:g.autenticar,logoutUsuarioRepresentante:g.logoutUsuarioRepresentante,autenticarRepresentante:g.autenticarRepresentante,commerceLimparCarrinho:g.commerceLimparCarrinho,atualizarConfiguracoesCliente:g.atualizarConfiguracoesCliente,cancelRequest:g.cancelRequest},e))),Object(x.b)(),Object(p.b)(),(e=>class extends s.a.Component{constructor(e){super(e),this.searchOnKeyEnter=()=>{const{fornecedorActive:{idfornecedor:e,slug:t}}=this.props;if(this.state.searchText&&this.state.searchText.length>0){const o=(this.state.searchText||"").replace(/[&]/g,"");this.props.history.push("/".concat(t||e,"?query=").concat(o))}this.setState({...this.state,overlayVisibility:!1})};const{fornecedorActive:{idfornecedor:t},theme:o}=e;o||console.error("MenuContainer sempre deve ser incapuslado pelo withTheme");const a=new URLSearchParams(m.get(this.props.history,"location.search",""));this.state={logoLoaded:!1,tentatives:0,srcLogo:["".concat(k.b,"/logos/commerce/").concat(t,"?cache=true"),"".concat(k.b,"/logos/").concat(t,"?cache=true"),null],focus:!1,searchText:a.get("query")||"",overlayVisibility:!1},this.renderLogo=this.renderLogo.bind(this),this._manageLogoState=this._manageLogoState.bind(this),this.handleMenuItem=this.handleMenuItem.bind(this),this.handleLogout=this.handleLogout.bind(this),this.setFormaPagamentoActive=this.setFormaPagamentoActive.bind(this),this.hasFormasPagamento=this.hasFormasPagamento.bind(this),this.getInfo=this.getInfo.bind(this),this.updateSearchText=this.updateSearchText.bind(this),this.renderLabelEndereco=this.renderLabelEndereco.bind(this),this.handleSuggestionClick=this.handleSuggestionClick.bind(this)}componentDidUpdate(e){const t=new URLSearchParams(m.get(e,"location.search","")),o=new URLSearchParams(m.get(this.props.history,"location.search","")).get("query")||"";(t.get("query")||"")!==o&&this.setState({...this.state,searchText:o})}handleLogout(){const{logoutUsuario:e,usuario:{token:t},history:o,fornecedorActive:{idfornecedor:a,slug:s}}=this.props;e({token:t}),o.push("/".concat(s||a))}handleSuggestionClick(e){const{history:t,fornecedorActive:{idfornecedor:o,slug:a}}=this.props,s="/".concat(a||o,"/produto/").concat(e,"/");t.push(s)}handleMenuItem(e){let{type:t}=e;const{activeMenuEnderecoMobile:o,activeMenuFormaPagamentoMobile:a,activeMenuEndereco:s,activeMenuCupom:r,activeMenuAtualizarCadastro:i,activeMenuAtualizarUsuario:n,updatePageAfterLogin:c,closeMenu:d,usuario:l,representante:h,getListaClientesRepresentante:u,commerceLimparCarrinho:p,usuarioVinculado:m,cancelRequest:b}=this.props,{history:j,fornecedorActive:{idfornecedor:x,slug:f,tag:O},usuario:{token:v,idcliente:C}}=this.props;let y=f||x;switch(t){case"PEDIDO":return j.push("/"+y+"/pedidos/"),!0;case"ENDERECO":return s({token:v,idcliente:C}),!0;case"ENDERECO_MOBILE":return o({token:v,idcliente:C}),!0;case"LOGIN_MOBILE":return c(""),d(),j.push("/"+y+"/login"),!0;case"LOGIN":return c(""),j.push("/".concat(y,"/login?after_login=").concat(j.location.pathname)),!0;case"ATUALIZAR_CADASTRO":return c(""),this.props.getFornecedorCaracteristicasCliente({idfornecedor:x}),i(),!0;case"FATURAS":return j.push("/".concat(y,"/cliente/faturas/")),!0;case"FORMA_PAGAMENTO_MOBILE":return a(),!0;case"FORMA_PAGAMENTO":case"INFO":default:return!0;case"LOGO":return b(!0),j.push("/"+y+"/"),!0;case"CUPOM":return r({token:v,idcliente:C,tag:O,idformapagamento:l.formaPagamentoActive.idformapagto}),!0;case"LISTA_COMPRAS":return j.push("/".concat(y,"/lista-compras/")),!0;case"COMBO_PROMOCIONAL":return j.push("/".concat(y,"/combo-promocional/")),!0;case"TROCAR_CLIENTE_REPRESENTANTE":return h&&h.usuarioRepresentante&&(Object(g.logoutUsuarioRepresentante)({token:v}),h.trocarUsuario=!h.trocarUsuario,u(h.usuarioRepresentante.idusuario,x),p(),M.a),!0;case"USUARIO":return j.push("/"+y+"/usuarios"),!0;case"TROCAR_USUARIO_VINCULADO":return m&&m.listaClientesVinculados.length>1&&(Object(g.logoutUsuarioVinculado)({token:m.usuarioVinculado.token}),m.trocarUsuarioVinculado=!m.trocarUsuarioVinculado,Object(g.getListaClientesVinculados)(m.usuarioVinculado.idusuario,m.usuarioVinculadoAtual.idfornecedor),p(),M.a,j.push("/"+y+"/")),!0;case"ATUALIZAR_USUARIO":return c(""),n(),!0}}renderLogo(){const{srcLogo:e,tentatives:t}=this.state,o=e[t];return Object(C.jsx)("div",{children:Object(C.jsx)(E.a,{style:{maxHeight:"122px",width:"unset"},src:o,onError:()=>{this.setState({...this.state,tentatives:t+1})}})})}_manageLogoState(){const{theme:e,theme:{idfornecedor:t}}=this.props;e.themeLoaded&&t&&!this.state.logoLoaded&&this.setState({...this.state,srcLogo:["".concat(k.b,"/logos/commerce/").concat(t,"?cache=true"),"".concat(k.b,"/logos/").concat(t,"?cache=true"),null],logoLoaded:!0})}hasFormasPagamento(){const{usuario:{formaPagamentoActive:e},fornecedorActive:{formasPagamento:t,tag:o}}=this.props;return!!(o&&o.includes("support-price-variance-by-payment")&&t)&&{formaPagamentoActive:e,formasPagamento:t}}setFormaPagamentoActive(e){const{setFormaPagamentoActive:t}=this.props;t(e)}getInfo(){const{fornecedorActive:e,usuario:t,tipoEntrega:o}=this.props;if(!e||!e.meta_info)return!1;let a="Selecione o endere\xe7o primeiro";o===b.b?a=Object(_.a)(!0,e.taxa_coleta||0):e.meta_info.fee_meta&&(a=Object(_.a)(!0,e.meta_info.fee_meta.fee));let s="Selecione o endere\xe7o primeiro";if(t.formaPagamentoActive||e.valorminpedido){let a=0,r=0;if(t.formaPagamentoActive&&t.formaPagamentoActive.min_pedido)a=+t.formaPagamentoActive.min_pedido;else{a=+(o===b.b?e.meta_info.valorminpedido_retirada||0:e.meta_info.valorminpedido||0)}e.meta_info.minimum_purchase_meta&&(r=+e.meta_info.minimum_purchase_meta.extraDistanceFee||0),s=Object(_.a)(!0,a+r)}let r="Fechado";if(e.horarios){let t=(e.horarios||[]).find((e=>e.dia===(new Date).getDay()));t&&t.efetuaentregas&&(r=t.horainicio+" \xe0s "+t.horafim)}return{taxa:a,horarioHoje:r,pedidoMinimo:s}}updateSearchText(e){const{fornecedorActive:{idfornecedor:t,slug:o}}=this.props;this.state.searchText&&this.state.searchText.length>0&&0===e.length&&this.props.history.push("/".concat(o||t)),this.setState({...this.state,searchText:e,overlayVisibility:e.length>0});this.props.fornecedorActive.tag.includes("allow-search-suggestion")&&this.updateSuggestions(e)}updateSuggestions(e){this.props.obterNovasSugestoes(e)}renderLabelEndereco(e){const{tipoEntrega:t,endereco:o,fornecedorActive:a,theme:s,t:r}=this.props,i=o.length>0&&this.props.singleAddress,n={verticalAlign:"middle",marginRight:"5px"},d={...P,backgroundColor:s.textColor,color:s.primaryColor,marginLeft:"10px"},l=t===b.b,h="".concat(r(l?"header.retirada":"header.delivery"),": "),u=l?Object(C.jsx)(S.a.Retirada,{width:"25",color:s.textColor}):Object(C.jsx)(S.a.Delivery,{width:"25",color:s.textColor}),p=l?()=>{let e="";return a.nome&&(e+=a.nome),m.get(a,"meta_info.descricao_endereco_loja","")&&(e+=" - "+m.get(a,"meta_info.descricao_endereco_loja","")),Object(C.jsxs)("span",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[Object(C.jsxs)("span",{style:n,children:[u," "]}),Object(C.jsx)("strong",{style:n,children:e?h:r("header.escolha.loja")}),Object(C.jsx)("span",{style:n,children:(e||"")+" "})]})}:()=>{if(o.idendereco){let e=o.descricao||o.textoendereco||"Endere\xe7o";return e+=" ",Object(C.jsxs)("span",{children:[Object(C.jsxs)("span",{style:n,children:[u," "]}),Object(C.jsx)("strong",{style:n,children:h}),Object(C.jsx)("span",{style:n,children:e+" "})]})}return o.textoendereco?Object(C.jsxs)("span",{children:[Object(C.jsxs)("span",{style:n,children:[u," "]}),Object(C.jsx)("strong",{style:n,children:h}),Object(C.jsx)("span",{style:n,children:o.textoendereco+" "})]}):i?Object(C.jsx)("strong",{children:"Escolha a forma de entrega "}):Object(C.jsx)("strong",{children:r("header.escolha.endereco")})};return Object(C.jsxs)("div",{style:{textAlign:"left"},children:[Object(C.jsx)("div",{style:{display:"inline-block",maxWidth:"75%",verticalAlign:"middle",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Object(C.jsx)(p,{})}),Object(C.jsxs)(c.a,{onClick:e,style:d,as:"span",children:[" ",r("header.btn.trocar")," "]})]})}render(){return Object(C.jsxs)("div",{className:this.state.overlayVisibility?"search-open":"",children:[Object(C.jsx)("div",{className:"overlay-search",onClick:()=>this.setState({...this.state,overlayVisibility:!1})}),Object(C.jsx)("div",{id:"search-container",children:Object(C.jsx)(e,{handleLogout:this.handleLogout,handleMenuItem:this.handleMenuItem,search:this.state.searchText,handleInputEdit:this.updateSearchText,handleInputFocus:()=>this.setState({...this.state,overlayVisibility:!0,focus:!0}),setFocus:e=>this.setState({...this.state,focus:e}),handleSuggestionClick:this.handleSuggestionClick,handleKeyEnter:this.searchOnKeyEnter,hasFormasPagamento:this.hasFormasPagamento,setFormaPagamentoActive:this.setFormaPagamentoActive,labelEndereco:this.renderLabelEndereco,getInfo:this.getInfo,tentatives:this.state.tentatives,logo:this.renderLogo,focus:this.state.focus,inputReadonly:this.props.loadingProdutos,searchSuggestions:this.props.sugestoes,chatNotificacoes:this.props.chatNotificacoes,...this.props})})]})}})),T=o(408);var L=Object(h.compose)(d.g,Object(u.b)((e=>({carrinho:e.carrinho,idfornecedor:e.fornecedor.fornecedorActive.idfornecedor,slugLoja:e.fornecedor.fornecedorActive.slug,listaTemPrecos:e.commerceSearch.listaTemPrecos,formaPagamentoActive:e.usuario.formaPagamentoActive,usuario:e.usuario,fornecedorActive:e.fornecedor.fornecedorActive,custoEntrega:m.get(e,"pedido.formaEntregaActive.custo_final_entrega",0),fornecedor:e.fornecedor})),(e=>Object(h.bindActionCreators)({carregarCarrinho:g.carregarCarrinho},e))),Object(x.b)(),(e=>class extends s.a.Component{constructor(e){super(e),e.theme||console.error("CarrinhoContainer sempre deve ser incapuslado pelo withTheme"),this.state={lastFormaPagto:e.formaPagamentoActive.idformapagto||"",lastIdcliente:e.usuario.idcliente||"",lastTipoEntrega:e.fornecedor.tipoEntrega},this.clickHandler=this.clickHandler.bind(this)}componentDidUpdate(){const{formaPagamentoActive:e,carregarCarrinho:t,fornecedorActive:o,usuario:{token:a,idcliente:s},carrinho:r,fornecedor:{tipoEntrega:i}}=this.props,{lastFormaPagto:n,lastIdcliente:c,lastTipoEntrega:d}=this.state;this.clickHandler=this.clickHandler.bind(this);let l=e&&e.idformapagto?e.idformapagto:"";""===s||l===n&&s===c&&i===d||(this.setState({lastFormaPagto:l,lastIdcliente:s,lastTipoEntrega:i}),t({token:a,idcliente:s,idfornecedor:o.idfornecedor,slug:o.slug,idformapagamento:e.idformapagto,updateHard:!0,bloqueioAtendimento:m.get(r,"bloqueio_atendimento",!1)}))}clickHandler(){const{history:e,idfornecedor:t,slugLoja:o}=this.props;e.push({pathname:"/".concat(o||t,"/carrinho/"),search:"?autosubmit=false"})}render(){const{listaTemPrecos:t,carrinho:{totalCompras:o,produtosSelecionados:a,valorDescontoPercentual:s,tipoDesconto:r,totalDescontoEspecifico:i},custoEntrega:n}=this.props;let c="%"===r?o-(i>0?i:o*(s/100)):o-s,d=n>0?c+n:c,l=a.length>1?"itens":"item";const h=c?Object(_.a)(!0,d):Object(_.a)(!0,o);let u=t?""+h:a.length+" ".concat(l),p=m.get("".concat(h).split(","),"0.length",0)||0,b=p>4?22-(1.5*p-6):22;return b<=10&&(u=a.length+" ".concat(l)),Object(C.jsx)(e,{onClick:this.clickHandler,content:u,fontSize:b<=10?22:b,...this.props})}}));const I={width:"100%",heigth:"100%",borderRadius:"10px 0px 0px 10px",padding:"8px",fontSize:"1.5em",textAlign:"start"};var R,F=L((e=>{const{content:t,onClick:o,fontSize:a}=e,{auxiliarColor:s,textColor:r}=e.theme,i={cursor:o?"pointer":"",color:r,backgroundColor:s,...I};return Object(C.jsx)("div",{style:i,onClick:o,children:Object(C.jsx)("div",{className:"cart-content",children:Object(C.jsxs)("b",{children:[Object(C.jsx)(T.a,{name:"shopping basket"}),Object(C.jsx)("span",{className:"cart-value",style:{fontSize:a},children:t})]})})})})),B=o(785),U=o(806),D=o(347),V=o(348),z=o(378),q=o.n(z);o(534);const W={position:"relative",float:"left",borderRight:"1px solid #C4C4C4",maxHeight:"80vh",flex:"1",overflow:"auto"};class H extends s.a.Component{constructor(e){super(e),this.state={active:!1,lastHover:!1,menuColor:""},this.toggle=this.toggle.bind(this),this.renderChildren=this.renderChildren.bind(this),this.itemFoco=this.itemFoco.bind(this),this.show=this.show.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this)}componentDidMount(){const{theme:{primaryColor:e}}=this.props;let t="";try{t=q()(e)}catch(o){t=q()("#436BAC")}this.setState({menuColor:t})}renderChildren(e,t){return this.props.children.filter((t=>!!t&&e===t.props.typeName)).map((e=>s.a.cloneElement(e,t)))}toggle(){this.setState({...this.state,active:!this.state.active})}itemFoco(e){let{id:t}=e;this.setState({...this.state,lastHover:t})}show(e){let{idMenuPai:t}=e;return this.state.lastHover===t}handleMouseLeave(){this.setState({...this.state,active:!1})}render(){const{theme:{textColor:e},t:t}=this.props,{active:o,lastHover:a,menuColor:s}=this.state,r=V.a.span(R||(R=Object(D.a)(["\n      color: ","\n    "])),e),i="rgba(".concat(s.red,", ").concat(s.green,", ").concat(s.blue,", 0.9)");return Object(C.jsx)("div",{style:{backgroundColor:"white",borderTopLeftRadius:"5px",borderBottomLeftRadius:"5px"},children:Object(C.jsxs)("div",{style:{backgroundColor:i,height:"40px",marginLeft:"-3px",right:"-3px",fontSize:"1em",paddingTop:"13px",paddingRight:"2px",border:"1px solid rgba(34,36,38,.15)"},role:"listbox","aria-label":"bot\xe3o","aria-expanded":o,className:o?"ui active dropdown label":"ui dropdown label",tabIndex:"0",children:[Object(C.jsxs)("div",{onClick:()=>this.toggle(),role:"alert","aria-live":"polite",children:[Object(C.jsx)(r,{children:this.props.label||t("header.categoria.btn.categorias")}),Object(C.jsx)(r,{children:Object(C.jsx)("i",{"aria-hidden":"true",style:{marginLeft:"10px"},className:"dropdown icon"})})]}),Object(C.jsx)("div",{onMouseLeave:this.handleMouseLeave,style:{borderRadius:"0px 0px 10px 10px",overflow:"hidden",maxHeight:"80vh",overflowX:"hidden"},className:o?"visible menu transition":"menu transition",children:Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(C.jsx)("div",{style:{...W,overflowY:"auto"},children:this.renderChildren("MenuAimItem",{lastHover:a,hover:this.itemFoco,toggle:this.toggle})}),Object(C.jsx)("div",{style:{color:"black",float:"right",maxHeight:"80vh",overflowY:"auto",overflowX:"hidden"},children:this.renderChildren("MenuAimSubItens",{show:this.show,toggle:this.toggle})})]})})]})})}}var G=Object(h.compose)(Object(x.b)(),Object(p.b)())(H),K=o(268),J=o(269);const Y={cursor:"default",textAlign:"left",borderTop:"none",lineHeight:"1.5em",color:"rgba(0,0,0,.87)",padding:"0.7rem 3em 0.7rem 1.1rem",fontSize:"1rem",textTransform:"none",fontWeight:"400",boxShadow:"none",maxHeight:""},Z={cursor:"pointer"},X={display:"none"},$={backgroundColor:"#EAEAEA"},Q={opacity:"1",filter:"alpha(opacity=100)"};var ee=e=>{const{item:t,lastHover:o,item:{subitens:a,id:s,titulo:r},hover:i,onItemClick:n,toggle:c}=e,d=!a||!a.length;return Object(C.jsxs)("div",{style:{...Y,withClick:Z,...o===s?$:{}},onMouseOver:!!i&&(()=>i({id:s})),onClick:()=>{n(t),c()},role:"option",children:[Object(C.jsx)("span",{children:r}),Object(C.jsx)(K.a,{icon:J.p,className:"arrow",style:{...d?X:{},...o===s?Q:{}}})]})};const te={alignSelf:"flex-start",width:"50%"};let oe="0.2s ease-in-out";const ae={columnGap:"15px",float:"left",transition:"width ".concat(oe,", min-width ").concat(oe,", opacity  ").concat(oe),animationDelay:"0.1s"},se={cursor:"pointer",color:"black"},re={color:"black",fontWeight:"bold",cursor:"pointer"},ie={0:{fontWeight:"100"},1:{marginLeft:"25px",fontWeight:"100"},2:{marginLeft:"50px",fontWeight:"100"}};var ne=e=>{const{idMenuPai:t,subItens:o,show:a,onItemClick:s,toggle:r}=e,i=(e,t)=>e&&e.length?e.map((e=>!e.has_produtos||e.subitens&&0!==e.subitens.length?n(e,t):c(e,t))):Object(C.jsx)("div",{}),n=(e,t)=>Object(C.jsxs)("div",{style:0===t?te:null,children:[Object(C.jsx)("br",{}),Object(C.jsx)("span",{onClick:()=>d(e),style:{...ie[t],...re},children:e.titulo}),i(e.subitens,++t)]},e.id),c=(e,t)=>Object(C.jsxs)("div",{style:0===t?te:null,children:[Object(C.jsx)("br",{}),Object(C.jsx)("span",{className:"MenuSubItem",onClick:()=>d(e),style:{...se,...ie[t]},children:e.titulo})]},e.id),d=e=>{s(e),r()};return Object(C.jsx)("div",{style:{...(()=>{if(a)return a({idMenuPai:t})?{minWidth:"1vw",height:"100%",padding:"10px 3em",overflowY:"auto"}:{minWidth:"0vw",maxWidth:"0vw",overflow:"hidden",height:"0px",float:"left",color:"#fff",padding:"0",opacity:"0"}})(),...ae},children:i(o,0)})};class ce extends s.a.Component{constructor(){super(...arguments),this.setCategoriaActive=e=>{const{fornecedorActive:{idfornecedor:t,slug:o},history:a}=this.props;e?a.push("/".concat(o||t,"/categoria/").concat(e.slug||e.id,"/")):a.push("/".concat(o||t,"/"))}}componentDidMount(){const{fornecedorActive:e,segmentoActive:t,loadTreeMenuCategorias:o,history:a}=this.props;e&&t?o(e.idfornecedor,t.idsegmento):(console.error("Tentou carregar o menu de categorias sem um fornecedor ou segmento ativo."),a.push("/"))}getCategoriaTitulo(e){if(!e)return null;let t=e.split(":");return t=t[1],t?(t=t.trim(),t):null}render(){const{render:e,tree:t,subtitle:o}=this.props,a=this.getCategoriaTitulo(o);return e?Object(C.jsx)("div",{children:e({tree:t,setCategoriaActive:this.setCategoriaActive,menuLabel:a})}):(console.error("Propriedade render eh obrigatoria em MenuCategoriasContainer"),Object(C.jsx)("div",{}))}}var de=Object(h.compose)(Object(u.b)((e=>({usuario:e.usuario,fornecedorActive:e.fornecedor.fornecedorActive,segmentoActive:e.fornecedor.segmentoActive,subtitle:e.pageHead.subtitle,search:e.commerceSearch,tree:e.categoriasProduto.tree})),(e=>Object(h.bindActionCreators)({loadTreeMenuCategorias:g.loadTreeMenuCategorias,getCarrosselForPage:g.getCarrosselForPage},e))),d.g)(ce);var le=()=>Object(C.jsx)(de,{render:e=>{let{tree:t,setCategoriaActive:o,menuLabel:a}=e;return t?Object(C.jsx)(G,{label:a,children:[Object(C.jsx)(ee,{onItemClick:()=>o(null),item:{titulo:"Todas as Categorias"},typeName:"MenuAimItem"},"-1"),...t.map((e=>((e,t)=>{let{setCategoriaActive:o}=t;return Object(C.jsx)(ee,{onItemClick:o,item:e,typeName:"MenuAimItem"},e.id)})(e,{setCategoriaActive:o}))),...t.map((e=>((e,t)=>{let{setCategoriaActive:o}=t;if(e.subitens)return Object(C.jsx)(ne,{onItemClick:o,idMenuPai:e.id,subItens:e.subitens,typeName:"MenuAimSubItens"},"sub_"+e.id)})(e,{setCategoriaActive:o})))]}):""}}),he=o(817);class ue extends a.Component{constructor(e){super(e),this.setCategoriaActive=e=>{const{fornecedorActive:{idfornecedor:t,slug:o},history:a,closeMenu:s}=this.props;a.push("/".concat(o||t,"/categoria/").concat(e.slug||e.id,"/")),s()},this.state={search:"",searchTimeout:0,activeIndex:""},this.handleSearchChange=this.handleSearchChange.bind(this),this.handleClick=this.handleClick.bind(this)}componentDidMount(){this.props.fornecedorActive&&this.props.segmentoActive?this.props.loadTreeMenuCategorias(this.props.fornecedorActive.idfornecedor,this.props.segmentoActive.idsegmento):(console.error("Tentou carregar o menu de categorias sem um fornecedor ou segmento ativo."),this.props.history.push("/"))}handleClick(e,t,o,a){this.state.activeIndex.indexOf(a)>-1?this.setState({activeIndex:o.replace(a,"")}):this.setState({activeIndex:o})}renderMenuCategoria(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const{theme:a}=this.props;o=[...o,{titulo:e.titulo,id:e.id}];let s=-1!==this.state.activeIndex.indexOf(e.id),r=s?{color:pe(a)}:{};if(e.subitens){let a=(t?t.id:"root")+e.id;return Object(C.jsxs)(O.a.Item,{style:{fontSize:"1.1em",textAlign:"left"},children:[Object(C.jsx)(he.a.Title,{active:s,content:e.titulo,index:a,style:{color:"black",...r},onClick:(t,o)=>this.handleClick(t,o,a,e.id)}),Object(C.jsx)(he.a.Content,{active:s,content:e.subitens.map((t=>this.renderMenuCategoria(t,e,o)))})]},e.id)}return Object(C.jsx)(O.a.Item,{style:{fontSize:"1.1em",textAlign:"left",color:"black",...r},onClick:()=>this.setCategoriaActive(e),children:Object(C.jsx)(he.a.Content,{content:e.titulo})},e.id)}focusListaProdutos(){const{idfornecedor:e,slug:t}=this.props.fornecedorActive;this.props.history.push("/".concat(t||e,"/"))}handleSearchChange(e,t){this.setState({search:t.value}),this.state.searchTimeout&&clearTimeout(this.state.searchTimeout);let o=this;this.setState({searchTimeout:setTimeout((()=>{this.props.fetchProductList(this.props.usuario,this.props.fornecedorActive.idfornecedor,this.props.search.idEndereco,this.props.search.selectedCategory,this.state.search,0,m.get(this.props.fornecedor,"tipoEntrega")),o.props.searchProducts(this.state.search)}),750)}),this.focusListaProdutos()}render(){let e=(this.props.categoriasProduto.tree||[]).map((e=>this.renderMenuCategoria(e)));return Object(C.jsx)("div",{children:Object(C.jsx)(he.a,{as:O.a,vertical:!0,fluid:!0,inverted:!0,style:{color:"black",backgroundColor:"white",textAlign:"left"},children:e})})}}const pe=e=>"#FFFFFF"===e.primaryColor.toUpperCase()?e.textColor:e.primaryColor,me=Object(h.compose)(Object(x.b)(),d.g,Object(u.b)((e=>({search:e.commerceSearch,categoriasProduto:e.categoriasProduto,fornecedorActive:e.fornecedor.fornecedorActive,segmentoActive:e.fornecedor.segmentoActive,usuario:e.usuario})),(e=>Object(h.bindActionCreators)({searchProducts:g.searchProducts,loadTreeMenuCategorias:g.loadTreeMenuCategorias,fetchProductList:g.fetchProductList,closeMenu:g.closeMenu},e))))(ue);o(539);var be=o(0),ge=o(39);const je={display:"flex",width:"100%",alignItems:"center"},xe={display:"flex",justifyContent:"space-between",padding:"5px"},fe={padding:"5px",width:"134px",height:"auto",maxHeight:"114px",cursor:"pointer",verticalAlign:"top",display:"inline-table"},Oe={padding:"5px",width:"134px",height:"auto",maxHeight:"114px",cursor:"pointer",verticalAlign:"middle",display:"inline-table"},ve={flex:"3",padding:"5px",left:"145px",right:"170px"},Ce={flex:"1",marginRight:"-5px",maxWidth:"180px",height:"40px"},ye={marginTop:"25px",textAlign:"right",cursor:"default",color:"#fff",fontSize:"15px",lineHeight:"15px",width:"100%"},Ae={padding:"0px 5px",cursor:"pointer"},Ee={padding:"0px 14px",cursor:"pointer",textOverflow:"ellipsis",whiteSpace:"nowrap"};var ke=Object(h.compose)(d.g,j.a,N)((e=>{const{t:t,logo:o,usuario:{nome:s,authenticated:r},handleLogout:i,handleMenuItem:n}=e,[c,d]=Object(a.useState)(!0),l=()=>{const e=document.getElementById("commerce-content").scrollTop;d(!(e>1)),document.getElementById("commerce-grid-h").style.height=e>1?"calc(100vh - 100px)":"calc(100vh - 150px)"};Object(a.useEffect)((()=>{const e=document.getElementById("commerce-content");return e&&e.addEventListener("scroll",l),()=>{e&&e.removeEventListener("scroll",l)}}),[]);const{primaryColor:h,textColor:u}=e.theme,{idfornecedor:p,slug:b,tag:g}=e.fornecedorActive,j=e.fornecedorActive.tag.includes("allow-search-suggestion"),x=()=>{if(I([be.Vc.ORCAMENTO_WEB,be.Vc.WEB_COMMERCE]))return Object(C.jsx)("div",{className:"nav-cart",style:Ce,children:Object(C.jsx)(F,{})})},f=()=>{if(I([be.Vc.PAINEL_CLIENTE])&&!I([be.Vc.ORCAMENTO_WEB,be.Vc.WEB_COMMERCE]))return Object(C.jsx)("div",{style:{float:"right",display:"flex",justifyContent:"center",alignItems:"center",color:u},children:y({t:t})})},O=e=>Object(C.jsx)("div",{style:{...Ee,flex:1,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"25px"},children:Object(C.jsx)("span",{style:{navItemMenu:Ae,display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>n({type:"LISTA_COMPRAS"}),children:e("header.menu.btn.lista.compras")})}),v=e=>Object(C.jsx)("div",{style:{...Ee,padding:"0px 30px",flex:1,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"25px"},children:Object(C.jsxs)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"5px"},onClick:()=>n({type:"COMBO_PROMOCIONAL"}),children:[Object(C.jsx)(S.a.Percent,{width:25,height:25,color:u}),e("header.menu.btn.combo.promocional")]})}),y=t=>{let{t:o}=t;const a=m.get(e.usuarioVinculado,"loginAsUsuarioVinculado")||m.get(e.usuario,"loginAsUsuarioVinculado")||!1,c=m.get(e.usuarioVinculado,"listaClientesVinculados")||m.get(e.usuario,"listaClientesVinculados")||[];return r?Object(C.jsxs)("div",{style:{flex:1,padding:"10px",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"25px",color:u},children:[Object(C.jsx)(S.a.User,{width:"25px",height:"25px",color:u}),Object(C.jsx)(U.a,{pointing:"top right",style:{...Ae,verticalAlign:"top",display:"flex",justifyContent:"center",alignItems:"center"},text:s,className:"drop-down-menu-login",children:Object(C.jsxs)(U.a.Menu,{className:"drop-down-menu",style:{top:"1%"},children:[w()&&I([be.Vc.PAINEL_CLIENTE])&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(U.a.Header,{icon:"money bill alternate outline",content:"Limite Dispon\xedvel: ".concat(Object(_.a)(!0,e.usuario.limiteCreditoDisponivel))}),Object(C.jsx)(U.a.Divider,{})]}),k()&&I([be.Vc.PAINEL_CLIENTE])&&Object(C.jsx)(U.a.Item,{icon:"barcode",style:{minWidth:"8.5rem"},text:o("header.menu.btn.abrir.faturas"),onClick:()=>(()=>{let t=e.match.params.idfornecedor;e.history.push("/".concat(t,"/cliente/faturas/"))})()}),Object(C.jsx)(U.a.Item,{icon:"shop",text:o("header.menu.btn.abrir.pedidos"),onClick:()=>n({type:"PEDIDO"})}),I([be.Vc.WEB_COMMERCE])&&Object(C.jsx)(U.a.Item,{icon:"gavel",text:o("header.menu.btn.abrir.cupons"),onClick:()=>n({type:"CUPOM"})}),!e.representante.usuarioRepresentante&&0==a&&Object(C.jsx)(U.a.Item,{icon:"user",text:o("header.menu.btn.alterar.usuario"),onClick:()=>n({type:"ATUALIZAR_CADASTRO"})}),e.representante&&e.representante.usuarioRepresentante?Object(C.jsx)(U.a.Item,{icon:"sync",text:o("header.menu.btn.trocar.cliente.representante"),onClick:()=>n({type:"TROCAR_CLIENTE_REPRESENTANTE"})}):"",0==a&&Object(C.jsx)(U.a.Item,{icon:"users",text:o("header.menu.btn.abrir.usuarios"),onClick:()=>n({type:"USUARIO"})}),a&&Object(C.jsx)(U.a.Item,{icon:"users",text:o("header.menu.btn.alterar.dados.usuario"),onClick:()=>n({type:"ATUALIZAR_USUARIO"})}),c&&c.length>1?Object(C.jsx)(U.a.Item,{icon:"sync",text:o("usuarios.menu.btn.trocar.usuario.vinculado"),onClick:()=>n({type:"TROCAR_USUARIO_VINCULADO"})}):"",Object(C.jsx)(U.a.Item,{icon:"power off",text:o("header.menu.btn.sair"),onClick:()=>i()})]})})]}):Object(C.jsxs)("div",{style:{...Ee,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"25px",color:u},children:[Object(C.jsx)(S.a.User,{width:"25px",height:"25px",color:u}),Object(C.jsx)("span",{className:"login-text",style:{navItemMenu:Ae,display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"5px",marginRight:!I([be.Vc.WEB_COMMERCE,be.Vc.ORCAMENTO_WEB])&&"24px"},onClick:()=>n({type:"LOGIN"}),children:o("header.menu.logar")})]})},A=()=>{const{hasFormasPagamento:t,setFormaPagamentoActive:o}=e,a=t();if(a){const{formaPagamentoActive:e,formasPagamento:t}=a;let s=0;return Object(C.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"25px",padding:"10px"},children:[Object(C.jsx)(S.a.Dollar,{width:"25px",height:"25px",color:u}),Object(C.jsx)(U.a,{"aria-label":"bot\xe3o",pointing:"top right",style:{...Ae,verticalAlign:"top",display:"flex",justifyContent:"center",alignItems:"center"},text:e&&e.descricao||"Formas de pagamento",children:Object(C.jsx)(U.a.Menu,{className:"drop-down-menu",style:{top:"1%",maxHeight:"60vh",overflowY:"auto"},children:t.map((e=>Object(C.jsx)(U.a.Item,{text:e.descricao,onClick:()=>o(e)},e.idformapagto)))})},s++)]})}},E=t=>{e.setFocus(t)},k=()=>g.indexOf("support-client-billing")>=0&&r,w=()=>g.indexOf("support-client-limit")>=0&&r,M=t=>{e.handleInputEdit(t.target.value)},P=t=>{e.handleSuggestionClick(t)},N=t=>{"Enter"===t.key&&(e.handleKeyEnter(),E(!1))},T=t=>{"function"==typeof e.handleInputFocus&&e.handleInputFocus(t),E(!0)},L=()=>{e.handleKeyEnter(),E(!1)},I=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!!(t&&t.length>0)&&Object(ge.o)(e.fornecedorActive,t)};return Object(C.jsxs)("div",{style:{backgroundColor:h,position:"relative",padding:"1em 0 1em 0.9em",display:"flex",alignItems:"center"},children:[Object(C.jsx)("div",{className:"nav-logo",onClick:()=>n({type:"LOGO"}),style:I([be.Vc.WEB_COMMERCE,be.Vc.ORCAMENTO_WEB])?fe:Oe,children:Object(C.jsx)("div",{style:{display:"table-cell",verticalAlign:"middle"},children:o({idfornecedor:p})})}),Object(C.jsxs)("div",{style:{display:"inline-block",width:I([be.Vc.ORCAMENTO_WEB,be.Vc.WEB_COMMERCE])?"calc(100% - 133px)":"calc(100% - 300px)",verticalAlign:"middle"},children:[c&&(()=>{if(!e.paginasEstaticas)return;const t=m.get(e,"theme.menus",[]);return Object(C.jsx)("div",{className:"nav-superior",children:Object(C.jsxs)("div",{className:"nav-estaticas-commerce",children:[t?t.map((t=>Object(C.jsx)("a",{href:t.destino,target:"_blank",rel:"noreferrer",style:{marginLeft:"5px",marginRight:"30px",color:e.theme.textColor},children:t.content?t.content:t.name},t.content+t.destino+t.name))):"",e.paginasEstaticas.filter((e=>e.tag.includes("WEB")&&0!=e.link_visivel&&(e.apenas_logado&&r||!e.apenas_logado))).map(((t,o)=>Object(C.jsx)("div",{onClick:()=>e.history.push("/".concat(b||p,"/p/").concat(t.slug)),style:{cursor:"pointer",display:"inline-block",marginLeft:"5px",marginRight:"30px"},children:Object(C.jsx)("span",{style:{color:u},children:0!=t.link_visivel?t.titulo:null})},o)))]})})})(),Object(C.jsxs)("div",{className:"nav-principal",style:je,children:[Object(C.jsxs)("div",{className:"nav-search",style:ve,children:[Object(C.jsx)(B.a,{style:{borderTopLeftRadius:"5px",borderBottomLeftRadius:"5px"},icon:{name:"search",link:!0,onClick:L},value:e.search,label:Object(C.jsx)(le,{}),labelPosition:"left",fluid:!0,placeholder:t("header.categoria.input.placeholder"),onChange:e=>M(e),onKeyDown:e=>N(e),onClick:e=>T(e),autoComplete:"on",onBlur:()=>E(!1),disabled:e.inputReadonly}),j&&Object(C.jsxs)("div",{className:"autoCompleteArena "+(e.searchSuggestions.length>0&&e.focus&&""!=e.search?"":"hidden"),children:[Object(C.jsx)("ul",{children:e.searchSuggestions.map((e=>Object(C.jsxs)("li",{onMouseDown:()=>{const t=e._source,o="".concat(t.slug);P(o)},children:[e._source.nome,e._source.descricao_embalagem?" - ".concat(e._source.descricao_embalagem):""]},e._source.slug)))}),Object(C.jsx)("div",{className:"focus-overlay-control"})]})]}),Object(C.jsx)("div",{style:{color:"rgb(255, 255, 255)",fontSize:"15px",lineHeight:"15px"},children:I([be.Vc.ORCAMENTO_WEB,be.Vc.WEB_COMMERCE])&&y({t:t})}),x(),f()]}),c&&I([be.Vc.PAINEL_CLIENTE,be.Vc.ORCAMENTO_WEB,be.Vc.WEB_COMMERCE])&&(()=>{const{t:t,usuario:{authenticated:o,cadastro_aprovado:a},handleMenuItem:s,labelEndereco:r,hadCombo:i}=e,n=g.includes("support-budget"),d=!n||n&&a,l=!n;return Object(C.jsx)("div",{className:"nav-secundaria fade ".concat(c?"fade-in":"fade-out"),style:xe,children:Object(C.jsxs)("div",{className:"nav-menus",style:{...ye,color:u},children:[Object(C.jsx)("span",{style:{...Ae,padding:"2px",cursor:"default",width:"40vw",float:"left"},children:I([be.Vc.ORCAMENTO_WEB,be.Vc.WEB_COMMERCE])&&r((()=>s({type:"ENDERECO"})))}),Object(C.jsxs)("div",{style:{float:"right",display:"flex",justifyContent:"center",alignItems:"center"},children:[I([be.Vc.WEB_COMMERCE])&&o&&O(t),(o?d:l)&&i&&I([be.Vc.WEB_COMMERCE])&&v(t),I([be.Vc.WEB_COMMERCE])&&A()]})]})})})()]})]})}));const _e={heigth:"100%",borderRadius:"10px 0px 0px 10px",padding:"8px",fontSize:"1.5em"};var Se=L((e=>{const{content:t,onClick:o}=e,{auxiliarColor:a,textColor:s}=e.theme,r={cursor:o?"pointer":"",color:s,backgroundColor:a,..._e};return Object(C.jsx)("div",{style:r,onClick:o,children:Object(C.jsx)("div",{className:"cart-content",children:Object(C.jsxs)("b",{children:[Object(C.jsx)(T.a,{name:"shopping basket"}),Object(C.jsxs)("span",{style:{display:"none"},className:"cart-value",children:[" ",t," "]})]})})})}));const we={position:"relative"},Me={padding:"5px",width:"133px",heigth:"40px",cursor:"pointer"},Pe={padding:"8px",width:"0px",position:"absolute",fontSize:"30px",color:"#fff"},Ne={position:"absolute",top:"5px",height:"33px",left:"145px",right:"170px"},Te={position:"absolute",top:"1px",right:"-5px",padding:"5px",width:"160px",height:"40px"};var Le=Object(h.compose)(d.g,j.a,Object(u.b)(null,(e=>Object(h.bindActionCreators)({activeSideMenu:g.activeSideMenu},e))),Object(x.b)())(N((e=>{const{logo:t,handleMenuItem:o,activeSideMenu:a}=e,s=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!!(t&&t.length>0)&&Object(ge.o)(e.fornecedorActive,t)},{primaryColor:r,textColor:i}=e.theme,{idfornecedor:n}=e.fornecedorActive;return Object(C.jsx)("div",{style:{backgroundColor:r,position:"relative",padding:"1em 0 1em 0.9em"},children:Object(C.jsxs)("div",{className:"nav-principal",style:we,children:[Object(C.jsx)("div",{className:"nav-left",style:{...Pe,color:i},children:Object(C.jsx)(K.a,{onClick:()=>a(),style:{cursor:"pointer"},icon:J.h})}),Object(C.jsx)("div",{className:"nav-logo",onClick:()=>o({type:"LOGO"}),style:Me,children:t({idfornecedor:n})}),s([be.Vc.ORCAMENTO_WEB,be.Vc.WEB_COMMERCE,be.Vc.PORTFOLIO_WEB])&&Object(C.jsx)("div",{className:"nav-search",style:Ne,children:Object(C.jsx)(B.a,{icon:{name:"search",link:!0,onClick:t=>{return o=t,e.handleKeyEnter(),void o.target.blur();var o}},value:e.search,fluid:!0,placeholder:"Busque por produtos..",autoComplete:"off",onChange:t=>{return o=t,void e.handleInputEdit(o.target.value);var o},onKeyDown:t=>{var o;"Enter"===(o=t).key&&(e.handleKeyEnter(),o.target.blur())}})}),s([be.Vc.ORCAMENTO_WEB,be.Vc.WEB_COMMERCE])&&Object(C.jsx)("div",{className:"nav-cart",style:Te,children:Object(C.jsx)(Se,{})})]})})}))),Ie=o(335),Re=o(57),Fe=o(489);const Be={padding:"10px",margin:"6px 0",boxShadow:"0 2px 2px -2px grey",cursor:"pointer"};class Ue extends s.a.Component{constructor(e){var t;super(e),t=this,this.showComponente=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!!(e&&e.length>0)&&Object(ge.o)(t.props.fornecedor.fornecedorActive,e)},this._renderLogin=this._renderLogin.bind(this),this._renderAcoes=this._renderAcoes.bind(this),this._renderLinks=this._renderLinks.bind(this),this._renderCategorias=this._renderCategorias.bind(this),this._renderFormasPagamento=this._renderFormasPagamento.bind(this)}_renderNome(e,t,o){return e?Object(C.jsx)("span",{style:{color:o.textColor},children:t}):Object(C.jsx)("span",{style:{color:o.textColor},children:"Entre ou cadastre-se!"})}_renderLogin(){const{theme:e,handleMenuItem:t,usuario:{authenticated:o,nome:a,limiteCreditoDisponivel:s},fornecedorActive:{tag:r}}=this.props;return Object(C.jsx)("div",{style:{textAlign:"left",backgroundColor:e.primaryColor},children:Object(C.jsxs)("div",{onClick:()=>!o&&t({type:"LOGIN_MOBILE"}),style:{cursor:"pointer",marginLeft:"20px",display:"inline-block"},children:[Object(C.jsx)("div",{style:{display:"inline-block",fontSize:"2.5em",color:e.textColor},children:Object(C.jsx)(K.a,{icon:J.I})}),Object(C.jsxs)("div",{style:{display:"inline-block",marginLeft:"10px",textAlign:"left"},children:[Object(C.jsx)("span",{style:{fontWeight:"bold",color:e.textColor},children:"Bem-vindo(a)!"}),Object(C.jsx)("br",{}),this._renderNome(o,a,e),Object(C.jsx)("br",{}),r.indexOf("support-client-limit")>=0&&o&&this.showComponente([be.Vc.PAINEL_CLIENTE])&&Object(C.jsx)("span",{style:{fontWeight:"bold",color:e.textColor},children:"Limite Dispon\xedvel: ".concat(Object(_.a)(!0,s))})]})]})})}_renderFormasPagamento(){const{hasFormasPagamento:e,setFormaPagamentoActive:t}=this.props,o=e();if(o){const{formaPagamentoActive:e,formasPagamento:a}=o;return Object(C.jsxs)("div",{style:{height:"20vh",paddingTop:"2vh"},className:"container-mobile-forma-pagamento",children:[Object(C.jsx)("span",{className:"label-forma-pagamento",children:"Formas de Pagamentos"}),Object(C.jsx)("select",{value:e?JSON.stringify(e):"Selecione uma forma de pagamento",style:{padding:"8px",backgroundColor:"white"},id:"teste",name:"name",onChange:e=>t(JSON.parse(e.target.value)),className:"select-forma-pagamento",children:a.map((e=>Object(C.jsxs)("option",{value:JSON.stringify(e),children:[" ",e.descricao," "]},e.descricao)))})]})}return Object(C.jsx)("div",{})}_renderAcoes(){const{handleMenuItem:e,closeMenu:t,usuario:o,usuario:{authenticated:a},supportPriceVarianceByPayment:s,t:r,hadCombo:i,fornecedorActive:n,usuarioVinculado:c,representante:d}=this.props,l=m.get(c,"loginAsUsuarioVinculado")||m.get(o,"loginAsUsuarioVinculado")||!1;return Object(C.jsxs)("div",{style:{display:"block",textAlign:"left"},children:[this.showComponente([be.Vc.ORCAMENTO_WEB,be.Vc.WEB_COMMERCE])&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{onClick:()=>e({type:"ENDERECO_MOBILE"}),style:Be,children:"Alterar endere\xe7o"}),!d.usuarioRepresentante&&0==l&&Object(C.jsx)("div",{onClick:()=>e({type:"ATUALIZAR_CADASTRO"}),style:Be,children:r("header.menu.btn.alterar.usuario")}),d&&d.usuarioRepresentante&&Object(C.jsx)("div",{onClick:()=>e({type:"TROCAR_CLIENTE_REPRESENTANTE"}),style:Be,children:r("header.menu.btn.trocar.cliente.representante")}),this.showComponente([be.Vc.PAINEL_CLIENTE,be.Vc.ORCAMENTO_WEB,be.Vc.WEB_COMMERCE])&&0==l&&Object(C.jsx)("div",{onClick:()=>{e({type:"USUARIO"}),t()},style:Be,children:r("header.menu.btn.abrir.usuarios")}),l&&Object(C.jsx)("div",{onClick:()=>e({type:"ATUALIZAR_USUARIO"}),style:Be,children:r("header.menu.btn.alterar.dados.usuario")})]}),this.showComponente([be.Vc.WEB_COMMERCE])&&Object(C.jsx)("div",{onClick:()=>{e({type:"LISTA_COMPRAS"}),t()},style:Be,children:"Lista de compras"}),this.showComponente([be.Vc.WEB_COMMERCE])&&i&&Object(C.jsx)("div",{onClick:()=>{e({type:"COMBO_PROMOCIONAL"}),t()},style:Be,children:r("header.menu.btn.combo.promocional")}),this.showComponente([be.Vc.WEB_COMMERCE])&&Object(C.jsx)("div",{onClick:()=>e({type:"FORMA_PAGAMENTO_MOBILE"}),style:{display:s?"block":"none",...Be},children:"Formas de pagamento"}),n.tag.indexOf("support-client-billing")>=0&&a&&this.showComponente([be.Vc.PAINEL_CLIENTE])&&Object(C.jsx)("div",{onClick:()=>{e({type:"FATURAS"}),t()},style:Be,children:"Faturas e t\xedtulos"}),this.showComponente([be.Vc.PAINEL_CLIENTE,be.Vc.ORCAMENTO_WEB,be.Vc.WEB_COMMERCE])&&Object(C.jsx)("div",{onClick:()=>{e({type:"PEDIDO"}),t()},style:Be,children:"Pedidos"})]})}_renderCategorias(e){let{t:t}=e;return Object(C.jsx)("div",{style:{display:"block",textAlign:"left"},children:Object(C.jsxs)("div",{style:{...Be,fontWeight:"bold"},children:[Object(C.jsx)("div",{children:t("header.categoria.btn.categorias")}),Object(C.jsx)("div",{children:Object(C.jsx)(me,{})})]})})}_renderLinks(){const{theme:e,paginasEstaticas:t,history:o,usuario:{authenticated:a},fornecedor:{fornecedorActive:{idfornecedor:s,slug:r}},closeMenu:i}=this.props,{menus:n}=e;return Object(C.jsx)("div",{style:{display:"block",textAlign:"left"},children:Object(C.jsxs)("div",{style:{...Be},children:[Object(C.jsx)("div",{children:"Links"}),Object(C.jsxs)("div",{children:[n?n.map((e=>Object(C.jsx)("a",{href:e.destino,target:"_blank",rel:"noreferrer",style:{cursor:"pointer",marginLeft:"25px",marginBottom:"7px",marginTop:"7px",padding:"2px 2px",color:"rgba(0, 0, 0, 0.87)",display:"block"},children:e.content?e.content:e.name},e.content+e.destino+e.name))):"",t.filter((e=>e.tag.includes("WEB")&&e.link_visivel&&(e.apenas_logado&&a||!e.apenas_logado))).map(((e,t)=>Object(C.jsxs)("div",{onClick:()=>(e=>{o.push("/".concat(r||s,"/p/").concat(e.slug)),i()})(e),style:{cursor:"pointer",marginLeft:"25px",marginBottom:"7px",marginTop:"7px",padding:"2px 2px"},children:[Object(C.jsx)("span",{children:e.titulo}),Object(C.jsx)("br",{})]},t)))]})]})})}_renderLogout(){const{handleLogout:e,authenticated:t}=this.props;return Object(C.jsx)("div",{style:{display:t?"block":"none",textAlign:"left"},children:Object(C.jsxs)("div",{onClick:()=>e(),style:{...Be,color:"red"},children:[Object(C.jsx)(K.a,{style:{marginRight:"5px"},icon:J.C}),"Sair da sua conta"]})})}_renderCloseMenu(){const{theme:e,closeMenu:t}=this.props,o="#ffffff"===e.textColor.toLowerCase()?"#B1B1B1":e.textColor;return Object(C.jsx)("div",{style:{color:o,fontSize:"30px",paddingRight:"10px"},children:Object(C.jsx)(K.a,{onClick:()=>t(),style:{cursor:"pointer"},icon:J.G})})}render(){const{active:e,t:t}=this.props;return e===v.i?Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{className:"menuMobile",children:[this._renderCloseMenu(),this.showComponente([be.Vc.PAINEL_CLIENTE,be.Vc.ORCAMENTO_WEB,be.Vc.WEB_COMMERCE])&&this._renderLogin()]}),this._renderAcoes(),this._renderLinks(),this.showComponente([be.Vc.WEB_COMMERCE,be.Vc.PORTFOLIO_WEB])&&this._renderCategorias({t:t}),this._renderLogout()]}):e===v.j?Object(C.jsx)("div",{style:{padding:"15px"},children:Object(C.jsx)("div",{style:{marginBottom:"200px"},children:Object(C.jsx)(Fe.a,{})})}):e===v.l?Object(C.jsx)("div",{style:{overflowX:"hidden"},children:Object(C.jsx)(Ie.c,{})}):e===v.k?Object(C.jsx)("div",{children:this._renderFormasPagamento()}):Object(C.jsx)("div",{children:" "})}}var De=Object(h.compose)(Object(x.b)(),Object(p.b)(),Object(u.b)((e=>({active:e.menu.active,authenticated:e.usuario.authenticated,usuario:e.usuario,fornecedor:e.fornecedor,textoendereco:e.endereco.textoendereco,enderecos:e.endereco.enderecos,supportPriceVarianceByPayment:Object(Re.d)(e,"support-price-variance-by-payment")})),(e=>Object(h.bindActionCreators)({closeMenu:g.closeMenu,setFormaPagamentoActive:g.setFormaPagamentoActive},e))),N)(Ue),Ve=o(334),ze=o(88),qe=o(5),We=o(396),He=o(11),Ge=o(279);o(479);const Ke=e=>{let{titulo:t,data:o,mensagem:a,onOpen:s,origem:r="f",totalMensagens:i=0}=e;const n="".concat(a).length>80?a.slice(0,80)+"...":a;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"chat-item",onClick:()=>s(),children:[Object(C.jsx)("div",{className:"chat-profile",children:Object(C.jsxs)("div",{className:"profile-circle",children:[Object(C.jsx)(K.a,{icon:J.I}),i>0&&Object(C.jsx)("div",{className:"chat-budge",children:i>9?"+9":i})]})}),Object(C.jsxs)("div",{className:"chat-info",children:[Object(C.jsxs)("div",{className:"chat-first-line",children:[Object(C.jsx)("div",{className:"chat-name",children:t}),Object(C.jsx)("div",{className:"chat-data",children:o?Ge(o).format("DD/MM HH:mm"):""})]}),Object(C.jsx)("div",{className:"chat-last-msg",children:n?Object(C.jsxs)(C.Fragment,{children:["c"===r&&Object(C.jsx)(K.a,{icon:J.A,style:{fontSize:"10px",opacity:.5,marginRight:"5px"}}),Object(C.jsx)("i",{children:n})]}):Object(C.jsx)("i",{children:"Sem hist\xf3rico"})})]})]}),Object(C.jsx)("div",{className:"chat-divider"})]})};var Je=o(112),Ye=o(829);o(674);class Ze extends a.Component{constructor(e){super(e),this.handlerNovaMensagem=e=>{const t=Ge(m.get(e,"timestamp")),o=m.get(e,"mensagemUUID",Object(Ye.a)()),a=m.cloneDeep(this.state.mensagens),s=m.findIndex(a,{mensagemUUID:o});s>=0&&"c"===e.origem?(a[s]={...a[s],time:t.format("DD/MM HH:mm")},this.setState({...this.state,mensagens:a})):this.setState({...this.state,mensagens:[...this.state.mensagens,{mensagemUUID:o||Object(Ye.a)(),idfornecedor:m.get(e,"idfornecedor"),idusuario:m.get(e,"idcliente",m.get(e,"idusuario")),lida_origem:[],mensagem:m.get(e,"mensagem",m.get(e,"txt",m.get(e,"text"))),metadados:m.get(e,"metadados",{}),origem:m.get(e,"origem","f"),numpedido:m.get(e,"numpedido",m.get(e,"codpedido",null)),datamensagem:t.toLocaleString(),time:t.format("DD/MM HH:mm")}]}),this.scrollToEnd()},this.handlerHistoric=e=>{const{sala:t,conexao:o}=this.state,{idfornecedor:a}=this.props.fornecedorActive,s=m.get(this.state.mensagens,"0.mensagemUUID");this.setState({...this.state,loading:!1,mensagens:[...e.map((e=>({...e,time:Ge(m.get(e,"datamensagem")).format("DD/MM HH:mm"),mensagemUUID:Object(Ye.a)()}))).reverse(),...this.state.mensagens]}),o&&o.send("mark-as-read",{sala:t,idfornecedor:a,origem:"f"}),this.state.page<=1?this.scrollToEnd():setTimeout((()=>this.scrollToLine(s)),10)},this.loadMore=m.debounce((()=>{const{sala:e,conexao:t,page:o=1,perpage:a=10,mensagens:s}=this.state,{idfornecedor:r}=this.props.fornecedorActive,i=a*o;this.setState({...this.state,page:o+1,perpage:a,loading:!0}),s.length>=i&&t.send("listar-mensagens",{idfornecedor:r,sala:e,page:o+1,perpage:a})}),500),this.renderImageMessage=e=>{const t=m.get(e,"attachment")||"";return t?m.get(e,"bucketRoot")+"/"+t:""},this.renderMensagens=()=>{const{mensagens:e=[]}=this.state;return e.map((e=>Object(C.jsx)("div",{className:"c"===e.origem?"chat-msg-line send":"chat-msg-line receive",id:e.mensagemUUID,children:Object(C.jsxs)("div",{className:"chat-msg ",children:[!e.metadados.attachment&&Object(C.jsx)("div",{children:e.txt||e.mensagem}),e.metadados.attachment&&Object(C.jsx)("a",{href:this.renderImageMessage(e.metadados),target:"_blank",rel:"noreferrer",children:Object(C.jsx)("img",{width:"60%",src:this.renderImageMessage(e.metadados)})}),Object(C.jsxs)("div",{className:"msg-footer",children:[Object(C.jsx)("div",{className:"msg-time",children:e.time}),"f"===e.origem&&Object(C.jsx)(K.a,{icon:e.time?J.m:J.q})]})]})},e.mensagemUUID)))},this.enviaMensagem=()=>{const{idfornecedor:e}=this.props.fornecedorActive,{input:t,conexao:o}=this.state,{roomOpen:{idcliente:a,numpedido:s}}=this.props.chat;if(t){const r=Object(Ye.a)(),i={datamensagem:(new Date).toLocaleString(),idfornecedor:e,lida_origem:[],metadados:{},idusuario:"0",mensagem:t,origem:"c",mensagemUUID:r,time:"",numpedido:s};o.send("new-chat-message",{idfornecedor:e,idusuario:a,idcliente:a,numpedido:s,codpedido:s,txt:t,mensagem:t,origem:"c",mensagemUUID:r,timestamp:null}),this.setState({...this.state,input:"",mensagens:[...this.state.mensagens,i]})}this.scrollToEnd()},this.scrollToEnd=()=>{const e=document.getElementById("chat-content");e&&e.scrollTo(0,e.scrollHeight)},this.scrollToLine=e=>{const t=document.getElementById(e);t&&t.scrollIntoView()},this.onScroll=()=>{const e=document.getElementById("chat-content");e&&e.scrollTop<10&&this.loadMore()},this.renderLoading=()=>[Object(C.jsx)("div",{className:"chat-msg-line receive",children:Object(C.jsx)("div",{className:"chat-msg  msg-loading"})},"msg-loading-1"),Object(C.jsx)("div",{className:"chat-msg-line send",children:Object(C.jsx)("div",{className:"chat-msg  msg-loading"})},"msg-loading-2"),Object(C.jsx)("div",{className:"chat-msg-line receive",children:Object(C.jsx)("div",{className:"chat-msg  msg-loading"})},"msg-loading-3"),Object(C.jsx)("div",{className:"chat-msg-line send",children:Object(C.jsx)("div",{className:"chat-msg  msg-loading"})},"msg-loading-4"),Object(C.jsx)("div",{className:"chat-msg-line receive",children:Object(C.jsx)("div",{className:"chat-msg  msg-loading"})},"msg-loading-5"),Object(C.jsx)("div",{className:"chat-msg-line send",children:Object(C.jsx)("div",{className:"chat-msg  msg-loading"})},"msg-loading-6")],this.renderFalha=()=>Object(C.jsxs)("div",{className:"chat-falha",children:[Object(C.jsx)("div",{className:"chat-falha-icon",children:Object(C.jsx)(K.a,{icon:J.H})}),Object(C.jsx)("p",{style:{color:"rgba(0, 0, 0, 0.4)",fontWeight:"bold",fontSize:"14px"},children:"A conex\xe3o com o chat falhou. Verifique a sua rede e tente novamente em alguns minutos atualizando a p\xe1gina."})]}),this.handleKeyPress=e=>{"Enter"===e.key&&this.enviaMensagem()},this.state={mensagens:[],sala:null,canal:null,conexao:null,page:1,perpage:10,input:"",loading:!0,retry:0}}componentDidMount(){this.initConexao(),this.props.chatSetInputValue("")}componentDidUpdate(e){const{roomOpen:{sala:t},mensagemChat:o}=this.props.chat;this.state.sala!==t&&this.initConexao(),o!==e.chat.mensagemChat&&this.setState({input:e.chat.mensagemChat})}componentWillUnmount(){this.state.conexao&&this.state.conexao.exit()}async initConexao(){const{roomOpen:e}=this.props.chat;if(e){const{sala:t,canal:o}=e,{idfornecedor:a}=this.props.fornecedorActive;this.state.conexao&&this.state.conexao.exit();const s=new Je.a({canal:o,sala:t},(e=>{e.send("listar-mensagens",{idfornecedor:a,sala:t,page:1,perpage:this.state.perpage||10})}));this.setState({...this.state,mensagens:[],sala:t,canal:o,page:1,perpage:this.state.perpage||10,conexao:s,loading:!0,retry:this.state.retry+1}),s.subscribe("new-message-received",this.handlerNovaMensagem),s.subscribe("new-message-sent",this.handlerNovaMensagem),s.subscribe("message-historic",this.handlerHistoric),setTimeout((()=>{this.state.loading&&0===this.state.mensagens.length&&!this.state.conexao.connected&&(this.state.retry<k.i?this.initConexao():this.setState({...this.state,failure:!0}))}),1e3)}}render(){const{theme:e}=this.props,{loading:t,mensagens:o,failure:a}=this.state;return Object(C.jsxs)("div",{className:"room-chat",children:[Object(C.jsx)("div",{className:"room-mensagens",children:Object(C.jsxs)("div",{id:"chat-content",className:"mensagens",onScroll:this.onScroll,children:[t&&!a&&0===o.length&&this.renderLoading(),a&&this.renderFalha(),this.renderMensagens()]})}),Object(C.jsxs)("div",{className:"room-footer",children:[Object(C.jsx)("input",{type:"text",placeholder:"Digite uma mensagem",value:this.state.input,autoFocus:!0,className:"room-input",onChange:e=>this.setState({input:e.target.value}),onKeyPress:this.handleKeyPress,readOnly:a}),Object(C.jsx)("a",{className:"room-send",style:{backgroundColor:e.primaryColor,color:e.textColor},disabled:a,onClick:()=>this.enviaMensagem(),children:Object(C.jsx)(K.a,{icon:J.g})})]})]})}}const Xe=Object(h.compose)(Object(x.b)("ChatRomComponent"),Object(p.b)(),Object(u.b)((e=>({fornecedorActive:e.fornecedor.fornecedorActive,usuario:e.usuario,chat:e.chat})),(e=>Object(h.bindActionCreators)({chatSetInputValue:g.chatSetInputValue},e))))(Ze),$e=()=>Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"chat-item chat-loading",children:[Object(C.jsx)("div",{className:"chat-profile",children:Object(C.jsx)("div",{className:"profile-circle",children:Object(C.jsx)(K.a,{icon:J.I})})}),Object(C.jsxs)("div",{className:"chat-info",children:[Object(C.jsxs)("div",{className:"chat-first-line",children:[Object(C.jsx)("div",{className:"chat-name loading chat-loading"}),Object(C.jsx)("div",{className:"chat-data loading chat-loading"})]}),Object(C.jsx)("div",{className:"chat-last-msg loading chat-loading"})]})]}),Object(C.jsx)("div",{className:"chat-divider"})]});o(675);class Qe extends a.Component{constructor(e){super(e),this.initEvents=e=>{const{fornecedorActive:t,usuario:o}=this.props,{page:a,perpage:s}=this.state;e.send("list-chat",{idfornecedor:t.idfornecedor,idcliente:o.idcliente,page:a,perpage:s}),e.subscribe("chat-list",(e=>{this.props.chatLoad(e.map((e=>({numpedido:e.numpedido,idcliente:m.get(e,"ultima_mensagem.idusuario"),origem:m.get(e,"ultima_mensagem.origem","c"),mensagem:m.get(e,"ultima_mensagem.mensagem"),sala:e.sala,canal:e.canal,datamensagem:m.get(e,"ultima_mensagem.datamensagem"),total_mensagens:e.nao_lida||0}))),{page:a,perpage:s,clear:1===this.state.page}),this.setState({...this.state,loading:!1})})),e.subscribe("new-notification-message",(e=>{const{sala:t,mensagem:o,total_mensagens:r,datamensagem:i,origem:n}=e,c=m.cloneDeep(this.props.chat.rooms||[]),d=m.find(c,{sala:t}),l=this.props.chat.notificacoes||0;"f"===n&&this.props.chatSetNotificacoes(l+Number(d.total_mensagens||0)),d?this.props.chatLoad(m.uniqBy([{...d,mensagem:o,datamensagem:i,total_mensagens:"f"===n?Number(d.total_mensagens||0)+(r||1):0},...c.filter((e=>e.sala!==t))],"sala"),{page:a,perpage:s,clear:!0}):this.props.chatLoad(m.uniqBy([{...e,total_mensagens:"f"===n?Number(r)||1:0},...c],"sala"),{page:a,perpage:s,clear:!0})})),this.setState({...this.state,socket:e}),setInterval((()=>{this.state.socket.send("list-chat",{idfornecedor:t.idfornecedor,idcliente:o.idcliente,page:a,perpage:s})}),2e4)},this.loadMoreRooms=m.debounce((()=>{const{fornecedorActive:e,usuario:t,chat:o}=this.props,{socket:a,page:s,perpage:r}=this.state,i=r*s;a&&o.rooms.length>=i&&(this.setState({...this.state,page:s+1,perpage:r,loading:!0}),this.state.socket.send("list-chat",{idfornecedor:e.idfornecedor,idcliente:t.idcliente,page:s+1,perpage:r}))}),500),this.onScroll=()=>{const e=document.getElementById("chat-list");if(!this.state.loading&&e){e.scrollTop+e.clientHeight+20>=e.scrollHeight&&this.loadMoreRooms()}},this.renderRoomList=()=>{const{theme:e,chat:t,usuario:o,fornecedorActive:a}=this.props,{rooms:s=[]}=t,r=e=>{this.props.chatOpenRoom(o.idcliente,a.idfornecedor,{sala:e.sala,canal:e.canal,numpedido:e.numpedido});const t=m.cloneDeep(this.props.chat.rooms||[]),s=m.find(t,{sala:e.sala});s&&this.props.chatLoad(m.uniqBy([{...s,total_mensagens:0},...t.filter((t=>t.sala!==e.sala))],"sala"),{page:this.state.page,perpage:this.state.perpage,clear:!0})},i=s.map((e=>Object(C.jsx)(Ke,{titulo:e.numpedido?"Pedido ".concat(e.numpedido):"Chat geral",data:e.datamensagem,mensagem:e.mensagem,origem:e.origem,totalMensagens:e.total_mensagens||0,onOpen:()=>r(e)},e.sala+"_"+e.canal)));return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"chat-header",style:{backgroundColor:e.primaryColor,color:e.textColor},children:[Object(C.jsx)("span",{children:"Mensagens"}),Object(C.jsx)("a",{className:"btn-close",onClick:()=>this.closeChat("voltar"),style:{backgroundColor:e.primaryColor,color:e.textColor},children:Object(C.jsx)(K.a,{icon:J.G})})]}),Object(C.jsxs)("div",{id:"chat-list",className:"chat-content chat-list",onScroll:()=>this.onScroll(),children:[s.length>0&&i,this.state.loading&&this.renderLoading()]})]})},this.renderRoom=e=>{const{theme:t}=this.props;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"chat-header room-header",style:{backgroundColor:t.primaryColor,color:t.textColor},children:[Object(C.jsx)("a",{className:"btn-close",style:{backgroundColor:t.primaryColor,color:t.textColor},onClick:()=>this.closeChat(),children:Object(C.jsx)(K.a,{icon:J.c})}),Object(C.jsx)("span",{children:e.titulo})]}),Object(C.jsx)("div",{className:"chat-content",children:Object(C.jsx)(Xe,{sala:e.sala,canal:e.canal})})]})},this.renderLoading=()=>[Object(C.jsx)($e,{},"chat-loading-1"),Object(C.jsx)($e,{},"chat-loading-2"),Object(C.jsx)($e,{},"chat-loading-3"),Object(C.jsx)($e,{},"chat-loading-4")],this.state={socket:null,page:1,perpage:10,loading:!0},this.props.chatCloseRoom(),this.props.chatToggle(!1)}componentDidMount(){this.props.socket&&this.props.socket.cliente&&this.initEvents(this.props.socket.cliente)}componentDidUpdate(){this.props.socket&&this.props.socket.cliente&&this.props.socket.cliente!==this.state.socket&&this.initEvents(this.props.socket.cliente)}closeChat(e){const{chatToggle:t,chatSetInputValue:o,chatCloseRoom:a}=this.props;"voltar"===e?t():a(),o("")}render(){const{chat:e}=this.props;return Object(C.jsx)("div",{className:e.show?"chat-window open":"chat-window ",children:e.roomOpen?this.renderRoom(e.roomOpen):this.renderRoomList()})}}const et=Object(h.compose)(Object(x.b)("ChatComponent"),Object(x.a)(),Object(p.b)(),Object(u.b)((e=>({fornecedorActive:e.fornecedor.fornecedorActive,usuario:e.usuario,chat:e.chat})),(e=>Object(h.bindActionCreators)({chatToggle:g.chatToggle,chatLoad:g.chatLoad,chatOpenRoom:g.chatOpenRoom,chatCloseRoom:g.chatCloseRoom,chatSetNotificacoes:g.chatSetNotificacoes,chatSetInputValue:g.chatSetInputValue},e))))(Qe);class tt extends a.Component{constructor(e){super(e),this.initAtendimento=(e,t,o)=>{this.state.socketAtendimento&&this.state.socketAtendimento.exit();const a=new qe.a({canal:"atendimento",keys:{idcliente:e,idfornecedor:t}});a.send("check-atendimento");const s=m.debounce((e=>{e&&(this.props.alterarProdutoCarrinho({direction:He.a.SET,produto:e,quantidadeBase:e.quantidade,salvaCarrinho:!1,exibirMensagem:!1},(()=>{}),!1),We.a.success("Produto ".concat(e.nome," alterado pelo atendente"),{position:"top-right",toastContainerID:e.id}),this.props.bloqueioCarrinhoAtendimento())}),500),r=m.debounce((e=>{e&&(this.props.alterarProdutoCarrinho({direction:He.a.SET,produto:e,quantidadeBase:0,salvaCarrinho:!1,exibirMensagem:!1},(()=>{}),!1),We.a.success("Produto ".concat(e.nome||""," removido pelo atendente"),{position:"top-right",toastContainerID:e.id}),this.props.bloqueioCarrinhoAtendimento())}),500),i=m.debounce((e=>{e&&(this.props.setFormaPagamentoActive({...e,usaEnderecoFaturamento:m.get(e,"usa_endereco_faturamento",!1)},!0),We.a.success("Forma de pagamento alterada pelo atendente",{position:"top-right",toastContainerID:Math.random()}),this.props.bloqueioCarrinhoAtendimento())}),1e3),n=m.debounce((e=>{e&&(this.props.alterarEndereco({endereco:e}),We.a.success("Endere\xe7o de entrega alterado pelo atendente",{position:"top-right",toastContainerID:Math.random()}),this.props.bloqueioCarrinhoAtendimento())}),500),c=m.debounce((e=>{e&&(this.props.updateTipoEntrega(e),We.a.success("Tipo de entrega alterado pelo atendente",{position:"top-right",toastContainerID:Math.random()}),this.props.bloqueioCarrinhoAtendimento())}),500),d=m.debounce((e=>{e&&(this.props.updateCodigoCupom(e,"MANUAL"),setTimeout((()=>this.props.validateCupomDesconto(e)),500),We.a.success("Cupom ".concat(e," adicionado pelo atendente"),{position:"top-right",toastContainerID:e}),this.props.bloqueioCarrinhoAtendimento())}),500),l=m.debounce((e=>{e&&(this.props.commerceLimparCarrinho(),this.props.history.push("/".concat(o||t,"/pedido/").concat(e)),We.a.success("Pedido submetido pelo atendente",{position:"top-right",toastContainerID:e}))}),200),h=m.debounce((e=>{this.props.bloqueioCarrinhoAtendimento(e)}),200),u=m.debounce((e=>{e&&this.props.setFormaEntregaActive({formaEntrega:{...e,agendamento:m.get(e,"opcaoagendamento",[])}})}),500);return a.subscribe("alteracao-produto-carrinho",s),a.subscribe("remove-produto-carrinho",r),a.subscribe("alteracao-forma-pagamento",i),a.subscribe("alteracao-endereco-entrega",n),a.subscribe("alteracao-tipo-entrega",c),a.subscribe("alteracao-cupom-desconto",d),a.subscribe("pedido-criado",l),a.subscribe("bloqueio-carrinho",h),a.subscribe("alteracao-forma-entrega",u),a},this.initChat=(e,t)=>{this.state.socketCliente&&this.state.socketCliente.exit();return new qe.a({canal:"cliente",keys:{idcliente:e,idfornecedor:t}})},this.state={idcliente:"",idfornecedor:"",socketAtendimento:null,socketCliente:null}}componentDidMount(){const{idcliente:e,match:t,fornecedorActive:o,fornecedorActive:{idfornecedor:a,slug:s},authenticated:r}=this.props;let i=a;if(o&&a||(i=t.params.idfornecedor),e&&i&&r){const t=this.initAtendimento(e,i,s),o=this.initChat(e,i);this.setState({...this.state,idfornecedor:i,idcliente:e,socketAtendimento:t,socketCliente:o})}else r||(this.state.socketCliente&&this.state.socketCliente.exit(),this.state.socketAtendimento&&this.state.socketAtendimento.exit())}componentDidUpdate(){const{fornecedorActive:e,idcliente:t,authenticated:o}=this.props,{idfornecedor:a,slug:s}=e||{};if(a===this.state.idfornecedor&&t===this.state.idcliente&&null!==this.state.socketCliente&&null!==this.state.socketAtendimento||!o)o||(this.state.socketCliente&&this.state.socketCliente.exit(),this.state.socketAtendimento&&this.state.socketAtendimento.exit(),this.state.socketCliente=null,this.state.socketAtendimento=null);else{const e=this.initAtendimento(t,a,s),o=this.initChat(t,a);this.setState({...this.state,idfornecedor:a,idcliente:t,socketAtendimento:e,socketCliente:o})}}render(){const e={cliente:this.state.socketCliente,atendimento:this.state.socketAtendimento};return Object(C.jsxs)(ze.d,{value:e,children:[this.props.children,this.props.authenticated&&Object(C.jsx)(et,{})]})}}var ot=Object(h.compose)(d.g,Object(u.b)((e=>({fornecedorActive:e.fornecedor.fornecedorActive,idcliente:e.usuario.idcliente,authenticated:e.usuario.authenticated,pedido:e.pedido})),(e=>Object(h.bindActionCreators)({alterarProdutoCarrinho:g.alterarProdutoCarrinho,setFormaPagamentoActive:g.setFormaPagamentoActive,updateTipoEntrega:g.updateTipoEntrega,alterarEndereco:g.alterarEndereco,updateCodigoCupom:g.updateCodigoCupom,validateCupomDesconto:g.validateCupomDesconto,commerceLimparCarrinho:g.commerceLimparCarrinho,bloqueioCarrinhoAtendimento:g.bloqueioCarrinhoAtendimento,setFormaEntregaActive:g.setFormaEntregaActive},e))))(tt),at=o(273),st=o.n(at),rt=(o(676),o(280));const it=rt();class nt extends a.Component{constructor(){super(...arguments),this.renderMarkdown=()=>{const{markdown:e}=this.props;return e?Object(C.jsx)("div",{className:"descricao-markdown footer-commerce",children:Object(C.jsx)(st.a,{escapeHtml:!1,source:e,astPlugins:[it]})}):""}}render(){return Object(C.jsxs)("div",{className:"footer-container",children:[this.renderMarkdown(),Object(C.jsxs)("div",{className:"footer-powered-by",children:[Object(C.jsx)("small",{children:"Powered By"}),Object(C.jsx)("a",{href:"https://lifeapps.com.br",target:"_blank",rel:"noreferrer",children:Object(C.jsx)("img",{src:"https://lifeapps.com.br/wp-content/uploads/2021/05/Grupo-5.png",alt:"Lifeapps"})})]})]})}}var ct=o(325);o(677);class dt extends a.Component{constructor(e){super(e),this.state={idfornecedor:"",idcliente:""},this.getRodape=this.getRodape.bind(this)}componentDidMount(){this.getRodape()}componentDidUpdate(){const{idcliente:e,idfornecedor:t}=this.props,o={idcliente:e,idfornecedor:t};m.isEqual(this.state,o)||this.getRodape()}getRodape(){const{idcliente:e,idfornecedor:t,getFornecedorRodape:o}=this.props;t&&o({idcliente:e,idfornecedor:t}),this.setState({idcliente:e,idfornecedor:t})}render(){const{rodape:e}=this.props;return Object(C.jsx)(ct.LazyLoadComponent,{placeholder:Object(C.jsx)("div",{className:"footer-loading"}),delayTime:5e3,children:Object(C.jsx)(nt,{markdown:e})})}}var lt=Object(u.b)((e=>({idcliente:e.usuario.idcliente,idfornecedor:e.fornecedor.fornecedorActive.idfornecedor,rodape:e.fornecedor.rodape})),(e=>Object(h.bindActionCreators)({getFornecedorRodape:ge.j},e)))(dt),ht=o(390),ut=o(391);o(678);var pt=Object(h.compose)(d.g,j.a,N)((e=>{const{primaryColor:t,textColor:o}=e.theme,{idfornecedor:a,texto_aviso_modo_manutencao:s}=e.fornecedorActive;return Object(C.jsxs)("div",{className:"container-aviso-manutencao",style:{backgroundColor:t,color:o,textAlign:"center"},children:[Object(C.jsxs)("div",{className:"div2",children:[Object(C.jsx)("div",{className:"logo-fornecedor",children:Object(C.jsx)(E.a,{className:"logo-supplier",src:"".concat(k.b,"/logos/commerce/").concat(a,"?cache=true")})}),Object(C.jsx)("div",{className:"mensagem-default",children:Object(C.jsxs)("div",{className:"inner",children:[Object(C.jsx)("div",{className:"text1",children:"LOJA EM MANUTEN\xc7\xc3O"}),Object(C.jsx)("div",{className:"text2",children:"Por favor, retorne em alguns instantes"})]})}),Object(C.jsx)("div",{className:"mensagem-fornecedor",children:s})]}),Object(C.jsx)("div",{className:"div1",children:Object(C.jsx)(E.a,{className:"logo-maintenance",src:"https://prod-superon-public-media.s3.sa-east-1.amazonaws.com/shared/icons/web-maintenance.png"})})]})})),mt=o(821),bt=o(820);const gt=rt();class jt extends s.a.Component{constructor(){super(...arguments),this.state={mensagem:"Ao clicar em Sim, voc\xea certifica em ser maior de 18 anos. <br>Se beber, n\xe3o dirija. N\xe3o compartilhe esse conte\xfado com menores de 18 anos.",showPopup:null},this.renderMensagemPopUp=e=>e.includes("<html")?Object(C.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:e}):Object(C.jsx)(st.a,{escapeHtml:!1,source:e,astPlugins:[gt]})}render(){const{t:e,showPopUp:t,handlerAcceptedPopUp:o,handlerRefusalPopUp:a}=this.props;return Object(C.jsxs)(mt.a,{open:t,style:{marginTop:"0px",margin:"30vh auto",width:"fit-content"},children:[Object(C.jsx)(mt.a.Header,{children:e("modal.termo.controle-maioridade.header")}),Object(C.jsx)(mt.a.Content,{scrolling:!0,children:Object(C.jsx)(mt.a.Description,{children:this.renderMensagemPopUp(this.state.mensagem)})}),Object(C.jsxs)(mt.a.Actions,{children:[Object(C.jsx)(bt.a,{id:"aceitar-controle-maioridade",icon:"check",content:"Sim",positive:!0,size:"large",onClick:()=>{o()}}),Object(C.jsx)(bt.a,{id:"recusar-controle-maioridade",icon:"close",content:"N\xe3o",size:"large",onClick:()=>{a()}})]})]})}}var xt=Object(h.compose)()(jt);o(679);var ft=Object(h.compose)(d.g,j.a,N)((e=>{const{primaryColor:t,textColor:o}=e.theme,{idfornecedor:a}=e.fornecedorActive;return Object(C.jsxs)("div",{className:"container-controle-maioridade",style:{backgroundColor:t,color:o,textAlign:"center"},children:[Object(C.jsxs)("div",{className:"div2cm",children:[Object(C.jsx)("div",{className:"logo-fornecedor",children:Object(C.jsx)(E.a,{className:"logo-supplier",src:"".concat(k.b,"/logos/commerce/")+a})}),Object(C.jsx)("div",{className:"mensagem-default",children:Object(C.jsx)("div",{className:"inner",children:Object(C.jsx)("div",{className:"titulo",children:"PROIBIDO A VENDA DE BEBIDA ALCO\xd3LICA PARA MENORES DE 18 ANOS"})})}),Object(C.jsx)("div",{className:"mensagem-controle-maioridade",children:"Bebida alco\xf3lica pode causar depend\xeancia qu\xedmica e, em excesso, provoca graves males a sa\xfade. \xc9 proibido a venda, oferta, fornecimento, entrega e permiss\xe3o de consumo de bebidas alco\xf3licas, ainda que gratuitamente, aos menores de 18 (dezoito) anos de idade."})]}),Object(C.jsx)("div",{className:"div1cm",children:Object(C.jsx)(E.a,{className:"logo-controle-maioridade",src:"https://prod-superon-public-media.s3.sa-east-1.amazonaws.com/shared/menor-idade/NicePng_bebidas-png_399978.png"})})]})})),Ot=o(105),vt=o(395),Ct=(o(680),o(825));var yt=Object(h.compose)(Object(x.b)(),Object(p.b)(),Object(u.b)())((function(e){let{t:t,showCookie:o,handlerShowCookie:a,handlerPreferenceCookie:s}=e;return o?Object(C.jsxs)("div",{className:"cookies__container",children:[Object(C.jsx)(Ct.a,{as:"h2",size:"medium",children:t("modal.termo.cookie.header")}),Object(C.jsxs)("p",{children:["Nosso site pode utilizar cookies para o funcionamento adequado dos seus recursos, com o objetivo de melhorar a sua experi\xeancia, permitir o in\xedcio de sess\xe3o seguro, memorizar os detalhes de seu in\xedcio de sess\xe3o, gerir a sess\xe3o e recolher estat\xedsticas para oferecer o conte\xfado mais adequado aos seus interesses. Saiba mais sobre"," ",Object(C.jsx)("a",{href:"https://lifeappshelp.zendesk.com/hc/pt-br/articles/6069875669783-O-que-s%C3%A3o-cookies-",target:"_blank",rel:"noopener noreferrer",children:"o que s\xe3o cookies"}),"."]}),Object(C.jsxs)("div",{className:"cookies__buttons",children:[Object(C.jsx)(bt.a,{id:"gerenciar-preferencias",content:t("modal.termo.cookie.btn.preferencias"),size:"medium",onClick:()=>{s()}}),Object(C.jsx)(bt.a,{id:"aceitar-termos",icon:"check",content:t("modal.termo.cookie.btn.executar"),positive:!0,size:"medium",onClick:()=>{a()}})]})]}):null}));const At=s.a.lazy((()=>Promise.all([o.e(0),o.e(1),o.e(3),o.e(2),o.e(31)]).then(o.bind(null,792)))),Et=s.a.lazy((()=>o.e(12).then(o.bind(null,814)))),kt=s.a.lazy((()=>Promise.all([o.e(0),o.e(11)]).then(o.bind(null,810)))),_t=s.a.lazy((()=>Promise.all([o.e(30),o.e(28)]).then(o.bind(null,793)))),St=s.a.lazy((()=>Object(Ot.a)((()=>Promise.all([o.e(0),o.e(1),o.e(3),o.e(2),o.e(34)]).then(o.bind(null,794))),"verPedido"))),wt=s.a.lazy((()=>Object(Ot.a)((()=>Promise.all([o.e(18),o.e(26)]).then(o.bind(null,830))),"viewFatura"))),Mt=s.a.lazy((()=>Object(Ot.a)((()=>Promise.resolve().then(o.bind(null,770))),"LoginByToken"))),Pt=s.a.lazy((()=>Object(Ot.a)((()=>o.e(21).then(o.bind(null,795))),"Login"))),Nt=s.a.lazy((()=>Object(Ot.a)((()=>o.e(24).then(o.bind(null,796))),"ListaCompras"))),Tt=s.a.lazy((()=>Object(Ot.a)((()=>Promise.all([o.e(0),o.e(1),o.e(3),o.e(2),o.e(33)]).then(o.bind(null,831))),"VerAssinatura"))),Lt=s.a.lazy((()=>Object(Ot.a)((()=>Promise.all([o.e(0),o.e(19)]).then(o.bind(null,819))),"ListaComboPromocional"))),It=s.a.lazy((()=>Object(Ot.a)((()=>o.e(22).then(o.bind(null,797))),"ComboPromocional"))),Rt=s.a.lazy((()=>Promise.resolve().then(o.bind(null,478)))),Ft=s.a.lazy((()=>Object(Ot.a)((()=>o.e(27).then(o.bind(null,798))),"DetalheListaComprasPage"))),Bt=s.a.lazy((()=>Object(Ot.a)((()=>o.e(15).then(o.bind(null,799))),"Cadastro"))),Ut=s.a.lazy((()=>Object(Ot.a)((()=>Promise.all([o.e(1),o.e(14)]).then(o.bind(null,800)))))),Dt=s.a.lazy((()=>Object(Ot.a)((()=>o.e(23).then(o.bind(null,801))),"LinkAcao"))),Vt=s.a.lazy((()=>o.e(13).then(o.bind(null,822)))),zt=s.a.lazy((()=>Object(Ot.a)((()=>o.e(16).then(o.bind(null,802))),"CompletarCadastro"))),qt=s.a.lazy((()=>Promise.resolve().then(o.bind(null,395)))),Wt=s.a.lazy((()=>o.e(29).then(o.bind(null,803))));class Ht extends a.Component{constructor(e){super(e),this.handleOpenDescriptionCookie=e=>{this.setState({...this.state,categoriasCookies:this.state.categoriasCookies.map((t=>t.id===e?{...t,open:!t.open}:t))})},this.handleActiveCookie=e=>{this.setState({...this.state,categoriasCookies:this.state.categoriasCookies.map((t=>t.id===e?{...t,active:!t.active}:t))})},this.state={chatBotLoaded:!1,logoLoaded:!1,srcLogo:[null],idcliente:null,idfornecedor:null,showTerm:!1,showCookie:!1,showPreference:!1,showPopUpMaioridade:!1,paginaControleMaioridade:!1,categoriasCookies:[{id:1,titulo:"Necess\xe1rios",descricao:"S\xe3o essenciais para o site funcionar. Caso desativado algumas partes do site podem n\xe3o funcionar de forma adequada.",open:!1,active:!0},{id:2,titulo:"Sess\xe3o",descricao:"S\xe3o utilizados para guardar a sess\xe3o do usu\xe1rio. Caso desativado n\xe3o ser\xe1 poss\xedvel manter dados de login ao atualizar a pagina",open:!1,active:!0},{id:3,titulo:"Desempenho",descricao:"S\xe3o utilizados para melhora do desempenho do site. Caso desativado ir\xe1 afetar na opera\xe7\xe3o do site, deixando mais lento.",open:!1,active:!0},{id:4,titulo:"Personaliza\xe7\xe3o",descricao:"S\xe3o utilizados para a melhora na  intera\xe7\xe3o do usu\xe1rio com o conte\xfado do nosso site, ajudando a personalizarmos para melhorar sua experi\xeancia.",open:!1,active:!0}],termosUso:{versao:null,aceite:!1},termoAtual:null,authenticated:!1},this._renderDropdownFormasPagamento=this._renderDropdownFormasPagamento.bind(this),this.handleTermosUso=this.handleTermosUso.bind(this),this.handlerShowCookie=this.handlerShowCookie.bind(this),this.handlerPreferenceCookie=this.handlerPreferenceCookie.bind(this),this.handlerAcceptedPopUpMaioridade=this.handlerAcceptedPopUpMaioridade.bind(this),this.handlerRefusalPopUpMaioridade=this.handlerRefusalPopUpMaioridade.bind(this),this.checarVerificacao();const{fornecedorActive:t}=this.props;t.tag.includes("disable-cookies-registration")||(this.initPreference(),localStorage.AceitarCookies?this.state.showCookie="true"!==localStorage.getItem("AceitarCookies").toLowerCase():this.state.showCookie=!0),!this.state.idcliente&&t.tag.includes("allow-age-control")&&(localStorage.AceitarControleMaioridade?this.state.showPopUpMaioridade="true"!==localStorage.getItem("AceitarControleMaioridade").toLowerCase():this.state.showPopUpMaioridade=!0)}componentWillUnmount(){this.props.fornecedor.whiteLabel||this.props.cleanFornecedorActive(),this.props.setResetPage({})}componentDidUpdate(e){const{fornecedorActive:t,idcliente:o,endereco:a,token:s,representante:r,usuario:i}=this.props,{idfornecedor:n}=t;if(this.state.authenticated=m.get(i,"authenticated",!1),n===this.state.idfornecedor&&o===this.state.idcliente||(n!==this.state.idfornecedor&&this.initFornecedorConfigs(t),this.setState({...this.state,idfornecedor:n,idcliente:o})),this.initTermosUso((()=>{const e=m.get(t,"config.chat_bot.config",null);this.initBlip(e)})),r&&r.usuarioRepresentante){let e=null,t=document.cookie.replace("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");t&&qe.b.checkAcessoClientesRepresentante(t)}o&&o!==e.idcliente&&o&&n&&(this.props.atualizarConfiguracoesCliente(),this.checarVerificacao(),qe.b.getFornecedor({idfornecedor:n,token:s,lat:a.lat,lng:a.lng}).then((e=>{const{data:t}=e;let o=m.get(t,"config.termosUso.config.versao",null);this.setState({...this.state,termoAtual:o})})))}initFornecedorConfigs(){const{fornecedorActive:e}=this.props,{idfornecedor:t,slug:o}=e;this.initLogo(t),this.initTheme(t,o),this.updateTipoEntregaConfiguracao(e.tag)}initLogo(e){const{theme:t}=this.props;t.themeLoaded&&e&&!this.state.logoLoaded&&this.setState({...this.state,srcLogo:["".concat(k.b,"/logos/commerce/").concat(e,"?cache=true"),"".concat(k.b,"/logos/").concat(e,"?cache=true"),null],logoLoaded:!0,chatBotLoaded:this.state.chatBotLoaded})}initTheme(e,t){const{match:o,updateTheme:a,closeMenu:s,fornecedor:{fetchingTheme:r}}=this.props,i=o.params.idfornecedor;!r&&(e!==i&&t!==i)&&(a({idfornecedor:i,dominio:window.location.hostname}),s())}updateTipoEntregaConfiguracao(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{fornecedor:{tipoEntrega:t}}=this.props,o=()=>e.includes("has-delivery"),a=()=>e.includes("has-collect"),s=()=>{o()?this.props.updateTipoEntrega(b.a):a()?this.props.updateTipoEntrega(b.b):console.warn("Nenhum tipo de entrega configurada para a loja. Configure os parametros de processo no admin")};t?(t===b.a&&!o()||t===b.b&&!a())&&s():s()}async checarVerificacao(){const{usuario:e,fornecedorActive:t}=this.props;if(e.idcliente){if(!e.email_verificado){const o=await qe.b.sendVerificacao({canal:"email",idcliente:e.idcliente,idfornecedor:e.idfornecedor||t.idfornecedor,fonte:"automatico"});o.data&&o.data.success&&o.data.enviadoEmail&&l.b.success("Verfica\xe7\xe3o enviada novamente, cheque seu E-mail!")}if(!e.telefone_verificado){const o=await qe.b.sendVerificacao({canal:"sms",idcliente:e.idcliente,idfornecedor:e.idfornecedor||t.idfornecedor,fonte:"automatico"});o.data&&o.data.success&&o.data.enviadoCelular&&l.b.success("Verfica\xe7\xe3o enviada novamente, cheque seu Telefone!")}}}componentDidMount(){const{token:e,getFornecedor:t,endereco:o}=this.props;let{match:a}=this.props,{fornecedorActive:s,fornecedorActive:{idfornecedor:r}}=this.props;s&&r||(r=a.params.idfornecedor,r&&t({idfornecedor:r,token:e,lat:o.lat,lng:o.lng})),s&&r||this.props.history.push("/selecao-fornecedor"),this.props.carregarFaturasCliente({complete:!0}),this.doMount()}doMount(){const{closeMenu:e,idcliente:t,token:o,updateTheme:a,getFornecedor:s,endereco:r,fornecedor:{tipoEntrega:i},usuario:n,history:c}=this.props;let{match:d}=this.props,{fornecedorActive:h,fornecedorActive:{idfornecedor:u}}=this.props;h&&u||(u=d.params.idfornecedor,u&&s({idfornecedor:u,token:o,lat:r.lat,lng:r.lng})),h&&u||c.push("/selecao-fornecedor"),this.props.bloqueioCarrinhoAtendimento(!1);let{formaPagamentoActive:p}=this.props;if(t&&u!==h.idfornecedor&&(this.props.checkSessionToken((e=>{e&&l.b.warning(e)})),this.props.atualizarConfiguracoesCliente()),(!this.props.fornecedorActive.meta_info||!this.props.fornecedorActive.meta_info.fee_meta)&&i!==b.b&&r&&r.lat&&r.lng){let e=p&&p.idformapagto?p.idformapagto:"";this.props.getFornecedoresByLocation({token:o,idformapagamento:e})}u&&(this.props.getPaginasEstaticas(u),this.props.getFornecedorTextosEstaticos({idfornecedor:u}));const{hostname:m}=window.location;a({idfornecedor:u,dominio:m}),e(),this.setState({...this.state,idcliente:t,idfornecedor:u}),this.props.getListaComboPromocional({idfornecedor:u},n.idcliente)}_renderDropdownFormasPagamento(){const{authenticated:e,formaPagamentoActive:t,fornecedorActive:{formasPagamento:o,tag:a},setFormaPagamentoActive:s}=this.props;return a&&a.includes("support-price-variance-by-payment")&&e&&o?[{type:"dropdown",name:t?t.descricao:"Formas de pagamento",subItems:o.map((e=>({text:e.descricao,onClick:()=>s(e)}))),location:"",position:"right"}]:[]}topGridStructure(){const{theme:e,fornecedorActive:t,chatNotificacoes:o,authenticated:s}=this.props,{auxiliarColor:r}=e,{idfornecedor:l,slug:h,tag:u}=t,p="/".concat(h||l,"/"),m=u.includes("enable-ecommerce-chat");return Object(C.jsx)(i.a,{fluid:!0,style:{paddingTop:"1em",height:"100%"},className:"commerce-top-content",children:Object(C.jsx)(n.a,{className:"commerce-grid",id:"commerce-grid-h",children:Object(C.jsxs)(n.a.Column,{style:{paddingLeft:"0px",paddingRight:"0px",paddingBottom:"0px"},widescreen:16,largeScreen:16,computer:16,tablet:16,mobile:16,className:"top-content-grid-commerce",id:"commerce-content",children:[Object(C.jsx)(a.Suspense,{fallback:Object(C.jsx)("div",{style:{minHeight:"75vh"}}),children:Object(C.jsxs)(d.d,{children:[Object(C.jsx)(d.b,{path:"/:idfornecedor/carrinho/",render:e=>Object(C.jsx)(At,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/pedidos/*",render:()=>Object(C.jsx)(Et,{})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/pedido/:numpedido",render:e=>Object(C.jsx)(St,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/submissao/:numpedido",render:e=>Object(C.jsx)(Ut,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/assinatura/:idassinatura",render:e=>Object(C.jsx)(Tt,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/cliente/faturas",render:e=>Object(C.jsx)(wt,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/lista-compras",exact:!0,render:e=>Object(C.jsx)(Nt,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/combo-promocional",exact:!0,component:Lt}),Object(C.jsx)(d.b,{path:"/:idfornecedor/combo-promocional/:idcombopromocional",exact:!0,component:It}),Object(C.jsx)(d.b,{path:"/:idfornecedor/representante",exact:!0,component:e=>Object(C.jsx)(Rt,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/lista-compras/:id",render:e=>Object(C.jsx)(Ft,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/categoria/:idcategoria",exact:!0,render:e=>Object(C.jsx)(kt,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/produto/:idproduto",exact:!0,render:e=>Object(C.jsx)(kt,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/p/:slug/",exact:!0,render:e=>Object(C.jsx)(_t,{authenticated:s,noAccessRedirectUrl:p,...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/",exact:!0,render:e=>Object(C.jsx)(kt,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/login-token/:token/:email",exact:!0,render:e=>Object(C.jsx)(Mt,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/login",exact:!0,render:e=>Object(C.jsx)(Pt,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/cadastro",exact:!0,render:e=>Object(C.jsx)(Bt,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/acao/:slug",render:e=>Object(C.jsx)(Dt,{...e})}),this.state.authenticated&&Object(C.jsx)(d.b,{path:"/:idfornecedor/usuarios",render:()=>Object(C.jsx)(Vt,{})}),Object(C.jsx)(d.b,{path:"/:id_fornecedor/:id_usuario/completar-cadastro",exact:!0,render:e=>Object(C.jsx)(zt,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/usuarios-vinculados",exact:!0,component:e=>Object(C.jsx)(qt,{...e})}),Object(C.jsx)(d.b,{path:"/:idfornecedor/erro/too-many-request",exact:!0,component:()=>Object(C.jsx)(Wt,{})}),Object(C.jsx)(d.a,{path:"/:idfornecedor/*",to:p})]})}),s&&m?Object(C.jsx)("div",{className:"botao-chat",onClick:()=>this.props.chatToggle(),children:Object(C.jsxs)("div",{className:"container-icon",style:{backgroundColor:r},children:[o?Object(C.jsx)("div",{className:"nav-chat-budge",children:o>9?"+9":o}):null,Object(C.jsx)(K.a,{className:"botao-icon",icon:J.r,size:"4x"})]})}):null,t.tag.includes("disable-cookies-registration")||this.state.showCookie?null:Object(C.jsx)(c.a,{size:"large",className:"btn-preferencia",onClick:this.handlerPreferenceCookie,children:"Gerenciar Prefer\xeancias"}),Object(C.jsx)(lt,{})]})})})}initBlip(e){if(e&&!this.state.chatBotLoaded){const t=!(!e.appKey||"true"!==e.web);!this.state.chatBot&&t&&(new r.BlipChat).withAppKey(e.appKey).withButton({color:e.buttonColor}).build(),this.state.chatBotLoaded=!0}}initTermosUso(e){const{usuario:{termosuso:t,fetching:o,hadConfig:a},fornecedorActive:s,authenticated:r}=this.props,{termoAtual:i}=this.state,{showTerm:n}=this.state,c=m.get(s,"config.termosUso.config.versao","");if(i){const s=m.get(t,"versao",""),d=a&&c&&(!t||!s||!i||s!==i);r&&!o&&!n&&d?this.setState({...this.state,showTerm:d}):e()}}handleSearchText(e){this.props.history.push("?query=".concat(e)),this.setState({searchText:e})}handleTermosUso(e){if(e){const{fornecedorActive:{idfornecedor:t},idcliente:o}=this.props,{termoAtual:a}=this.state,s={versao:a,aceite:e};this.setState({...this.state,showTerm:!1,termosUso:s}),this.props.aceitarTermoUso({idfornecedor:t,idcliente:o,termosUso:s})}else this.setState({...this.state,showTerm:!1}),this.logout()}initPreference(){const e=JSON.parse(localStorage.getItem("preferencias-cookies"))||[],t=this.state.categoriasCookies.map((t=>({...t,active:"boolean"===typeof e[t.id-1]?e[t.id-1]:t.active})));e&&(this.state.categoriasCookies=t),this.deleteAllCookies(t)}handlerShowCookie(){localStorage.setItem("AceitarCookies",!0),localStorage.setItem("preferencias-cookies",JSON.stringify(this.state.categoriasCookies.map((e=>e.active)))),this.setState({...this.state,showCookie:!1,showPreference:!1}),this.deleteAllCookies(this.state.categoriasCookies)}handlerAcceptedPopUpMaioridade(){localStorage.setItem("AceitarControleMaioridade",!0),this.setState({...this.state,showPopUpMaioridade:!1})}handlerRefusalPopUpMaioridade(){const{fornecedorActive:e}=this.props,t=e.pagina_controle_maioridade?e.pagina_controle_maioridade.replace(/\s/g,""):e.pagina_controle_maioridade;t?window.location.href=t:(this.setState({...this.state,paginaControleMaioridade:!0}),this.render())}deleteAllCookies(e){const t=e.filter((e=>4===e.id));if(t.length&&!t[0].active)for(var o=document.cookie.split(";"),a=0;a<o.length;a++){var s=o[a],r=s.indexOf("="),i=r>-1?s.substr(0,r):s;document.cookie=i+"=;Path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;",document.cookie=i+"=;domain=.".concat(window.location.hostname,";Path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;"),document.cookie=i+"=;domain=".concat(window.location.hostname,";Path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;")}}handlerPreferenceCookie(){this.setState({...this.state,showPreference:!this.state.showPreference})}logout(){const{logoutUsuario:e,token:t,history:o,fornecedorActive:{idfornecedor:a,slug:s}}=this.props;e({token:t}),o.push("/".concat(s||a))}render(){var e;const{theme:t,fornecedorActive:o,fornecedor:a,t:s,endereco:r,listaComboPromocional:i}=this.props,n=this.props.paginasEstaticas.find((e=>!0===e.pagina_home)),c=window.location.pathname.replaceAll("/",""),d=c=="".concat(o.slug||o.idfornecedor)||"/"==c,h=(null===o||void 0===o||null===(e=o.tag)||void 0===e?void 0:e.includes("enable-cookie-confirmation-to-browse-the-store"))||!1,u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!!(e&&e.length>0)&&Object(ge.o)(o,e)};if(1==this.state.paginaControleMaioridade)return Object(C.jsx)(ot,{children:Object(C.jsx)(A,{pusher:()=>Object(C.jsxs)("span",{className:"commerce-base",children:[Object(C.jsx)("div",{className:"menu-desktop",children:Object(C.jsx)(ft,{})}),Object(C.jsx)("div",{className:"menu-mobile",children:Object(C.jsx)(ft,{})})]}),render:()=>Object(C.jsx)(De,{})})});if(o.tag.includes("enable-mode-maintenance-ecommerce"))return Object(C.jsx)(ot,{children:Object(C.jsx)(A,{pusher:()=>Object(C.jsx)("span",{className:"commerce-base",children:Object(C.jsx)(pt,{})}),render:()=>Object(C.jsx)(De,{})})});if(n){const e="/".concat(o.slug||o.idfornecedor,"/p/").concat(n.slug);d&&(window.location.href=e)}return t&&t.themeLoaded&&o&&o.idfornecedor===t.idfornecedor&&a&&!a.isFetching?Object(C.jsx)(ot,{children:Object(C.jsx)(A,{pusher:()=>Object(C.jsxs)("span",{className:"commerce-base",children:[Object(C.jsx)(l.a,{style:{marginTop:"100px",fontWeight:"bold"}}),Object(C.jsx)("div",{className:"menu-mobile",children:Object(C.jsx)(Le,{onSearch:e=>{this.setState({searchText:e}),this.handleSearchText(e)}})}),Object(C.jsx)(yt,{t:s,showCookie:!(h&&!d&&this.state.showCookie)&&this.state.showCookie,handlerShowCookie:this.handlerShowCookie,handlerPreferenceCookie:this.handlerPreferenceCookie}),Object(C.jsxs)("div",{className:"menu-desktop",children:[Object(C.jsx)(xt,{showPopUp:this.state.showPopUpMaioridade,handlerAcceptedPopUp:this.handlerAcceptedPopUpMaioridade,handlerRefusalPopUp:this.handlerRefusalPopUpMaioridade,t:s}),Object(C.jsx)(ke,{t:s,onSearch:e=>{this.setState({searchText:e}),this.handleSearchText(e)},hadCombo:0!==(i||[]).length}),Object(C.jsx)(Ve.f,{fornecedorActive:o,endereco:r,showComponente:u([be.Vc.ORCAMENTO_WEB,be.Vc.WEB_COMMERCE])}),Object(C.jsx)(Ve.g,{fornecedorActive:o,showComponente:u([be.Vc.WEB_COMMERCE])}),Object(C.jsx)(Ve.h,{}),Object(C.jsx)(Ve.a,{}),Object(C.jsx)(Ve.b,{}),Object(C.jsx)(Ve.e,{fornecedorActive:o}),Object(C.jsx)(Ve.l,{handleTermosUso:this.handleTermosUso,showTerm:this.state.showTerm,btnCancelarLabel:s("modal.termo.uso.btn.cancelar.sair"),t:s,termoAtual:this.state.termoAtual}),Object(C.jsx)(ht.a,{showCookie:!(!h||d||!this.state.showCookie),handlerShowCookie:this.handlerShowCookie,handlerPreferenceCookie:this.handlerPreferenceCookie,t:s}),Object(C.jsx)(ut.a,{t:s,showCookie:this.state.showPreference,handlerShowCookie:this.handlerShowCookie,handlerPreferenceCookie:this.handlerPreferenceCookie,categoriasCookies:this.state.categoriasCookies,handleOpenDescriptionCookie:this.handleOpenDescriptionCookie,handleActiveCookie:this.handleActiveCookie}),Object(C.jsx)(Ve.i,{}),Object(C.jsx)(Ve.k,{}),Object(C.jsx)(vt.default,{})]}),this.topGridStructure()]}),render:()=>Object(C.jsx)(De,{hadCombo:0!==(i||[]).length})})}):Object(C.jsx)("div",{})}}var Gt=Object(h.compose)(Object(x.b)("Commerce",{primaryColor:"#456bab",backgroundColor:"#25406c",overBackgroundTextColor:"#fff"}),Object(p.b)(),d.g,j.a,Object(u.b)((e=>({endereco:e.endereco,fornecedorActive:e.fornecedor.fornecedorActive,fornecedor:e.fornecedor,token:e.usuario.token,idcliente:e.usuario.idcliente,usuarioTermosUso:e.usuario.termosUso,usuario:e.usuario,authenticated:e.usuario.idcliente,formaPagamentoActive:e.usuario.formaPagamentoActive,carrinho:e.carrinho,listaTemPrecos:e.commerceSearch.listaTemPrecos,chatNotificacoes:e.chat.notificacoes,paginasEstaticas:e.conteudo.paginasEstaticas,listaComboPromocional:e.comboPromocional.listaComboPromocional,representante:e.representante,usuarioVinculado:e.usuarioVinculado})),(e=>Object(h.bindActionCreators)({logoutUsuario:g.logoutUsuario,updatePageAfterLogin:g.updatePageAfterLogin,getEnderecos:g.getEnderecos,closeMenu:g.closeMenu,setFormaPagamentoActive:g.setFormaPagamentoActive,aceitarTermoUso:g.aceitarTermoUso,whiteLabel:g.whiteLabel,getFornecedoresByLocation:g.getFornecedoresByLocation,cleanFornecedorActive:g.cleanFornecedorActive,searchClean:g.searchClean,getFornecedor:g.getFornecedor,carregarFaturasCliente:g.carregarFaturasCliente,atualizarConfiguracoesCliente:g.atualizarConfiguracoesCliente,getPaginasEstaticas:g.getPaginasEstaticas,getFornecedorTextosEstaticos:g.getFornecedorTextosEstaticos,setResetPage:g.setResetPage,updateTipoEntrega:g.updateTipoEntrega,checkSessionToken:g.checkSessionToken,bloqueioCarrinhoAtendimento:g.bloqueioCarrinhoAtendimento,chatToggle:g.chatToggle,getListaComboPromocional:g.getListaComboPromocional,logoutUsuarioRepresentante:g.logoutUsuarioRepresentante,logoutUsuarioVinculado:g.logoutUsuarioVinculado},e))))(Ht),Kt=o(827),Jt=o(788),Yt=o(809),Zt=o(301),Xt=o(455),$t=o(770);const Qt=e=>{let t={color:e.theme.textColor};return Object(C.jsxs)("div",{children:[Object(C.jsx)(Xt.a,{labelColor:e.theme.textColor,autoLogin:!1}),Object(C.jsx)("span",{style:{display:"block",cursor:"pointer",...t,marginTop:"1em",textAlign:"center"},onClick:()=>{e.showInitialLogin(!0),e.clearErrorMessage()},children:"Entrar com usu\xe1rio existente"})]})},eo=e=>{if(e)return Object(C.jsx)(Kt.a,{style:{borderColor:"red",textAlign:"center",background:"rgb(255, 242, 242)"},children:Object(C.jsx)("span",{style:{color:"red"},children:e})})},to=e=>{let t=e.fornecedor.whiteLabel,{textColor:o}=e.theme,s={color:o},r={marginTop:"1em",textAlign:"center"};const[i,n]=Object(a.useState)("");return Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{style:{textAlign:"center"},children:Object(C.jsx)(E.a,{src:"".concat(k.b,"/logos/commerce/").concat(t,"?cache=true")})}),Object(C.jsx)(Ct.a,{as:"h3",style:{color:o,textAlign:"center"},children:"Preencha os dados para entrar"}),Object(C.jsx)(Jt.a,{inverted:!0}),Object(C.jsx)(Zt.a,{enableReinitialize:!0,initialValues:{usuario:"",senha:""},onSubmit:(t,o)=>((e,t,o)=>{if(!e.usuario||!e.senha)return l.b.error("Informe seu usu\xe1rio e senha para prosseguir");let{usuario:a,senha:s}=e,{token:r}=o.usuario;o.autenticarFull({token:r,usuario:a,senha:s})})(t,0,e),usuario:e.usuario,render:t=>{let{values:a,handleChange:c,handleSubmit:d}=t;return Object(C.jsxs)(Yt.a,{onSubmit:d,children:[Object(C.jsx)("label",{style:{color:o,fontWeight:"bold"},children:"Usu\xe1rio:"}),Object(C.jsx)(Yt.a.Field,{control:B.a,label:"",name:"usuario",value:a.usuario,onChange:e=>{c(e),n("")},style:{color:o}}),Object(C.jsx)("label",{style:{color:o,fontWeight:"bold"},children:"Senha:"}),Object(C.jsx)(Yt.a.Field,{control:B.a,label:"",name:"senha",type:"password",value:a.senha,onChange:c}),e.usuario.message||i?eo(e.usuario.message||i):"",Object(C.jsx)("div",{style:{...r,textAlign:"right"},children:Object(C.jsx)(bt.a,{type:"submit",size:"large",style:{width:"100%"},children:e.t("login.btn.logar")})}),Object(C.jsx)("span",{style:{display:"block",cursor:"pointer",...s,...r},onClick:m.debounce((()=>{a.usuario?(e.recuperarSenha(a.usuario),l.b.success("Um e-mail de redefini\xe7\xe3o foi enviado. Verifique sua caixa de entrada e/ou de spam para continuar.")):n("Preencha seu usu\xe1rio para redefinir sua senha")}),1e3),children:e.t("login.btn.recuperar")}),e.desabilitaCadastro?"":Object(C.jsx)("span",{style:{display:"block",cursor:"pointer",...s,...r},onClick:()=>{e.showInitialLogin(!1),e.clearErrorMessage()},children:e.t("login.btn.cadastrar")})]})}}),Object(C.jsx)(l.a,{})]})};var oo=Object(h.compose)(Object(x.b)("EnforcedAuthComponent"),Object(p.b)(),d.g,Object(u.b)((e=>({fornecedorActive:e.fornecedor.fornecedorActive,desabilitaCadastro:Object(Re.d)(e,"disable-client-signup"),fornecedor:e.fornecedor,authenticated:e.usuario.idcliente,usuario:e.usuario})),(e=>Object(h.bindActionCreators)({autenticarFull:g.autenticarFull,getFornecedor:g.getFornecedor,showInitialLogin:g.showInitialLogin,recuperarSenha:g.recuperarSenha,clearErrorMessage:g.clearErrorMessage},e))))((e=>{e.fornecedorActive.idfornecedor||e.fornecedor.isFetching||e.getFornecedor({idfornecedor:e.fornecedor.whiteLabel,token:e.token,lat:0,lng:0});let{primaryColor:t,secondaryColor:o}=e.theme;return Object(C.jsx)(i.a,{fluid:!0,style:{background:o},children:Object(C.jsx)("div",{style:{maxWidth:"30em",minHeight:"100vh",position:"relative",opacity:"1",margin:"auto",alignItems:"center",display:"flex"},children:Object(C.jsx)("div",{style:{width:"100%"},children:Object(C.jsxs)(Kt.a,{style:{background:t},children:[e.usuario.showFormLoginBloqueio?to(e):Qt(e),Object(C.jsx)(d.d,{children:Object(C.jsx)(d.b,{path:"/:idfornecedor/login-token/:token/:email",exact:!0,component:$t.default})})]})})})})}));const ao=(e,t,o)=>!(!(e&&e.tag&&o&&e.tag.indexOf("block-not-approved-user")>=0)||t);var so=Object(h.compose)(Object(x.b)("ProtecaoAcessoComponent"),d.g,Object(u.b)((e=>({fornecedorActive:e.fornecedor.fornecedorActive,authenticated:e.usuario.idcliente,fornecedor:e.fornecedor})),(e=>Object(h.bindActionCreators)({},e))))((e=>{let t=!(!e.fornecedor||!e.fornecedor.whiteLabel);return ao(e.fornecedorActive,e.authenticated,t)?Object(C.jsx)(oo,{}):Object(C.jsx)(e.protected,{})}));const ro=()=>Object(C.jsx)(so,{protected:Gt});t.default=ro}}]);